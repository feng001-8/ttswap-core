<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="index.html">Home</a></li><li class="chapter-item affix "><li class="part-title">src</li><li class="chapter-item "><a href="src/interfaces/index.html">❱ interfaces</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/interfaces/IAllowanceTransfer.sol/interface.IAllowanceTransfer.html">IAllowanceTransfer</a></li><li class="chapter-item "><a href="src/interfaces/IERC721Permit.sol/interface.IERC721Permit.html">IERC721Permit</a></li><li class="chapter-item "><a href="src/interfaces/ISignatureTransfer.sol/interface.ISignatureTransfer.html">ISignatureTransfer</a></li><li class="chapter-item "><a href="src/interfaces/I_SimplePermit.sol/interface.I_SimplePermit.html">I_SimplePermit</a></li><li class="chapter-item "><a href="src/interfaces/I_TTSwap_LimitOrderMaker.sol/interface.I_TTSwap_LimitOrderMaker.html">I_TTSwap_LimitOrderMaker</a></li><li class="chapter-item "><a href="src/interfaces/I_TTSwap_LimitOrderTaker.sol/interface.I_TTSwap_LimitOrderTaker.html">I_TTSwap_LimitOrderTaker</a></li><li class="chapter-item "><a href="src/interfaces/I_TTSwap_LimitOrderTaker.sol/struct.S_takeGoodInputPrams.html">S_takeGoodInputPrams</a></li><li class="chapter-item "><a href="src/interfaces/I_TTSwap_Market.sol/interface.I_TTSwap_Market.html">I_TTSwap_Market</a></li><li class="chapter-item "><a href="src/interfaces/I_TTSwap_Market.sol/struct.S_ProofState.html">S_ProofState</a></li><li class="chapter-item "><a href="src/interfaces/I_TTSwap_Market.sol/struct.S_GoodState.html">S_GoodState</a></li><li class="chapter-item "><a href="src/interfaces/I_TTSwap_Market.sol/struct.S_GoodTmpState.html">S_GoodTmpState</a></li><li class="chapter-item "><a href="src/interfaces/I_TTSwap_Market.sol/struct.S_GoodKey.html">S_GoodKey</a></li><li class="chapter-item "><a href="src/interfaces/I_TTSwap_Market.sol/struct.S_ProofKey.html">S_ProofKey</a></li><li class="chapter-item "><a href="src/interfaces/I_TTSwap_Market.sol/struct.S_LoanProof.html">S_LoanProof</a></li><li class="chapter-item "><a href="src/interfaces/I_TTSwap_NFT.sol/interface.I_TTSwap_NFT.html">I_TTSwap_NFT</a></li><li class="chapter-item "><a href="src/interfaces/I_TTSwap_Token.sol/interface.I_TTSwap_Token.html">I_TTSwap_Token</a></li><li class="chapter-item "><a href="src/interfaces/I_TTSwap_Token.sol/struct.s_share.html">s_share</a></li><li class="chapter-item "><a href="src/interfaces/I_TTSwap_Token.sol/struct.s_chain.html">s_chain</a></li><li class="chapter-item "><a href="src/interfaces/I_TTSwap_Token.sol/struct.s_proof.html">s_proof</a></li></ol></li><li class="chapter-item "><a href="src/libraries/index.html">❱ libraries</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/libraries/L_Currency.sol/library.L_CurrencyLibrary.html">L_CurrencyLibrary</a></li><li class="chapter-item "><a href="src/libraries/L_Good.sol/library.L_Good.html">L_Good</a></li><li class="chapter-item "><a href="src/libraries/L_Good.sol/library.L_GoodIdLibrary.html">L_GoodIdLibrary</a></li><li class="chapter-item "><a href="src/libraries/L_GoodConfig.sol/library.L_GoodConfigLibrary.html">L_GoodConfigLibrary</a></li><li class="chapter-item "><a href="src/libraries/L_Lock.sol/library.L_Lock.html">L_Lock</a></li><li class="chapter-item "><a href="src/libraries/L_MarketConfig.sol/library.L_MarketConfigLibrary.html">L_MarketConfigLibrary</a></li><li class="chapter-item "><a href="src/libraries/L_OrderStatus.sol/library.L_OrderStatus.html">L_OrderStatus</a></li><li class="chapter-item "><a href="src/libraries/L_Proof.sol/library.L_Proof.html">L_Proof</a></li><li class="chapter-item "><a href="src/libraries/L_Proof.sol/library.L_ProofKeyLibrary.html">L_ProofKeyLibrary</a></li><li class="chapter-item "><a href="src/libraries/L_Proof.sol/library.L_ProofIdLibrary.html">L_ProofIdLibrary</a></li><li class="chapter-item "><a href="src/libraries/L_TTSTokenConfig.sol/library.L_TTSTokenConfigLibrary.html">L_TTSTokenConfigLibrary</a></li><li class="chapter-item "><a href="src/libraries/L_TTSwapUINT256.sol/library.L_TTSwapUINT256Library.html">L_TTSwapUINT256Library</a></li><li class="chapter-item "><a href="src/libraries/L_TTSwapUINT256.sol/function.toTTSwapUINT256.html">toTTSwapUINT256</a></li><li class="chapter-item "><a href="src/libraries/L_TTSwapUINT256.sol/function.addsub.html">addsub</a></li><li class="chapter-item "><a href="src/libraries/L_TTSwapUINT256.sol/function.toInt128.html">toInt128</a></li><li class="chapter-item "><a href="src/libraries/L_TTSwapUINT256.sol/function.mulDiv.html">mulDiv</a></li><li class="chapter-item "><a href="src/libraries/L_TTSwapUINT256.sol/function.lowerprice.html">lowerprice</a></li><li class="chapter-item "><a href="src/libraries/L_TTSwapUINT256.sol/function.sub.html">sub</a></li><li class="chapter-item "><a href="src/libraries/L_TTSwapUINT256.sol/function.add.html">add</a></li><li class="chapter-item "><a href="src/libraries/L_TTSwapUINT256.sol/function.subadd.html">subadd</a></li><li class="chapter-item "><a href="src/libraries/L_TakeLimitPriceOrder.sol/library.L_TakeLimitPriceOrder.html">L_TakeLimitPriceOrder</a></li><li class="chapter-item "><a href="src/libraries/L_UserConfig.sol/library.L_UserConfigLibrary.html">L_UserConfigLibrary</a></li></ol></li><li class="chapter-item "><a href="src/EIP712.sol/contract.EIP712.html">EIP712</a></li><li class="chapter-item "><a href="src/ERC20.sol/contract.ERC20.html">ERC20</a></li><li class="chapter-item "><a href="src/ERC20.sol/contract.MyToken.html">MyToken</a></li><li class="chapter-item "><a href="src/ERC20PermitTest.sol/contract.ERC20PermitTest.html">ERC20PermitTest</a></li><li class="chapter-item "><a href="src/SimplePermit.sol/abstract.PermitTransfer.html">PermitTransfer</a></li><li class="chapter-item "><a href="src/TTSwap_LimitOrder.sol/contract.TTSwap_LimitOrder.html">TTSwap_LimitOrder</a></li><li class="chapter-item "><a href="src/TTSwap_Market.sol/contract.TTSwap_Market.html">TTSwap_Market</a></li><li class="chapter-item "><a href="src/TTSwap_NFT.sol/contract.TTSwap_NFT.html">TTSwap_NFT</a></li><li class="chapter-item "><a href="src/TTSwap_Token.sol/contract.TTSwap_Token.html">TTSwap_Token</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="1-ttswap"><a class="header" href="#1-ttswap">1. TTSWAP</a></h1>
<p>TTSWAP (token-token swap) protocol is a decentralized automated market-making protocol built on the EVM blockchain. Its underlying principle is based on the transfer of market value triggered by user behavior, and it constructs a platform using value conservation trading strategies.
The whitepaper explains the design logic of the ttswap project, covering principles and implementations of goods trading, investment, and withdrawal of value goods, as well as ordinary goods investment and withdrawal, and the generation and distribution of goods transaction fees.</p>
<h1 id="2-features"><a class="header" href="#2-features">2 Features</a></h1>
<p><em><strong>Value Conservation Trading Strategy</strong></em>
The value conservation trading strategy accurately reflects the true market value of currencies and facilitates fast goods transactions.</p>
<ol>
<li>
<p>Direct Trading without Intermediaries
On this platform, any two types of items can be directly traded without the need for intermediate conversions.</p>
</li>
<li>
<p>No Slippage within Trading Threshold
Transactions below the goods trading threshold incur no slippage.</p>
</li>
<li>
<p>No Impermanent Loss for Liquidity Providers or goods Investors
Constant market value inherently prevents impermanent loss. When users withdraw their investment, they receive the original invested goods plus profits generated from providing liquidity.</p>
</li>
<li>
<p>Low Gas Fees with Simple Computational Logic
The logic behind the constant value trading model is simple, resulting in low computational load and gas consumption.</p>
</li>
<li>
<p>Fee Distribution Based on Roles for Everyone
Fees are distributed based on roles, allowing anyone to become a goods investor (liquidity provider), goods seller, gater, referrer, user, or platform role, sharing in the platform's growth earnings.</p>
</li>
<li>
<p>Support Native ETH Exchange and Invest
anyone can you native ETH without wrap to swap, invest easily.</p>
</li>
<li>
<p>Support customize goods' trigger
the trigger can be trigge when the customer's swap,invest,divest.</p>
</li>
<li>
<p>Support customer restaking TTS token
when customer invest good, the protocol will auto restake tts token for customer.</p>
</li>
<li>
<p>Community-Driven Developement and Innovation
ttswap emphasizes a community-driven approach to development and innovation. Since its code release, there has been active community engagement, with many issues, pull requests, and unique feature ideas contributed by users. The protocol is designed to encourage innovation, allowing the global community to shape the future of AMMs.</p>
</li>
</ol>
<h1 id="3-contributing"><a class="header" href="#3-contributing">3. Contributing</a></h1>
<p>If you’re interested in contributing please see our <a href="./CONTRIBUTING.html">contribution guidelines</a>!</p>
<h1 id="4-whitepaper"><a class="header" href="#4-whitepaper">4. Whitepaper</a></h1>
<p>A more detailed description of ttswap Core can be found in the draft of the <a href="./docs/whitepaper_en.pdf">TTSWAP Core Whitepaper-en</a> |<a href="./docs/whitepaper_cn.pdf">TTSWAP Core Whitepaper-cn</a>.</p>
<h1 id="5-architecture"><a class="header" href="#5-architecture">5. Architecture</a></h1>
<p><code>ttswap-core</code> uses a singleton-style architecture, where all goods state is managed in the <code>MarketManager.sol</code> contract.</p>
<p>the contract devide four part:</p>
<p>Part 1: the action relate to good'initial ,goods investing (stake or add liquidity),goods disinvestint (unstake or remove liquidity),goods swaping , or disinvesting proof ( burn stake proof or liquidity position )  are defined in marketmanager.sol.</p>
<p>Part 2: the action relate goods config , collect fee of goods , good's attribute defined in goodmanage.sol.</p>
<p>Part 3: because proof is ERC721 standard, and it's define in proofmanage.sol</p>
<h1 id="6-repository-structure--license"><a class="header" href="#6-repository-structure--license">6. Repository Structure &amp;&amp; License</a></h1>
<p>All contracts are held within the <code>ttswap-core/Contracts</code> folder.</p>
<p>Note  but all foundry tests are in the <code>ttswap-core/test</code> folder.</p>
<pre><code class="language-markdown">Contract
├── TTSwap_Market.sol(BUSL-1.1)  
├── TTSwap_NFT.sol(BUSL-1.1)  
├── TTSwap_Token.sol(BUSL-1.1)
├── TTSwap_MainTrigger.sol(BUSL-1.1)  
├── interfaces  
│   ├── I_TTSwap_Market.sol(MIT)  
│   ├── I_TTSwap_Token.sol(MIT)  
│   ├── I_TTSwap_NFT.sol(MIT)  
│   ├── I_TTSwap_MainTrigger.sol(MIT)  
│   └── I_TTSwap_APP.sol(MIT)   
└── libraries      
   ├── L_Good.sol(BUSL-1.1)    
   ├── L_GoodConfig.sol(MIT)     
   ├── L_MarketConfig.sol(MIT)    
   ├── L_Proof.sol(BUSL-1.1)   
   ├── L_TTSwapUINT256.sol (MIT)     
   ├── L_Currency.sol (MIT)       
   ├── L_Struct.sol (MIT)     
   ├── L_Lock.sol (MIT)     
   └── L_TTSTokenConfig.sol(MIT)    
docs
├── ebook
├── whitepaper-cn
│   └──whitepaper-cn.pdf(BUSL-1.1)
└── whitepaper-en
    └──whitepaper-en.pdf(BUSL-1.1)
tests

</code></pre>
<p>The primary license for ttswap-core is the Business Source License 1.1 (<code>BUSL-1.1</code>), see <a href="https://github.com/tt-swap/ttswap-core/blob/main/LICENSE">LICENSE</a>.</p>
<h1 id="7-everyone-can-be-gater"><a class="header" href="#7-everyone-can-be-gater">7. Everyone Can be Gater</a></h1>
<p>To utilize the contracts and deploy to a local testnet, you can install the code in your repo with forge:</p>
<pre><code class="language-markdown">forge install https://github.com/tt-swap/ttswap-core
</code></pre>
<p>To integrate with the contracts, the interfaces are available to use:</p>
<pre><code class="language-solidity">
import {I_TTSwap_Market} from 'ttswap-core/contracts/interfaces/I_TTSwap_Market.sol';

contract MyPortal  {
    I_TTSwap_Market market;
    address IamGater

    function doThing () {
        market.buyGood(...);
        market.buyGoodForPay(...);
        market.initGood(...);
        market.investGood(...);
        market.disinvestProof(....,IamGater,referal);
        market.collectProof(....,IamGater,referal);
        ....
    }
}
</code></pre>
<h1 id="8-every-goodsowner-can-design-a-good-trigger"><a class="header" href="#8-every-goodsowner-can-design-a-good-trigger">8. Every goods'owner can design a good trigger</a></h1>
<h2 id="81-design-the-contract"><a class="header" href="#81-design-the-contract">8.1. Design the contract</a></h2>
<pre><code class="language-solidity">import {I_TTSwap_APP} from 'ttswap-core/contracts/interfaces/I_TTSwap_APP.sol';

contract MygoodTrigger is  I_TTSwap_APP {
    function swaptake(
        uint256 opgood,
        uint256 trade,
        uint256 currentstate,
        uint256 opstate,
        address recipent
    ) external override returns (bool) {}

    function swapmake(
        uint256 opgood,
        uint256 trade,
        uint256 currentstate,
        uint256 opstate,
        address recipent
    ) external override returns (bool) {}

    function invest(
        uint256 investquanity,
        uint256 currentstate,
        address recipent
    ) external override returns (bool) {}

    function divest(
        uint256 divestquanity,
        uint256 currentstate,
        address recipent
    ) external override returns (bool) {}
}
</code></pre>
<h2 id="82-update-good-config-and-add-trigger-to-good"><a class="header" href="#82-update-good-config-and-add-trigger-to-good">8.2. Update good config and add trigger to good</a></h2>
<p>go to the profile page in the website , update the goodconfig and add the triger to the goods;</p>
<h1 id="9-user-deploy-local-instruction-only-can-be-for-study"><a class="header" href="#9-user-deploy-local-instruction-only-can-be-for-study">9. User deploy local instruction only can be for study</a></h1>
<p>step 1:instrall forge<br />
step 2:forge install OpenZeppelin/openzeppelin-contracts@v4.9.6<br />
step 3:forge install marktoda/forge-gas-snapshot</p>
<h1 id="10-socials--contract"><a class="header" href="#10-socials--contract">10. Socials / Contract</a></h1>
<p>Twitter:<a href="https://x.com/ttswap_exchange">ttswap_exchange</a><br />
Telegram:<a href="https://t.me/ttswap01">@ttswap01</a><br />
Email:<a href="mailto:ttswap.exchange@gmail.com">ttswap.exchange@gmail.com</a><br />
Discord:<a href="https://discord.gg/5PhXn9DR">ttswap</a><br />
Website:<a href="http://www.ttswap.io">ttswap.io</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents"><a class="header" href="#contents">Contents</a></h1>
<ul>
<li><a href="src/interfaces/IAllowanceTransfer.sol/interface.IAllowanceTransfer.html">IAllowanceTransfer</a></li>
<li><a href="src/interfaces/IERC721Permit.sol/interface.IERC721Permit.html">IERC721Permit</a></li>
<li><a href="src/interfaces/ISignatureTransfer.sol/interface.ISignatureTransfer.html">ISignatureTransfer</a></li>
<li><a href="src/interfaces/I_SimplePermit.sol/interface.I_SimplePermit.html">I_SimplePermit</a></li>
<li><a href="src/interfaces/I_TTSwap_LimitOrderMaker.sol/interface.I_TTSwap_LimitOrderMaker.html">I_TTSwap_LimitOrderMaker</a></li>
<li><a href="src/interfaces/I_TTSwap_LimitOrderTaker.sol/interface.I_TTSwap_LimitOrderTaker.html">I_TTSwap_LimitOrderTaker</a></li>
<li><a href="src/interfaces/I_TTSwap_LimitOrderTaker.sol/struct.S_takeGoodInputPrams.html">S_takeGoodInputPrams</a></li>
<li><a href="src/interfaces/I_TTSwap_Market.sol/interface.I_TTSwap_Market.html">I_TTSwap_Market</a></li>
<li><a href="src/interfaces/I_TTSwap_Market.sol/struct.S_ProofState.html">S_ProofState</a></li>
<li><a href="src/interfaces/I_TTSwap_Market.sol/struct.S_GoodState.html">S_GoodState</a></li>
<li><a href="src/interfaces/I_TTSwap_Market.sol/struct.S_GoodTmpState.html">S_GoodTmpState</a></li>
<li><a href="src/interfaces/I_TTSwap_Market.sol/struct.S_GoodKey.html">S_GoodKey</a></li>
<li><a href="src/interfaces/I_TTSwap_Market.sol/struct.S_ProofKey.html">S_ProofKey</a></li>
<li><a href="src/interfaces/I_TTSwap_Market.sol/struct.S_LoanProof.html">S_LoanProof</a></li>
<li><a href="src/interfaces/I_TTSwap_NFT.sol/interface.I_TTSwap_NFT.html">I_TTSwap_NFT</a></li>
<li><a href="src/interfaces/I_TTSwap_Token.sol/interface.I_TTSwap_Token.html">I_TTSwap_Token</a></li>
<li><a href="src/interfaces/I_TTSwap_Token.sol/struct.s_share.html">s_share</a></li>
<li><a href="src/interfaces/I_TTSwap_Token.sol/struct.s_chain.html">s_chain</a></li>
<li><a href="src/interfaces/I_TTSwap_Token.sol/struct.s_proof.html">s_proof</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iallowancetransfer"><a class="header" href="#iallowancetransfer">IAllowanceTransfer</a></h1>
<p>Handles ERC20 token permissions through signature based allowance setting and ERC20 token transfers by checking allowed amounts</p>
<p><em>Requires user's token approval on the Permit2 contract</em></p>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="allowance"><a class="header" href="#allowance">allowance</a></h3>
<p>A mapping from owner address to token address to spender address to PackedAllowance struct, which contains details and conditions of the approval.</p>
<p>The mapping is indexed in the above order see: allowance[ownerAddress][tokenAddress][spenderAddress]</p>
<p><em>The packed slot holds the allowed amount, expiration at which the allowed amount is no longer valid, and current nonce thats updated on any signature based approvals.</em></p>
<pre><code class="language-solidity">function allowance(address, address, address) external view returns (uint160, uint48, uint48);
</code></pre>
<h3 id="approve"><a class="header" href="#approve">approve</a></h3>
<p>Approves the spender to use up to amount of the specified token up until the expiration</p>
<p><em>The packed allowance also holds a nonce, which will stay unchanged in approve</em></p>
<p><em>Setting amount to type(uint160).max sets an unlimited approval</em></p>
<pre><code class="language-solidity">function approve(address token, address spender, uint160 amount, uint48 expiration) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>token</code></td><td><code>address</code></td><td>The token to approve</td></tr>
<tr><td><code>spender</code></td><td><code>address</code></td><td>The spender address to approve</td></tr>
<tr><td><code>amount</code></td><td><code>uint160</code></td><td>The approved amount of the token</td></tr>
<tr><td><code>expiration</code></td><td><code>uint48</code></td><td>The timestamp at which the approval is no longer valid</td></tr>
</tbody></table>
</div>
<h3 id="permit"><a class="header" href="#permit">permit</a></h3>
<p>Permit a spender to a given amount of the owners token via the owner's EIP-712 signature</p>
<p><em>May fail if the owner's nonce was invalidated in-flight by invalidateNonce</em></p>
<pre><code class="language-solidity">function permit(address owner, PermitSingle memory permitSingle, bytes calldata signature) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner</code></td><td><code>address</code></td><td>The owner of the tokens being approved</td></tr>
<tr><td><code>permitSingle</code></td><td><code>PermitSingle</code></td><td>Data signed over by the owner specifying the terms of approval</td></tr>
<tr><td><code>signature</code></td><td><code>bytes</code></td><td>The owner's signature over the permit data</td></tr>
</tbody></table>
</div>
<h3 id="permit-1"><a class="header" href="#permit-1">permit</a></h3>
<p>Permit a spender to the signed amounts of the owners tokens via the owner's EIP-712 signature</p>
<p><em>May fail if the owner's nonce was invalidated in-flight by invalidateNonce</em></p>
<pre><code class="language-solidity">function permit(address owner, PermitBatch memory permitBatch, bytes calldata signature) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>owner</code></td><td><code>address</code></td><td>The owner of the tokens being approved</td></tr>
<tr><td><code>permitBatch</code></td><td><code>PermitBatch</code></td><td>Data signed over by the owner specifying the terms of approval</td></tr>
<tr><td><code>signature</code></td><td><code>bytes</code></td><td>The owner's signature over the permit data</td></tr>
</tbody></table>
</div>
<h3 id="transferfrom"><a class="header" href="#transferfrom">transferFrom</a></h3>
<p>Transfer approved tokens from one address to another</p>
<p><em>Requires the from address to have approved at least the desired amount
of tokens to msg.sender.</em></p>
<pre><code class="language-solidity">function transferFrom(address from, address to, uint160 amount, address token) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>from</code></td><td><code>address</code></td><td>The address to transfer from</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>The address of the recipient</td></tr>
<tr><td><code>amount</code></td><td><code>uint160</code></td><td>The amount of the token to transfer</td></tr>
<tr><td><code>token</code></td><td><code>address</code></td><td>The token address to transfer</td></tr>
</tbody></table>
</div>
<h3 id="transferfrom-1"><a class="header" href="#transferfrom-1">transferFrom</a></h3>
<p>Transfer approved tokens in a batch</p>
<p><em>Requires the from addresses to have approved at least the desired amount
of tokens to msg.sender.</em></p>
<pre><code class="language-solidity">function transferFrom(AllowanceTransferDetails[] calldata transferDetails) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>transferDetails</code></td><td><code>AllowanceTransferDetails[]</code></td><td>Array of owners, recipients, amounts, and tokens for the transfers</td></tr>
</tbody></table>
</div>
<h3 id="lockdown"><a class="header" href="#lockdown">lockdown</a></h3>
<p>Enables performing a "lockdown" of the sender's Permit2 identity
by batch revoking approvals</p>
<pre><code class="language-solidity">function lockdown(TokenSpenderPair[] calldata approvals) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>approvals</code></td><td><code>TokenSpenderPair[]</code></td><td>Array of approvals to revoke.</td></tr>
</tbody></table>
</div>
<h3 id="invalidatenonces"><a class="header" href="#invalidatenonces">invalidateNonces</a></h3>
<p>Invalidate nonces for a given (token, spender) pair</p>
<p><em>Can't invalidate more than 2**16 nonces per transaction.</em></p>
<pre><code class="language-solidity">function invalidateNonces(address token, address spender, uint48 newNonce) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>token</code></td><td><code>address</code></td><td>The token to invalidate nonces for</td></tr>
<tr><td><code>spender</code></td><td><code>address</code></td><td>The spender to invalidate nonces for</td></tr>
<tr><td><code>newNonce</code></td><td><code>uint48</code></td><td>The new nonce to set. Invalidates all nonces less than it.</td></tr>
</tbody></table>
</div>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<h3 id="nonceinvalidation"><a class="header" href="#nonceinvalidation">NonceInvalidation</a></h3>
<p>Emits an event when the owner successfully invalidates an ordered nonce.</p>
<pre><code class="language-solidity">event NonceInvalidation(
    address indexed owner, address indexed token, address indexed spender, uint48 newNonce, uint48 oldNonce
);
</code></pre>
<h3 id="approval"><a class="header" href="#approval">Approval</a></h3>
<p>Emits an event when the owner successfully sets permissions on a token for the spender.</p>
<pre><code class="language-solidity">event Approval(
    address indexed owner, address indexed token, address indexed spender, uint160 amount, uint48 expiration
);
</code></pre>
<h3 id="permit-2"><a class="header" href="#permit-2">Permit</a></h3>
<p>Emits an event when the owner successfully sets permissions using a permit signature on a token for the spender.</p>
<pre><code class="language-solidity">event Permit(
    address indexed owner,
    address indexed token,
    address indexed spender,
    uint160 amount,
    uint48 expiration,
    uint48 nonce
);
</code></pre>
<h3 id="lockdown-1"><a class="header" href="#lockdown-1">Lockdown</a></h3>
<p>Emits an event when the owner sets the allowance back to 0 with the lockdown function.</p>
<pre><code class="language-solidity">event Lockdown(address indexed owner, address token, address spender);
</code></pre>
<h2 id="errors"><a class="header" href="#errors">Errors</a></h2>
<h3 id="allowanceexpired"><a class="header" href="#allowanceexpired">AllowanceExpired</a></h3>
<p>Thrown when an allowance on a token has expired.</p>
<pre><code class="language-solidity">error AllowanceExpired(uint256 deadline);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>deadline</code></td><td><code>uint256</code></td><td>The timestamp at which the allowed amount is no longer valid</td></tr>
</tbody></table>
</div>
<h3 id="insufficientallowance"><a class="header" href="#insufficientallowance">InsufficientAllowance</a></h3>
<p>Thrown when an allowance on a token has been depleted.</p>
<pre><code class="language-solidity">error InsufficientAllowance(uint256 amount);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The maximum amount allowed</td></tr>
</tbody></table>
</div>
<h3 id="excessiveinvalidation"><a class="header" href="#excessiveinvalidation">ExcessiveInvalidation</a></h3>
<p>Thrown when too many nonces are invalidated.</p>
<pre><code class="language-solidity">error ExcessiveInvalidation();
</code></pre>
<h2 id="structs"><a class="header" href="#structs">Structs</a></h2>
<h3 id="permitdetails"><a class="header" href="#permitdetails">PermitDetails</a></h3>
<p>The permit data for a token</p>
<pre><code class="language-solidity">struct PermitDetails {
    address token;
    uint160 amount;
    uint48 expiration;
    uint48 nonce;
}
</code></pre>
<h3 id="permitsingle"><a class="header" href="#permitsingle">PermitSingle</a></h3>
<p>The permit message signed for a single token allownce</p>
<pre><code class="language-solidity">struct PermitSingle {
    PermitDetails details;
    address spender;
    uint256 sigDeadline;
}
</code></pre>
<h3 id="permitbatch"><a class="header" href="#permitbatch">PermitBatch</a></h3>
<p>The permit message signed for multiple token allowances</p>
<pre><code class="language-solidity">struct PermitBatch {
    PermitDetails[] details;
    address spender;
    uint256 sigDeadline;
}
</code></pre>
<h3 id="packedallowance"><a class="header" href="#packedallowance">PackedAllowance</a></h3>
<p>The saved permissions</p>
<p><em>This info is saved per owner, per token, per spender and all signed over in the permit message</em></p>
<p><em>Setting amount to type(uint160).max sets an unlimited approval</em></p>
<pre><code class="language-solidity">struct PackedAllowance {
    uint160 amount;
    uint48 expiration;
    uint48 nonce;
}
</code></pre>
<h3 id="tokenspenderpair"><a class="header" href="#tokenspenderpair">TokenSpenderPair</a></h3>
<p>A token spender pair.</p>
<pre><code class="language-solidity">struct TokenSpenderPair {
    address token;
    address spender;
}
</code></pre>
<h3 id="allowancetransferdetails"><a class="header" href="#allowancetransferdetails">AllowanceTransferDetails</a></h3>
<p>Details for a token transfer.</p>
<pre><code class="language-solidity">struct AllowanceTransferDetails {
    address from;
    address to;
    uint160 amount;
    address token;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ierc721permit"><a class="header" href="#ierc721permit">IERC721Permit</a></h1>
<p><strong>Inherits:</strong>
IERC165</p>
<p><em>Interface for token permits for ERC-721</em></p>
<h2 id="functions-1"><a class="header" href="#functions-1">Functions</a></h2>
<h3 id="permit-3"><a class="header" href="#permit-3">permit</a></h3>
<p>ERC165 bytes to add to interface array - set in parent contract
_INTERFACE_ID_ERC4494 = 0x5604e225</p>
<p>Function to approve by way of owner signature</p>
<pre><code class="language-solidity">function permit(address spender, uint256 tokenId, uint256 deadline, bytes memory sig) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>spender</code></td><td><code>address</code></td><td>the address to approve</td></tr>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>the index of the NFT to approve the spender on</td></tr>
<tr><td><code>deadline</code></td><td><code>uint256</code></td><td>a timestamp expiry for the permit</td></tr>
<tr><td><code>sig</code></td><td><code>bytes</code></td><td>a traditional or EIP-2098 signature</td></tr>
</tbody></table>
</div>
<h3 id="nonces"><a class="header" href="#nonces">nonces</a></h3>
<p>Returns the nonce of an NFT - useful for creating permits</p>
<pre><code class="language-solidity">function nonces(uint256 tokenId) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>the index of the NFT to get the nonce of</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>the uint256 representation of the nonce</td></tr>
</tbody></table>
</div>
<h3 id="domain_separator"><a class="header" href="#domain_separator">DOMAIN_SEPARATOR</a></h3>
<p>Returns the domain separator used in the encoding of the signature for permits, as defined by EIP-712</p>
<pre><code class="language-solidity">function DOMAIN_SEPARATOR() external view returns (bytes32);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32</code></td><td>the bytes32 domain separator</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="isignaturetransfer"><a class="header" href="#isignaturetransfer">ISignatureTransfer</a></h1>
<p>Handles ERC20 token transfers through signature based actions</p>
<p><em>Requires user's token approval on the Permit2 contract</em></p>
<h2 id="functions-2"><a class="header" href="#functions-2">Functions</a></h2>
<h3 id="noncebitmap"><a class="header" href="#noncebitmap">nonceBitmap</a></h3>
<p>A map from token owner address and a caller specified word index to a bitmap. Used to set bits in the bitmap to prevent against signature replay protection</p>
<p><em>Uses unordered nonces so that permit messages do not need to be spent in a certain order</em></p>
<p><em>The mapping is indexed first by the token owner, then by an index specified in the nonce</em></p>
<p><em>It returns a uint256 bitmap</em></p>
<p><em>The index, or wordPosition is capped at type(uint248).max</em></p>
<pre><code class="language-solidity">function nonceBitmap(address, uint256) external view returns (uint256);
</code></pre>
<h3 id="permittransferfrom"><a class="header" href="#permittransferfrom">permitTransferFrom</a></h3>
<p>Transfers a token using a signed permit message</p>
<p><em>Reverts if the requested amount is greater than the permitted signed amount</em></p>
<pre><code class="language-solidity">function permitTransferFrom(
    PermitTransferFrom memory permit,
    SignatureTransferDetails calldata transferDetails,
    address owner,
    bytes calldata signature
) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>permit</code></td><td><code>PermitTransferFrom</code></td><td>The permit data signed over by the owner</td></tr>
<tr><td><code>transferDetails</code></td><td><code>SignatureTransferDetails</code></td><td>The spender's requested transfer details for the permitted token</td></tr>
<tr><td><code>owner</code></td><td><code>address</code></td><td>The owner of the tokens to transfer</td></tr>
<tr><td><code>signature</code></td><td><code>bytes</code></td><td>The signature to verify</td></tr>
</tbody></table>
</div>
<h3 id="permitwitnesstransferfrom"><a class="header" href="#permitwitnesstransferfrom">permitWitnessTransferFrom</a></h3>
<p>Transfers a token using a signed permit message</p>
<p>Includes extra data provided by the caller to verify signature over</p>
<p><em>The witness type string must follow EIP712 ordering of nested structs and must include the TokenPermissions type definition</em></p>
<p><em>Reverts if the requested amount is greater than the permitted signed amount</em></p>
<pre><code class="language-solidity">function permitWitnessTransferFrom(
    PermitTransferFrom memory permit,
    SignatureTransferDetails calldata transferDetails,
    address owner,
    bytes32 witness,
    string calldata witnessTypeString,
    bytes calldata signature
) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>permit</code></td><td><code>PermitTransferFrom</code></td><td>The permit data signed over by the owner</td></tr>
<tr><td><code>transferDetails</code></td><td><code>SignatureTransferDetails</code></td><td>The spender's requested transfer details for the permitted token</td></tr>
<tr><td><code>owner</code></td><td><code>address</code></td><td>The owner of the tokens to transfer</td></tr>
<tr><td><code>witness</code></td><td><code>bytes32</code></td><td>Extra data to include when checking the user signature</td></tr>
<tr><td><code>witnessTypeString</code></td><td><code>string</code></td><td>The EIP-712 type definition for remaining string stub of the typehash</td></tr>
<tr><td><code>signature</code></td><td><code>bytes</code></td><td>The signature to verify</td></tr>
</tbody></table>
</div>
<h3 id="permittransferfrom-1"><a class="header" href="#permittransferfrom-1">permitTransferFrom</a></h3>
<p>Transfers multiple tokens using a signed permit message</p>
<pre><code class="language-solidity">function permitTransferFrom(
    PermitBatchTransferFrom memory permit,
    SignatureTransferDetails[] calldata transferDetails,
    address owner,
    bytes calldata signature
) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>permit</code></td><td><code>PermitBatchTransferFrom</code></td><td>The permit data signed over by the owner</td></tr>
<tr><td><code>transferDetails</code></td><td><code>SignatureTransferDetails[]</code></td><td>Specifies the recipient and requested amount for the token transfer</td></tr>
<tr><td><code>owner</code></td><td><code>address</code></td><td>The owner of the tokens to transfer</td></tr>
<tr><td><code>signature</code></td><td><code>bytes</code></td><td>The signature to verify</td></tr>
</tbody></table>
</div>
<h3 id="permitwitnesstransferfrom-1"><a class="header" href="#permitwitnesstransferfrom-1">permitWitnessTransferFrom</a></h3>
<p>Transfers multiple tokens using a signed permit message</p>
<p>Includes extra data provided by the caller to verify signature over</p>
<p><em>The witness type string must follow EIP712 ordering of nested structs and must include the TokenPermissions type definition</em></p>
<pre><code class="language-solidity">function permitWitnessTransferFrom(
    PermitBatchTransferFrom memory permit,
    SignatureTransferDetails[] calldata transferDetails,
    address owner,
    bytes32 witness,
    string calldata witnessTypeString,
    bytes calldata signature
) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>permit</code></td><td><code>PermitBatchTransferFrom</code></td><td>The permit data signed over by the owner</td></tr>
<tr><td><code>transferDetails</code></td><td><code>SignatureTransferDetails[]</code></td><td>Specifies the recipient and requested amount for the token transfer</td></tr>
<tr><td><code>owner</code></td><td><code>address</code></td><td>The owner of the tokens to transfer</td></tr>
<tr><td><code>witness</code></td><td><code>bytes32</code></td><td>Extra data to include when checking the user signature</td></tr>
<tr><td><code>witnessTypeString</code></td><td><code>string</code></td><td>The EIP-712 type definition for remaining string stub of the typehash</td></tr>
<tr><td><code>signature</code></td><td><code>bytes</code></td><td>The signature to verify</td></tr>
</tbody></table>
</div>
<h3 id="invalidateunorderednonces"><a class="header" href="#invalidateunorderednonces">invalidateUnorderedNonces</a></h3>
<p>Invalidates the bits specified in mask for the bitmap at the word position</p>
<p><em>The wordPos is maxed at type(uint248).max</em></p>
<pre><code class="language-solidity">function invalidateUnorderedNonces(uint256 wordPos, uint256 mask) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>wordPos</code></td><td><code>uint256</code></td><td>A number to index the nonceBitmap at</td></tr>
<tr><td><code>mask</code></td><td><code>uint256</code></td><td>A bitmap masked against msg.sender's current bitmap at the word position</td></tr>
</tbody></table>
</div>
<h2 id="events-1"><a class="header" href="#events-1">Events</a></h2>
<h3 id="unorderednonceinvalidation"><a class="header" href="#unorderednonceinvalidation">UnorderedNonceInvalidation</a></h3>
<p>Emits an event when the owner successfully invalidates an unordered nonce.</p>
<pre><code class="language-solidity">event UnorderedNonceInvalidation(address indexed owner, uint256 word, uint256 mask);
</code></pre>
<h2 id="errors-1"><a class="header" href="#errors-1">Errors</a></h2>
<h3 id="invalidamount"><a class="header" href="#invalidamount">InvalidAmount</a></h3>
<p>Thrown when the requested amount for a transfer is larger than the permissioned amount</p>
<pre><code class="language-solidity">error InvalidAmount(uint256 maxAmount);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>maxAmount</code></td><td><code>uint256</code></td><td>The maximum amount a spender can request to transfer</td></tr>
</tbody></table>
</div>
<h3 id="lengthmismatch"><a class="header" href="#lengthmismatch">LengthMismatch</a></h3>
<p>Thrown when the number of tokens permissioned to a spender does not match the number of tokens being transferred</p>
<p><em>If the spender does not need to transfer the number of tokens permitted, the spender can request amount 0 to be transferred</em></p>
<pre><code class="language-solidity">error LengthMismatch();
</code></pre>
<h2 id="structs-1"><a class="header" href="#structs-1">Structs</a></h2>
<h3 id="tokenpermissions"><a class="header" href="#tokenpermissions">TokenPermissions</a></h3>
<p>The token and amount details for a transfer signed in the permit transfer signature</p>
<pre><code class="language-solidity">struct TokenPermissions {
    address token;
    uint256 amount;
}
</code></pre>
<h3 id="permittransferfrom-2"><a class="header" href="#permittransferfrom-2">PermitTransferFrom</a></h3>
<p>The signed permit message for a single token transfer</p>
<pre><code class="language-solidity">struct PermitTransferFrom {
    TokenPermissions permitted;
    uint256 nonce;
    uint256 deadline;
}
</code></pre>
<h3 id="signaturetransferdetails"><a class="header" href="#signaturetransferdetails">SignatureTransferDetails</a></h3>
<p>Specifies the recipient address and amount for batched transfers.</p>
<p><em>Recipients and amounts correspond to the index of the signed token permissions array.</em></p>
<p><em>Reverts if the requested amount is greater than the permitted signed amount.</em></p>
<pre><code class="language-solidity">struct SignatureTransferDetails {
    address to;
    uint256 requestedAmount;
}
</code></pre>
<h3 id="permitbatchtransferfrom"><a class="header" href="#permitbatchtransferfrom">PermitBatchTransferFrom</a></h3>
<p>Used to reconstruct the signed permit message for multiple token transfers</p>
<p><em>Do not need to pass in spender address as it is required that it is msg.sender</em></p>
<p><em>Note that a user still signs over a spender address</em></p>
<pre><code class="language-solidity">struct PermitBatchTransferFrom {
    TokenPermissions[] permitted;
    uint256 nonce;
    uint256 deadline;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="i_simplepermit"><a class="header" href="#i_simplepermit">I_SimplePermit</a></h1>
<h2 id="functions-3"><a class="header" href="#functions-3">Functions</a></h2>
<h3 id="transferfrom-2"><a class="header" href="#transferfrom-2">transferFrom</a></h3>
<pre><code class="language-solidity">function transferFrom(address token, address owner, address spender, uint128 amount) external;
</code></pre>
<h3 id="permitallancetransferfrom"><a class="header" href="#permitallancetransferfrom">PermitAllanceTransferFrom</a></h3>
<pre><code class="language-solidity">function PermitAllanceTransferFrom(address token, address owner, address spender, uint128 amount, bytes memory data)
    external;
</code></pre>
<h3 id="permittransferfrom-3"><a class="header" href="#permittransferfrom-3">PermitTransferFrom</a></h3>
<pre><code class="language-solidity">function PermitTransferFrom(address token, address owner, address spender, uint128 amount, bytes memory detail)
    external;
</code></pre>
<h2 id="structs-2"><a class="header" href="#structs-2">Structs</a></h2>
<h3 id="s_packedallowance"><a class="header" href="#s_packedallowance">S_PackedAllowance</a></h3>
<pre><code class="language-solidity">struct S_PackedAllowance {
    uint128 amount;
    uint48 expiration;
    uint48 deadline;
    uint48 nonce;
}
</code></pre>
<h3 id="s_permit"><a class="header" href="#s_permit">S_Permit</a></h3>
<pre><code class="language-solidity">struct S_Permit {
    address owner;
    address spender;
    uint256 value;
    uint256 deadline;
    uint8 v;
    bytes32 r;
    bytes32 s;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="i_ttswap_limitordermaker"><a class="header" href="#i_ttswap_limitordermaker">I_TTSwap_LimitOrderMaker</a></h1>
<h2 id="functions-4"><a class="header" href="#functions-4">Functions</a></h2>
<h3 id="addlimitorder"><a class="header" href="#addlimitorder">addLimitOrder</a></h3>
<p>User add limitorder</p>
<pre><code class="language-solidity">function addLimitOrder(S_orderDetails[] memory _orders) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_orders</code></td><td><code>S_orderDetails[]</code></td><td>order's detail</td></tr>
</tbody></table>
</div>
<h3 id="updatelimitorder"><a class="header" href="#updatelimitorder">updateLimitOrder</a></h3>
<p>owner update his limit order</p>
<pre><code class="language-solidity">function updateLimitOrder(uint256 _orderid, S_orderDetails memory _order) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_orderid</code></td><td><code>uint256</code></td><td>order'sid</td></tr>
<tr><td><code>_order</code></td><td><code>S_orderDetails</code></td><td>order's detail</td></tr>
</tbody></table>
</div>
<h3 id="removelimitorder"><a class="header" href="#removelimitorder">removeLimitOrder</a></h3>
<p>owner remove his limit order</p>
<pre><code class="language-solidity">function removeLimitOrder(uint256 _orderid) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_orderid</code></td><td><code>uint256</code></td><td>order'sid</td></tr>
</tbody></table>
</div>
<h3 id="takelimitorderchips"><a class="header" href="#takelimitorderchips">takeLimitOrderChips</a></h3>
<pre><code class="language-solidity">function takeLimitOrderChips(S_OrderChip[] memory _orderChips) external;
</code></pre>
<h3 id="takelimitordernormal"><a class="header" href="#takelimitordernormal">takeLimitOrderNormal</a></h3>
<p>normally take the limit order</p>
<pre><code class="language-solidity">function takeLimitOrderNormal(S_TakeParams[] memory _orderids) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_orderids</code></td><td><code>S_TakeParams[]</code></td><td>orders' id</td></tr>
</tbody></table>
</div>
<h3 id="takelimitorderamm"><a class="header" href="#takelimitorderamm">takeLimitOrderAMM</a></h3>
<p>amm take the limit order</p>
<pre><code class="language-solidity">function takeLimitOrderAMM(
    uint256 _orderid,
    uint96 _tolerance,
    I_TTSwap_LimitOrderTaker _takecontract,
    address _takecaller
) external returns (bool _isSuccess);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_orderid</code></td><td><code>uint256</code></td><td>order's id</td></tr>
<tr><td><code>_tolerance</code></td><td><code>uint96</code></td><td>the caller's tolerance config</td></tr>
<tr><td><code>_takecontract</code></td><td><code>I_TTSwap_LimitOrderTaker</code></td><td>the amm's address</td></tr>
<tr><td><code>_takecaller</code></td><td><code>address</code></td><td>the caller address</td></tr>
</tbody></table>
</div>
<h3 id="takebatchlimitordersamm"><a class="header" href="#takebatchlimitordersamm">takeBatchLimitOrdersAMM</a></h3>
<p>amm take the limit order</p>
<pre><code class="language-solidity">function takeBatchLimitOrdersAMM(
    uint256[] memory _orderids,
    uint96 _tolerance,
    I_TTSwap_LimitOrderTaker _takecontract,
    address _takecaller,
    bool _isall
) external returns (bool[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_orderids</code></td><td><code>uint256[]</code></td><td>orders' id</td></tr>
<tr><td><code>_tolerance</code></td><td><code>uint96</code></td><td>the caller's tolerance config</td></tr>
<tr><td><code>_takecontract</code></td><td><code>I_TTSwap_LimitOrderTaker</code></td><td>the amm's address</td></tr>
<tr><td><code>_takecaller</code></td><td><code>address</code></td><td>the caller address</td></tr>
<tr><td><code>_isall</code></td><td><code>bool</code></td><td>true:must all be deal</td></tr>
</tbody></table>
</div>
<h3 id="querylimitorder"><a class="header" href="#querylimitorder">queryLimitOrder</a></h3>
<p>get limit order's infor</p>
<pre><code class="language-solidity">function queryLimitOrder(uint256[] memory _ordersids) external view returns (S_orderDetails[] memory _orderdetail);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_ordersids</code></td><td><code>uint256[]</code></td><td>orders' id</td></tr>
</tbody></table>
</div>
<h2 id="events-2"><a class="header" href="#events-2">Events</a></h2>
<h3 id="e_addlimitorder"><a class="header" href="#e_addlimitorder">e_addLimitOrder</a></h3>
<p>Emitted when User add limit order</p>
<pre><code class="language-solidity">event e_addLimitOrder(uint256 _orderid, address _sender, address _fromerc20, address _toerc20, uint256 _amount);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_orderid</code></td><td><code>uint256</code></td><td>the limit order id</td></tr>
<tr><td><code>_sender</code></td><td><code>address</code></td><td>the limit's owner</td></tr>
<tr><td><code>_fromerc20</code></td><td><code>address</code></td><td>from erc20</td></tr>
<tr><td><code>_toerc20</code></td><td><code>address</code></td><td>to achive the erc20 token</td></tr>
<tr><td><code>_amount</code></td><td><code>uint256</code></td><td>fitst 128bit is the from amount,last 128 bit is the to amount</td></tr>
</tbody></table>
</div>
<h3 id="e_setmaxfreeremain"><a class="header" href="#e_setmaxfreeremain">e_setmaxfreeremain</a></h3>
<p>Emitted when marketor set maxfreeremaintimestamp</p>
<pre><code class="language-solidity">event e_setmaxfreeremain(uint96 _maxfreeremain);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_maxfreeremain</code></td><td><code>uint96</code></td><td>the max free remain timestamp</td></tr>
</tbody></table>
</div>
<h3 id="e_changemarketcreator"><a class="header" href="#e_changemarketcreator">e_changemarketcreator</a></h3>
<p>Emitted when marketor change marketcreator</p>
<pre><code class="language-solidity">event e_changemarketcreator(address _newmarketcreator);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_newmarketcreator</code></td><td><code>address</code></td><td>the new marketcreator</td></tr>
</tbody></table>
</div>
<h3 id="e_addauths"><a class="header" href="#e_addauths">e_addauths</a></h3>
<p>Emitted when marketor grant</p>
<pre><code class="language-solidity">event e_addauths(address _marketor, uint256 _auths);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_marketor</code></td><td><code>address</code></td><td>who will be seted to marketor</td></tr>
<tr><td><code>_auths</code></td><td><code>uint256</code></td><td>the priv which be grant</td></tr>
</tbody></table>
</div>
<h3 id="e_removeauths"><a class="header" href="#e_removeauths">e_removeauths</a></h3>
<p>Emitted when marketor be remove</p>
<pre><code class="language-solidity">event e_removeauths(address _marketor);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_marketor</code></td><td><code>address</code></td><td>who will be remove from marketor</td></tr>
</tbody></table>
</div>
<h3 id="e_takeorder"><a class="header" href="#e_takeorder">e_takeOrder</a></h3>
<p>Emitted when limitorder is dealed</p>
<pre><code class="language-solidity">event e_takeOrder(uint256 _orderid);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_orderid</code></td><td><code>uint256</code></td><td>the id of the limit order</td></tr>
</tbody></table>
</div>
<h3 id="e_takeorderchips"><a class="header" href="#e_takeorderchips">e_takeOrderChips</a></h3>
<p>Emitted when limitorder is dealed</p>
<pre><code class="language-solidity">event e_takeOrderChips(uint256 _orderid, uint256 amount);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_orderid</code></td><td><code>uint256</code></td><td>the id of the limit order</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>the id of the limit order</td></tr>
</tbody></table>
</div>
<h3 id="e_cleandeadorders"><a class="header" href="#e_cleandeadorders">e_cleandeadorders</a></h3>
<p>Emitted when limitorder is removed by marketor when order unvalid over time</p>
<pre><code class="language-solidity">event e_cleandeadorders(uint256[] _orderids);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_orderids</code></td><td><code>uint256[]</code></td><td>the ids of the limit order</td></tr>
</tbody></table>
</div>
<h3 id="e_cleandeadorder"><a class="header" href="#e_cleandeadorder">e_cleandeadorder</a></h3>
<p>Emitted when limitorder is removed by marketor when order unvalid over time</p>
<pre><code class="language-solidity">event e_cleandeadorder(uint256 _orderid, uint256 _feeamount, address _reciver);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_orderid</code></td><td><code>uint256</code></td><td>the ids of the limit order</td></tr>
<tr><td><code>_feeamount</code></td><td><code>uint256</code></td><td>fee amount</td></tr>
<tr><td><code>_reciver</code></td><td><code>address</code></td><td>the recieve of fee</td></tr>
</tbody></table>
</div>
<h3 id="e_removelimitorder"><a class="header" href="#e_removelimitorder">e_removeLimitOrder</a></h3>
<p>Emitted when limitorder's  removed by it's owner</p>
<pre><code class="language-solidity">event e_removeLimitOrder(uint256 _orderid);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_orderid</code></td><td><code>uint256</code></td><td>the ids of the limit order</td></tr>
</tbody></table>
</div>
<h3 id="e_updatelimitorder"><a class="header" href="#e_updatelimitorder">e_updateLimitOrder</a></h3>
<p>Emitted when limitorder's  removed by it's owner</p>
<pre><code class="language-solidity">event e_updateLimitOrder(uint256 _orderid, address _fromerc20, address _toerc20, uint256 _amount);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_orderid</code></td><td><code>uint256</code></td><td>the ids of the limit order</td></tr>
<tr><td><code>_fromerc20</code></td><td><code>address</code></td><td>from erc20</td></tr>
<tr><td><code>_toerc20</code></td><td><code>address</code></td><td>to achive the erc20 token</td></tr>
<tr><td><code>_amount</code></td><td><code>uint256</code></td><td>fitst 128bit is the from amount,last 128 bit is the to amount</td></tr>
</tbody></table>
</div>
<h3 id="e_deploy"><a class="header" href="#e_deploy">e_deploy</a></h3>
<pre><code class="language-solidity">event e_deploy(address marketcreator, uint256 maxfreeremain, uint256);
</code></pre>
<h3 id="e_addmaxslot"><a class="header" href="#e_addmaxslot">e_addmaxslot</a></h3>
<pre><code class="language-solidity">event e_addmaxslot(uint256);
</code></pre>
<h2 id="errors-2"><a class="header" href="#errors-2">Errors</a></h2>
<h3 id="lessamounterror"><a class="header" href="#lessamounterror">lessAmountError</a></h3>
<p>Emitted actual mount under the pridicate amount</p>
<pre><code class="language-solidity">error lessAmountError(uint256 _orderid);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_orderid</code></td><td><code>uint256</code></td><td>orderid</td></tr>
</tbody></table>
</div>
<h2 id="structs-3"><a class="header" href="#structs-3">Structs</a></h2>
<h3 id="s_takeparams"><a class="header" href="#s_takeparams">S_TakeParams</a></h3>
<pre><code class="language-solidity">struct S_TakeParams {
    uint256 orderid;
    bytes transdata;
}
</code></pre>
<h3 id="s_orderdetails"><a class="header" href="#s_orderdetails">S_orderDetails</a></h3>
<pre><code class="language-solidity">struct S_orderDetails {
    uint96 timestamp;
    address sender;
    address fromerc20;
    address toerc20;
    uint256 amount;
}
</code></pre>
<h3 id="s_orderchip"><a class="header" href="#s_orderchip">S_OrderChip</a></h3>
<pre><code class="language-solidity">struct S_OrderChip {
    uint256 orderid;
    uint128 takeamount;
    bytes transdata;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="i_ttswap_limitordertaker"><a class="header" href="#i_ttswap_limitordertaker">I_TTSwap_LimitOrderTaker</a></h1>
<h2 id="functions-5"><a class="header" href="#functions-5">Functions</a></h2>
<h3 id="takelimitorder"><a class="header" href="#takelimitorder">takeLimitOrder</a></h3>
<pre><code class="language-solidity">function takeLimitOrder(S_takeGoodInputPrams memory _inputData, uint96 _tolerance, address _takecaller)
    external
    payable
    returns (bool _isSuccess);
</code></pre>
<h3 id="batchtakelimitorder"><a class="header" href="#batchtakelimitorder">batchTakelimitOrder</a></h3>
<pre><code class="language-solidity">function batchTakelimitOrder(bytes calldata _inputData, uint96 _tolerance, address _takecaller, uint8 ordernum)
    external
    payable
    returns (bool[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="s_takegoodinputprams"><a class="header" href="#s_takegoodinputprams">S_takeGoodInputPrams</a></h1>
<pre><code class="language-solidity">struct S_takeGoodInputPrams {
    address fromerc20;
    address toerc20;
    uint256 swapQuantity;
    address sender;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="i_ttswap_market"><a class="header" href="#i_ttswap_market">I_TTSwap_Market</a></h1>
<p>Defines the interface for managing market operations</p>
<h2 id="functions-6"><a class="header" href="#functions-6">Functions</a></h2>
<h3 id="proofmapping"><a class="header" href="#proofmapping">proofmapping</a></h3>
<pre><code class="language-solidity">function proofmapping(uint256) external view returns (uint256);
</code></pre>
<h3 id="userconfig"><a class="header" href="#userconfig">userConfig</a></h3>
<pre><code class="language-solidity">function userConfig(address) external view returns (uint256);
</code></pre>
<h3 id="setmarketor"><a class="header" href="#setmarketor">setMarketor</a></h3>
<pre><code class="language-solidity">function setMarketor(address _newmarketor) external;
</code></pre>
<h3 id="removemarketor"><a class="header" href="#removemarketor">removeMarketor</a></h3>
<pre><code class="language-solidity">function removeMarketor(address _user) external;
</code></pre>
<h3 id="initmetagood"><a class="header" href="#initmetagood">initMetaGood</a></h3>
<p>Initialize the first good in the market</p>
<pre><code class="language-solidity">function initMetaGood(address _erc20address, uint256 _initial, uint256 _goodconfig, bytes memory data)
    external
    payable
    returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_erc20address</code></td><td><code>address</code></td><td>The contract address of the good</td></tr>
<tr><td><code>_initial</code></td><td><code>uint256</code></td><td>Initial parameters for the good (amount0: value, amount1: quantity)</td></tr>
<tr><td><code>_goodconfig</code></td><td><code>uint256</code></td><td>Configuration of the good</td></tr>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>Configuration of the good</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Success status</td></tr>
</tbody></table>
</div>
<h3 id="initgood"><a class="header" href="#initgood">initGood</a></h3>
<p>Initialize a normal good in the market</p>
<pre><code class="language-solidity">function initGood(
    address _valuegood,
    uint256 _initial,
    address _erc20address,
    uint256 _goodConfig,
    bytes memory data1,
    bytes memory data2
) external payable returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_valuegood</code></td><td><code>address</code></td><td>The ID of the value good used to measure the normal good's value</td></tr>
<tr><td><code>_initial</code></td><td><code>uint256</code></td><td>Initial parameters (amount0: normal good quantity, amount1: value good quantity)</td></tr>
<tr><td><code>_erc20address</code></td><td><code>address</code></td><td>The contract address of the good</td></tr>
<tr><td><code>_goodConfig</code></td><td><code>uint256</code></td><td>Configuration of the good</td></tr>
<tr><td><code>data1</code></td><td><code>bytes</code></td><td>Configuration of the good</td></tr>
<tr><td><code>data2</code></td><td><code>bytes</code></td><td>Configuration of the good</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Success status</td></tr>
</tbody></table>
</div>
<h3 id="buygood"><a class="header" href="#buygood">buyGood</a></h3>
<p>Sell one good to buy another</p>
<pre><code class="language-solidity">function buyGood(
    address _goodid1,
    address _goodid2,
    uint128 _swapQuantity,
    uint256 _limitprice,
    bool _istotal,
    address _referal,
    bytes memory data1
) external payable returns (uint128 goodid2Quantity_, uint128 goodid2FeeQuantity_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid1</code></td><td><code>address</code></td><td>ID of the good to sell</td></tr>
<tr><td><code>_goodid2</code></td><td><code>address</code></td><td>ID of the good to buy</td></tr>
<tr><td><code>_swapQuantity</code></td><td><code>uint128</code></td><td>Quantity of _goodid1 to sell</td></tr>
<tr><td><code>_limitprice</code></td><td><code>uint256</code></td><td>Price limit for the trade</td></tr>
<tr><td><code>_istotal</code></td><td><code>bool</code></td><td>Whether to trade all or partial amount</td></tr>
<tr><td><code>_referal</code></td><td><code>address</code></td><td>Referral address</td></tr>
<tr><td><code>data1</code></td><td><code>bytes</code></td><td></td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>goodid2Quantity_</code></td><td><code>uint128</code></td><td>Actual quantity of good2 received</td></tr>
<tr><td><code>goodid2FeeQuantity_</code></td><td><code>uint128</code></td><td>Fee quantity for good2</td></tr>
</tbody></table>
</div>
<h3 id="buygoodforpay"><a class="header" href="#buygoodforpay">buyGoodForPay</a></h3>
<p>Buy a good, sell another, and send to a recipient</p>
<pre><code class="language-solidity">function buyGoodForPay(
    address _goodid1,
    address _goodid2,
    uint128 _swapQuantity,
    uint256 _limitprice,
    address _recipent,
    bytes memory data1
) external payable returns (uint128 goodid1Quantity_, uint128 goodid1FeeQuantity_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid1</code></td><td><code>address</code></td><td>ID of the good to buy</td></tr>
<tr><td><code>_goodid2</code></td><td><code>address</code></td><td>ID of the good to sell</td></tr>
<tr><td><code>_swapQuantity</code></td><td><code>uint128</code></td><td>Quantity of _goodid2 to buy</td></tr>
<tr><td><code>_limitprice</code></td><td><code>uint256</code></td><td>Price limit for the trade</td></tr>
<tr><td><code>_recipent</code></td><td><code>address</code></td><td>Address of the recipient</td></tr>
<tr><td><code>data1</code></td><td><code>bytes</code></td><td></td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>goodid1Quantity_</code></td><td><code>uint128</code></td><td>Actual quantity of good1 received</td></tr>
<tr><td><code>goodid1FeeQuantity_</code></td><td><code>uint128</code></td><td>Fee quantity for good1</td></tr>
</tbody></table>
</div>
<h3 id="investgood"><a class="header" href="#investgood">investGood</a></h3>
<p>Invest in a normal good</p>
<pre><code class="language-solidity">function investGood(address _togood, address _valuegood, uint128 _quantity, bytes memory data1, bytes memory data2)
    external
    payable
    returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_togood</code></td><td><code>address</code></td><td>ID of the normal good to invest in</td></tr>
<tr><td><code>_valuegood</code></td><td><code>address</code></td><td>ID of the value good</td></tr>
<tr><td><code>_quantity</code></td><td><code>uint128</code></td><td>Quantity of normal good to invest</td></tr>
<tr><td><code>data1</code></td><td><code>bytes</code></td><td></td></tr>
<tr><td><code>data2</code></td><td><code>bytes</code></td><td></td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Success status</td></tr>
</tbody></table>
</div>
<h3 id="disinvestproof"><a class="header" href="#disinvestproof">disinvestProof</a></h3>
<p>Disinvest from a normal good</p>
<pre><code class="language-solidity">function disinvestProof(uint256 _proofid, uint128 _goodQuantity, address _gater) external returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proofid</code></td><td><code>uint256</code></td><td>ID of the investment proof</td></tr>
<tr><td><code>_goodQuantity</code></td><td><code>uint128</code></td><td>Quantity to disinvest</td></tr>
<tr><td><code>_gater</code></td><td><code>address</code></td><td>Address of the gater</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Success status</td></tr>
</tbody></table>
</div>
<h3 id="collectproof"><a class="header" href="#collectproof">collectProof</a></h3>
<p>Collect profit from an investment proof</p>
<pre><code class="language-solidity">function collectProof(uint256 _proofid, address _gater) external returns (uint256 profit_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proofid</code></td><td><code>uint256</code></td><td>ID of the investment proof</td></tr>
<tr><td><code>_gater</code></td><td><code>address</code></td><td>Address of the gater</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>profit_</code></td><td><code>uint256</code></td><td>Collected profit (amount0: normal good profit, amount1: value good profit)</td></tr>
</tbody></table>
</div>
<h3 id="ishigher"><a class="header" href="#ishigher">ishigher</a></h3>
<p>Check if the price of a good is higher than a comparison price</p>
<pre><code class="language-solidity">function ishigher(address goodid, address valuegood, uint256 compareprice) external view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>goodid</code></td><td><code>address</code></td><td>ID of the good to check</td></tr>
<tr><td><code>valuegood</code></td><td><code>address</code></td><td>ID of the value good</td></tr>
<tr><td><code>compareprice</code></td><td><code>uint256</code></td><td>Price to compare against</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Whether the good's price is higher</td></tr>
</tbody></table>
</div>
<h3 id="getproofstate"><a class="header" href="#getproofstate">getProofState</a></h3>
<pre><code class="language-solidity">function getProofState(uint256 proofid) external view returns (S_ProofState memory);
</code></pre>
<h3 id="getgoodstate"><a class="header" href="#getgoodstate">getGoodState</a></h3>
<pre><code class="language-solidity">function getGoodState(address goodkey) external view returns (S_GoodTmpState memory);
</code></pre>
<h3 id="marketconfig"><a class="header" href="#marketconfig">marketconfig</a></h3>
<p>Returns the market configuration</p>
<p><em>Can be changed by the market manager</em></p>
<pre><code class="language-solidity">function marketconfig() external view returns (uint256 marketconfig_);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>marketconfig_</code></td><td><code>uint256</code></td><td>The market configuration</td></tr>
</tbody></table>
</div>
<h3 id="setmarketconfig"><a class="header" href="#setmarketconfig">setMarketConfig</a></h3>
<p>Sets the market configuration</p>
<pre><code class="language-solidity">function setMarketConfig(uint256 _marketconfig) external returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_marketconfig</code></td><td><code>uint256</code></td><td>The new market configuration</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Success status</td></tr>
</tbody></table>
</div>
<h3 id="updategoodconfig"><a class="header" href="#updategoodconfig">updateGoodConfig</a></h3>
<p>Updates a good's configuration</p>
<pre><code class="language-solidity">function updateGoodConfig(address _goodid, uint256 _goodConfig) external returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>address</code></td><td>The ID of the good</td></tr>
<tr><td><code>_goodConfig</code></td><td><code>uint256</code></td><td>The new configuration</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Success status</td></tr>
</tbody></table>
</div>
<h3 id="modifygoodconfig"><a class="header" href="#modifygoodconfig">modifyGoodConfig</a></h3>
<p>Allows market admin to modify a good's attributes</p>
<pre><code class="language-solidity">function modifyGoodConfig(address _goodid, uint256 _goodConfig) external returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>address</code></td><td>The ID of the good</td></tr>
<tr><td><code>_goodConfig</code></td><td><code>uint256</code></td><td>The new configuration</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Success status</td></tr>
</tbody></table>
</div>
<h3 id="paygood"><a class="header" href="#paygood">payGood</a></h3>
<p>Transfers a good to another address</p>
<pre><code class="language-solidity">function payGood(address _goodid, uint128 _payquanity, address _recipent, bytes memory transdata)
    external
    payable
    returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>address</code></td><td>The ID of the good</td></tr>
<tr><td><code>_payquanity</code></td><td><code>uint128</code></td><td>The quantity to transfer</td></tr>
<tr><td><code>_recipent</code></td><td><code>address</code></td><td>The recipient's address</td></tr>
<tr><td><code>transdata</code></td><td><code>bytes</code></td><td>The recipient's address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Success status</td></tr>
</tbody></table>
</div>
<h3 id="changegoodowner"><a class="header" href="#changegoodowner">changeGoodOwner</a></h3>
<p>Changes the owner of a good</p>
<pre><code class="language-solidity">function changeGoodOwner(address _goodid, address _to) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>address</code></td><td>The ID of the good</td></tr>
<tr><td><code>_to</code></td><td><code>address</code></td><td>The new owner's address</td></tr>
</tbody></table>
</div>
<h3 id="collectcommission"><a class="header" href="#collectcommission">collectCommission</a></h3>
<p>Collects commission for specified goods</p>
<pre><code class="language-solidity">function collectCommission(address[] memory _goodid) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>address[]</code></td><td>Array of good IDs</td></tr>
</tbody></table>
</div>
<h3 id="querycommission"><a class="header" href="#querycommission">queryCommission</a></h3>
<p>Queries commission for specified goods and recipient</p>
<pre><code class="language-solidity">function queryCommission(address[] memory _goodid, address _recipent) external returns (uint256[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>address[]</code></td><td>Array of good IDs</td></tr>
<tr><td><code>_recipent</code></td><td><code>address</code></td><td>The recipient's address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256[]</code></td><td>Array of commission amounts</td></tr>
</tbody></table>
</div>
<h3 id="addbanlist"><a class="header" href="#addbanlist">addbanlist</a></h3>
<p>Adds an address to the ban list</p>
<pre><code class="language-solidity">function addbanlist(address _user) external returns (bool is_success_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The address to ban</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>is_success_</code></td><td><code>bool</code></td><td>Success status</td></tr>
</tbody></table>
</div>
<h3 id="removebanlist"><a class="header" href="#removebanlist">removebanlist</a></h3>
<p>Removes an address from the ban list</p>
<pre><code class="language-solidity">function removebanlist(address _user) external returns (bool is_success_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The address to unban</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>is_success_</code></td><td><code>bool</code></td><td>Success status</td></tr>
</tbody></table>
</div>
<h3 id="goodwelfare"><a class="header" href="#goodwelfare">goodWelfare</a></h3>
<p>Delivers welfare to investors</p>
<pre><code class="language-solidity">function goodWelfare(address goodid, uint128 welfare, bytes memory data1) external payable;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>goodid</code></td><td><code>address</code></td><td>The ID of the good</td></tr>
<tr><td><code>welfare</code></td><td><code>uint128</code></td><td>The amount of welfare</td></tr>
<tr><td><code>data1</code></td><td><code>bytes</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="delproofdata"><a class="header" href="#delproofdata">delproofdata</a></h3>
<p><em>Internal function to handle proof data deletion and updates during transfer.</em></p>
<pre><code class="language-solidity">function delproofdata(uint256 proofid, address from, address to) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proofid</code></td><td><code>uint256</code></td><td>The ID of the proof being transferred.</td></tr>
<tr><td><code>from</code></td><td><code>address</code></td><td>The address transferring the proof.</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>The address receiving the proof.</td></tr>
</tbody></table>
</div>
<h3 id="flashloan1"><a class="header" href="#flashloan1">flashLoan1</a></h3>
<pre><code class="language-solidity">function flashLoan1(
    IERC3156FlashBorrower receiver,
    address token,
    uint256 amount,
    bytes calldata data,
    bytes memory transdata
) external returns (bool);
</code></pre>
<h2 id="events-3"><a class="header" href="#events-3">Events</a></h2>
<h3 id="e_changemarketcreator-1"><a class="header" href="#e_changemarketcreator-1">e_changemarketcreator</a></h3>
<p>Emitted when market configuration is set</p>
<pre><code class="language-solidity">event e_changemarketcreator(address _newmarketor);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_newmarketor</code></td><td><code>address</code></td><td>The marketcreator</td></tr>
</tbody></table>
</div>
<h3 id="e_setmarketconfig"><a class="header" href="#e_setmarketconfig">e_setMarketConfig</a></h3>
<p>Emitted when market configuration is set</p>
<pre><code class="language-solidity">event e_setMarketConfig(uint256 _marketconfig);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_marketconfig</code></td><td><code>uint256</code></td><td>The market configuration</td></tr>
</tbody></table>
</div>
<h3 id="e_updategoodconfig"><a class="header" href="#e_updategoodconfig">e_updateGoodConfig</a></h3>
<p>Emitted when a good's configuration is updated</p>
<pre><code class="language-solidity">event e_updateGoodConfig(address _goodid, uint256 _goodConfig);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>address</code></td><td>The ID of the good</td></tr>
<tr><td><code>_goodConfig</code></td><td><code>uint256</code></td><td>The new configuration</td></tr>
</tbody></table>
</div>
<h3 id="e_modifygoodconfig"><a class="header" href="#e_modifygoodconfig">e_modifyGoodConfig</a></h3>
<p>Emitted when a good's configuration is modified by market admin</p>
<pre><code class="language-solidity">event e_modifyGoodConfig(address _goodid, uint256 _goodconfig);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>address</code></td><td>The ID of the good</td></tr>
<tr><td><code>_goodconfig</code></td><td><code>uint256</code></td><td>The new configuration</td></tr>
</tbody></table>
</div>
<h3 id="e_changegoodowner"><a class="header" href="#e_changegoodowner">e_changegoodowner</a></h3>
<p>Emitted when a good's owner is changed</p>
<pre><code class="language-solidity">event e_changegoodowner(address goodid, address to);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>goodid</code></td><td><code>address</code></td><td>The ID of the good</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>The new owner's address</td></tr>
</tbody></table>
</div>
<h3 id="e_collectcommission"><a class="header" href="#e_collectcommission">e_collectcommission</a></h3>
<p>Emitted when market commission is collected</p>
<pre><code class="language-solidity">event e_collectcommission(address[] _gooid, uint256[] _commisionamount);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_gooid</code></td><td><code>address[]</code></td><td>Array of good IDs</td></tr>
<tr><td><code>_commisionamount</code></td><td><code>uint256[]</code></td><td>Array of commission amounts</td></tr>
</tbody></table>
</div>
<h3 id="e_modifieduserconfig"><a class="header" href="#e_modifieduserconfig">e_modifiedUserConfig</a></h3>
<p>Emitted when an address is added to the ban list</p>
<pre><code class="language-solidity">event e_modifiedUserConfig(address _user, uint256 config);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The banned user's address</td></tr>
<tr><td><code>config</code></td><td><code>uint256</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="e_goodwelfare"><a class="header" href="#e_goodwelfare">e_goodWelfare</a></h3>
<p>Emitted when welfare is delivered to investors</p>
<pre><code class="language-solidity">event e_goodWelfare(address goodid, uint128 welfare);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>goodid</code></td><td><code>address</code></td><td>The ID of the good</td></tr>
<tr><td><code>welfare</code></td><td><code>uint128</code></td><td>The amount of welfare</td></tr>
</tbody></table>
</div>
<h3 id="e_collectprotocolfee"><a class="header" href="#e_collectprotocolfee">e_collectProtocolFee</a></h3>
<p>Emitted when protocol fee is collected</p>
<pre><code class="language-solidity">event e_collectProtocolFee(address goodid, uint256 feeamount);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>goodid</code></td><td><code>address</code></td><td>The ID of the good</td></tr>
<tr><td><code>feeamount</code></td><td><code>uint256</code></td><td>The amount of fee collected</td></tr>
</tbody></table>
</div>
<h3 id="e_transferdel"><a class="header" href="#e_transferdel">e_transferdel</a></h3>
<p>Emitted when proofid deleted when proofid is transfer.</p>
<pre><code class="language-solidity">event e_transferdel(uint256 delproofid, uint256 existsproofid);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>delproofid</code></td><td><code>uint256</code></td><td>fromproofid which will be deleted</td></tr>
<tr><td><code>existsproofid</code></td><td><code>uint256</code></td><td>conbine to existsproofid</td></tr>
</tbody></table>
</div>
<h3 id="e_initmetagood"><a class="header" href="#e_initmetagood">e_initMetaGood</a></h3>
<p>Emitted when a meta good is created and initialized</p>
<p><em>The decimal precision of _initial.amount0() defaults to 6</em></p>
<pre><code class="language-solidity">event e_initMetaGood(uint256 _proofNo, address _goodid, uint256 _construct, uint256 _goodConfig, uint256 _initial);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proofNo</code></td><td><code>uint256</code></td><td>The ID of the investment proof</td></tr>
<tr><td><code>_goodid</code></td><td><code>address</code></td><td>A 256-bit value where the first 128 bits represent the good's ID and the last 128 bits represent the stake construct</td></tr>
<tr><td><code>_construct</code></td><td><code>uint256</code></td><td>A 256-bit value where the first 128 bits represent the good's ID and the last 128 bits represent the stake construct</td></tr>
<tr><td><code>_goodConfig</code></td><td><code>uint256</code></td><td>The configuration of the meta good (refer to the whitepaper for details)</td></tr>
<tr><td><code>_initial</code></td><td><code>uint256</code></td><td>Market initialization parameters: amount0 is the value, amount1 is the quantity</td></tr>
</tbody></table>
</div>
<h3 id="e_initgood"><a class="header" href="#e_initgood">e_initGood</a></h3>
<p>Emitted when a good is created and initialized</p>
<pre><code class="language-solidity">event e_initGood(
    uint256 _proofNo,
    address _goodid,
    address _valuegoodNo,
    uint256 _goodConfig,
    uint256 _construct,
    uint256 _normalinitial,
    uint256 _value
);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proofNo</code></td><td><code>uint256</code></td><td>The ID of the investment proof</td></tr>
<tr><td><code>_goodid</code></td><td><code>address</code></td><td>A 256-bit value where the first 128 bits represent the good's ID and the last 128 bits represent the stake construct</td></tr>
<tr><td><code>_valuegoodNo</code></td><td><code>address</code></td><td>The ID of the good</td></tr>
<tr><td><code>_goodConfig</code></td><td><code>uint256</code></td><td>The configuration of the meta good (refer to the whitepaper for details)</td></tr>
<tr><td><code>_construct</code></td><td><code>uint256</code></td><td>A 256-bit value where the first 128 bits represent the good's ID and the last 128 bits represent the stake construct</td></tr>
<tr><td><code>_normalinitial</code></td><td><code>uint256</code></td><td>Normal good initialization parameters: amount0 is the quantity, amount1 is the value</td></tr>
<tr><td><code>_value</code></td><td><code>uint256</code></td><td>Value good initialization parameters: amount0 is the investment fee, amount1 is the investment quantity</td></tr>
</tbody></table>
</div>
<h3 id="e_buygood"><a class="header" href="#e_buygood">e_buyGood</a></h3>
<p>Emitted when a user buys a good</p>
<pre><code class="language-solidity">event e_buyGood(
    address indexed sellgood,
    address indexed forgood,
    address fromer,
    uint128 swapvalue,
    uint256 sellgoodstate,
    uint256 forgoodstate
);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sellgood</code></td><td><code>address</code></td><td>The ID of the good being sold</td></tr>
<tr><td><code>forgood</code></td><td><code>address</code></td><td>The ID of the good being bought</td></tr>
<tr><td><code>fromer</code></td><td><code>address</code></td><td>The address of the buyer</td></tr>
<tr><td><code>swapvalue</code></td><td><code>uint128</code></td><td>The trade value</td></tr>
<tr><td><code>sellgoodstate</code></td><td><code>uint256</code></td><td>The status of the sold good (amount0: fee, amount1: quantity)</td></tr>
<tr><td><code>forgoodstate</code></td><td><code>uint256</code></td><td>The status of the bought good (amount0: fee, amount1: quantity)</td></tr>
</tbody></table>
</div>
<h3 id="e_buygoodforpay"><a class="header" href="#e_buygoodforpay">e_buyGoodForPay</a></h3>
<p>Emitted when a user buys a good and pays the seller</p>
<pre><code class="language-solidity">event e_buyGoodForPay(
    address indexed buygood,
    address indexed usegood,
    address fromer,
    address receipt,
    uint128 swapvalue,
    uint256 buygoodstate,
    uint256 usegoodstate
);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>buygood</code></td><td><code>address</code></td><td>The ID of the good being bought</td></tr>
<tr><td><code>usegood</code></td><td><code>address</code></td><td>The ID of the good being used for payment</td></tr>
<tr><td><code>fromer</code></td><td><code>address</code></td><td>The address of the buyer</td></tr>
<tr><td><code>receipt</code></td><td><code>address</code></td><td>The address of the recipient (seller)</td></tr>
<tr><td><code>swapvalue</code></td><td><code>uint128</code></td><td>The trade value</td></tr>
<tr><td><code>buygoodstate</code></td><td><code>uint256</code></td><td>The status of the bought good (amount0: fee, amount1: quantity)</td></tr>
<tr><td><code>usegoodstate</code></td><td><code>uint256</code></td><td>The status of the used good (amount0: fee, amount1: quantity)</td></tr>
</tbody></table>
</div>
<h3 id="e_investgood"><a class="header" href="#e_investgood">e_investGood</a></h3>
<p>Emitted when a user invests in a normal good</p>
<pre><code class="language-solidity">event e_investGood(
    uint256 indexed _proofNo,
    address _normalgoodid,
    address _valueGoodNo,
    uint256 _value,
    uint256 _invest,
    uint256 _valueinvest
);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proofNo</code></td><td><code>uint256</code></td><td>The ID of the investment proof</td></tr>
<tr><td><code>_normalgoodid</code></td><td><code>address</code></td><td>Packed data: first 128 bits for good's ID, last 128 bits for stake construct</td></tr>
<tr><td><code>_valueGoodNo</code></td><td><code>address</code></td><td>The ID of the value good</td></tr>
<tr><td><code>_value</code></td><td><code>uint256</code></td><td>Investment value (amount0: invest value, amount1: restake construct)</td></tr>
<tr><td><code>_invest</code></td><td><code>uint256</code></td><td>Normal good investment details (amount0: actual fee, amount1: actual invest quantity)</td></tr>
<tr><td><code>_valueinvest</code></td><td><code>uint256</code></td><td>Value good investment details (amount0: actual fee, amount1: actual invest quantity)</td></tr>
</tbody></table>
</div>
<h3 id="e_disinvestproof"><a class="header" href="#e_disinvestproof">e_disinvestProof</a></h3>
<p>Emitted when a user disinvests from a normal good</p>
<pre><code class="language-solidity">event e_disinvestProof(
    uint256 indexed _proofNo,
    address _normalGoodNo,
    address _valueGoodNo,
    uint256 _value,
    uint256 _normalgood,
    uint256 _valuegood,
    uint256 _profit
);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proofNo</code></td><td><code>uint256</code></td><td>The ID of the investment proof</td></tr>
<tr><td><code>_normalGoodNo</code></td><td><code>address</code></td><td>The ID of the normal good</td></tr>
<tr><td><code>_valueGoodNo</code></td><td><code>address</code></td><td>The ID of the value good</td></tr>
<tr><td><code>_value</code></td><td><code>uint256</code></td><td></td></tr>
<tr><td><code>_normalgood</code></td><td><code>uint256</code></td><td>The disinvestment details of the normal good (amount0: actual fee, amount1: actual disinvest quantity)</td></tr>
<tr><td><code>_valuegood</code></td><td><code>uint256</code></td><td>The disinvestment details of the value good (amount0: actual fee, amount1: actual disinvest quantity)</td></tr>
<tr><td><code>_profit</code></td><td><code>uint256</code></td><td>The profit (amount0: normal good profit, amount1: value good profit)</td></tr>
</tbody></table>
</div>
<h3 id="e_collectproof"><a class="header" href="#e_collectproof">e_collectProof</a></h3>
<p>Emitted when a user collects profit from an investment proof</p>
<pre><code class="language-solidity">event e_collectProof(uint256 indexed _proofNo, address _normalGoodNo, address _valueGoodNo, uint256 _profit);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proofNo</code></td><td><code>uint256</code></td><td>The ID of the investment proof</td></tr>
<tr><td><code>_normalGoodNo</code></td><td><code>address</code></td><td>The ID of the normal good</td></tr>
<tr><td><code>_valueGoodNo</code></td><td><code>address</code></td><td>The ID of the value good</td></tr>
<tr><td><code>_profit</code></td><td><code>uint256</code></td><td>The collected profit (amount0: normal good profit, amount1: value good profit)</td></tr>
</tbody></table>
</div>
<h3 id="e_enpower"><a class="header" href="#e_enpower">e_enpower</a></h3>
<p>Emitted when a good is empowered</p>
<pre><code class="language-solidity">event e_enpower(uint256 _goodid, uint256 _valuegood, uint256 _quantity);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>uint256</code></td><td>The ID of the good</td></tr>
<tr><td><code>_valuegood</code></td><td><code>uint256</code></td><td>The ID of the value good</td></tr>
<tr><td><code>_quantity</code></td><td><code>uint256</code></td><td>The quantity of the value good to empower</td></tr>
</tbody></table>
</div>
<h2 id="errors-3"><a class="header" href="#errors-3">Errors</a></h2>
<h3 id="noenoughoutputerror"><a class="header" href="#noenoughoutputerror">noEnoughOutputError</a></h3>
<pre><code class="language-solidity">error noEnoughOutputError();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="s_proofstate"><a class="header" href="#s_proofstate">S_ProofState</a></h1>
<p><em>Represents the state of a proof</em></p>
<pre><code class="language-solidity">struct S_ProofState {
    address currentgood;
    address valuegood;
    uint256 state;
    uint256 invest;
    uint256 valueinvest;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="s_goodstate"><a class="header" href="#s_goodstate">S_GoodState</a></h1>
<p><em>Struct representing the state of a good</em></p>
<pre><code class="language-solidity">struct S_GoodState {
    uint256 goodConfig;
    address owner;
    uint256 currentState;
    uint256 investState;
    uint256 feeQuantityState;
    mapping(address =&gt; uint256) commission;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="s_goodtmpstate"><a class="header" href="#s_goodtmpstate">S_GoodTmpState</a></h1>
<p><em>Struct representing a temporary state of a good</em></p>
<pre><code class="language-solidity">struct S_GoodTmpState {
    uint256 goodConfig;
    address owner;
    uint256 currentState;
    uint256 investState;
    uint256 feeQuantityState;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="s_goodkey"><a class="header" href="#s_goodkey">S_GoodKey</a></h1>
<pre><code class="language-solidity">struct S_GoodKey {
    address owner;
    address erc20address;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="s_proofkey"><a class="header" href="#s_proofkey">S_ProofKey</a></h1>
<pre><code class="language-solidity">struct S_ProofKey {
    address owner;
    address currentgood;
    address valuegood;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="s_loanproof"><a class="header" href="#s_loanproof">S_LoanProof</a></h1>
<pre><code class="language-solidity">struct S_LoanProof {
    uint256 amount;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="i_ttswap_nft"><a class="header" href="#i_ttswap_nft">I_TTSwap_NFT</a></h1>
<p>Contains a series of interfaces for goods</p>
<h2 id="functions-7"><a class="header" href="#functions-7">Functions</a></h2>
<h3 id="mint"><a class="header" href="#mint">mint</a></h3>
<p><em>mint nft for recipent</em></p>
<pre><code class="language-solidity">function mint(address recipent, uint256 tokenid) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>recipent</code></td><td><code>address</code></td><td>who is  the tokenid  minted the tokenid for .</td></tr>
<tr><td><code>tokenid</code></td><td><code>uint256</code></td><td>the tokenid.</td></tr>
</tbody></table>
</div>
<h3 id="proofsource"><a class="header" href="#proofsource">proofsource</a></h3>
<p><em>record which contract is storing the tokenid</em></p>
<pre><code class="language-solidity">function proofsource(uint256 tokenid) external view returns (address cd);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>tokenid</code></td><td><code>uint256</code></td><td>The current owner of the token.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>cd</code></td><td><code>address</code></td><td>the contract address of tokenid</td></tr>
</tbody></table>
</div>
<h3 id="isapprovedorowner"><a class="header" href="#isapprovedorowner">isApprovedOrOwner</a></h3>
<p><em>get the token  approved to the spender</em></p>
<pre><code class="language-solidity">function isApprovedOrOwner(address spender, uint256 tokenId) external returns (bool result);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>spender</code></td><td><code>address</code></td><td>who</td></tr>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>The new owner.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>result</code></td><td><code>bool</code></td><td>result</td></tr>
</tbody></table>
</div>
<h3 id="burn"><a class="header" href="#burn">burn</a></h3>
<p><em>burn tokenid</em></p>
<pre><code class="language-solidity">function burn(uint256 tokenId) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>which tokenid will be burned.</td></tr>
</tbody></table>
</div>
<h3 id="safetransferfromwithpermit"><a class="header" href="#safetransferfromwithpermit">safeTransferFromWithPermit</a></h3>
<p><em>Safely transfers the ownership of a given token ID to another address with a permit.</em></p>
<pre><code class="language-solidity">function safeTransferFromWithPermit(
    address from,
    address to,
    uint256 tokenId,
    bytes memory _data,
    uint256 deadline,
    bytes memory signature
) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>from</code></td><td><code>address</code></td><td>The current owner of the token.</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>The new owner.</td></tr>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>The ID of the token to be transferred.</td></tr>
<tr><td><code>_data</code></td><td><code>bytes</code></td><td>Additional data with no specified format.</td></tr>
<tr><td><code>deadline</code></td><td><code>uint256</code></td><td>The time at which the signature expires.</td></tr>
<tr><td><code>signature</code></td><td><code>bytes</code></td><td>A valid EIP712 signature.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="i_ttswap_token"><a class="header" href="#i_ttswap_token">I_TTSwap_Token</a></h1>
<p>Contains a series of interfaces for goods</p>
<h2 id="functions-8"><a class="header" href="#functions-8">Functions</a></h2>
<h3 id="dao_admin"><a class="header" href="#dao_admin">dao_admin</a></h3>
<p><em>Returns the address of the DAO admin</em></p>
<pre><code class="language-solidity">function dao_admin() external view returns (address _dao_admin);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_dao_admin</code></td><td><code>address</code></td><td>Returns the address of the DAO admin</td></tr>
</tbody></table>
</div>
<h3 id="marketcontract"><a class="header" href="#marketcontract">marketcontract</a></h3>
<p><em>Returns the address of the market contract</em></p>
<pre><code class="language-solidity">function marketcontract() external view returns (address _marketcontract);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_marketcontract</code></td><td><code>address</code></td><td>Returns the address of marketcontract</td></tr>
</tbody></table>
</div>
<h3 id="normalgoodid"><a class="header" href="#normalgoodid">normalgoodid</a></h3>
<p><em>Returns the ID of the normal good</em></p>
<pre><code class="language-solidity">function normalgoodid() external view returns (address _normalgoodid);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_normalgoodid</code></td><td><code>address</code></td><td>Returns the id of normalgood</td></tr>
</tbody></table>
</div>
<h3 id="valuegoodid"><a class="header" href="#valuegoodid">valuegoodid</a></h3>
<p><em>Returns the ID of the value good</em></p>
<pre><code class="language-solidity">function valuegoodid() external view returns (address _valuegoodid);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_valuegoodid</code></td><td><code>address</code></td><td>Returns the id of the valuegoodid</td></tr>
</tbody></table>
</div>
<h3 id="publicsell"><a class="header" href="#publicsell">publicsell</a></h3>
<p><em>Returns the amount of TTS available for public sale</em></p>
<pre><code class="language-solidity">function publicsell() external view returns (uint128 _publicsell);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_publicsell</code></td><td><code>uint128</code></td><td>Returns the amount of TTS available for public sale</td></tr>
</tbody></table>
</div>
<h3 id="referrals"><a class="header" href="#referrals">referrals</a></h3>
<p><em>Returns the referrer address for a given user</em></p>
<pre><code class="language-solidity">function referrals(address _recipent) external view returns (address _referral);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_recipent</code></td><td><code>address</code></td><td>user's address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_referral</code></td><td><code>address</code></td><td>Returns the referrer address for a given user</td></tr>
</tbody></table>
</div>
<h3 id="auths"><a class="header" href="#auths">auths</a></h3>
<p><em>Returns the authorization level for a given address</em></p>
<pre><code class="language-solidity">function auths(address recipent) external view returns (uint256 _auth);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>recipent</code></td><td><code>address</code></td><td>user's address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_auth</code></td><td><code>uint256</code></td><td>Returns the authorization level</td></tr>
</tbody></table>
</div>
<h3 id="setenv"><a class="header" href="#setenv">setEnv</a></h3>
<pre><code class="language-solidity">function setEnv(address _normalgoodid, address _valuegoodid, address _marketcontract) external;
</code></pre>
<h3 id="changedaoadmin"><a class="header" href="#changedaoadmin">changeDAOAdmin</a></h3>
<p><em>Changes the DAO admin to the specified recipient address</em></p>
<pre><code class="language-solidity">function changeDAOAdmin(address _recipient) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_recipient</code></td><td><code>address</code></td><td>user's address</td></tr>
</tbody></table>
</div>
<h3 id="addshare"><a class="header" href="#addshare">addShare</a></h3>
<p>Only callable on the main chain by the DAO admin</p>
<p>Reduces the left_share by the amount in _share</p>
<p>Increments the shares_index and adds the new share to the shares mapping</p>
<p>Emits an e_addShare event with the share details</p>
<p><em>Adds a new mint share to the contract</em></p>
<pre><code class="language-solidity">function addShare(s_share calldata _share) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_share</code></td><td><code>s_share</code></td><td>The share structure containing recipient, amount, metric, and chips</td></tr>
</tbody></table>
</div>
<h3 id="burnshare"><a class="header" href="#burnshare">burnShare</a></h3>
<p><em>Burns the share at the specified index</em></p>
<pre><code class="language-solidity">function burnShare(uint8 index) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>index</code></td><td><code>uint8</code></td><td>index of share</td></tr>
</tbody></table>
</div>
<h3 id="sharemint"><a class="header" href="#sharemint">shareMint</a></h3>
<p><em>Mints a share at the specified index</em></p>
<pre><code class="language-solidity">function shareMint(uint8 index) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>index</code></td><td><code>uint8</code></td><td>index of share</td></tr>
</tbody></table>
</div>
<h3 id="public_sell"><a class="header" href="#public_sell">public_Sell</a></h3>
<p><em>how much cost to buy tts</em></p>
<pre><code class="language-solidity">function public_Sell(uint256 usdtamount) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>usdtamount</code></td><td><code>uint256</code></td><td>usdt amount</td></tr>
</tbody></table>
</div>
<h3 id="withdrawpublicsell"><a class="header" href="#withdrawpublicsell">withdrawPublicSell</a></h3>
<p><em>Withdraws the specified amount from the public sale to the recipient</em></p>
<pre><code class="language-solidity">function withdrawPublicSell(uint256 amount, address recipent) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>admin tranfer public sell to another address</td></tr>
<tr><td><code>recipent</code></td><td><code>address</code></td><td>user's address</td></tr>
</tbody></table>
</div>
<h3 id="syncchainstake"><a class="header" href="#syncchainstake">syncChainStake</a></h3>
<p><em>Synchronizes the chain stake and returns the pool asset value</em></p>
<pre><code class="language-solidity">function syncChainStake(uint32 chainid, uint128 chainvalue) external returns (uint128 poolasset);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>chainid</code></td><td><code>uint32</code></td><td>the chain's id</td></tr>
<tr><td><code>chainvalue</code></td><td><code>uint128</code></td><td>the chain's stake value</td></tr>
</tbody></table>
</div>
<h3 id="syncpoolasset"><a class="header" href="#syncpoolasset">syncPoolAsset</a></h3>
<p><em>Synchronizes the pool asset with the specified amount to the subchain in stakepool</em></p>
<pre><code class="language-solidity">function syncPoolAsset(uint128 amount) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount</code></td><td><code>uint128</code></td><td>the  amount will be Synchronizes</td></tr>
</tbody></table>
</div>
<h3 id="chain_withdraw"><a class="header" href="#chain_withdraw">chain_withdraw</a></h3>
<p><em>Withdraws the specified asset from the subchain to the recipient</em></p>
<pre><code class="language-solidity">function chain_withdraw(uint32 chainid, uint128 asset) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>chainid</code></td><td><code>uint32</code></td><td>the subchain id</td></tr>
<tr><td><code>asset</code></td><td><code>uint128</code></td><td>the asset amount will be withdraw</td></tr>
</tbody></table>
</div>
<h3 id="chain_deposit"><a class="header" href="#chain_deposit">chain_deposit</a></h3>
<p><em>Deposit the specified asset from the subchain to the recipient</em></p>
<pre><code class="language-solidity">function chain_deposit(uint32 chainid, uint128 asset) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>chainid</code></td><td><code>uint32</code></td><td>the subchain id</td></tr>
<tr><td><code>asset</code></td><td><code>uint128</code></td><td>the asset amount will be deposit</td></tr>
</tbody></table>
</div>
<h3 id="subchainwithdraw"><a class="header" href="#subchainwithdraw">subchainWithdraw</a></h3>
<p><em>Withdraws the specified asset from the subchain to the recipient</em></p>
<pre><code class="language-solidity">function subchainWithdraw(uint128 asset, address recipient) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>uint128</code></td><td>the asset amount will be withdraw</td></tr>
<tr><td><code>recipient</code></td><td><code>address</code></td><td>the asset owner</td></tr>
</tbody></table>
</div>
<h3 id="subchaindeposit"><a class="header" href="#subchaindeposit">subchainDeposit</a></h3>
<p><em>Deposits the specified asset to the subchain for the recipient</em></p>
<pre><code class="language-solidity">function subchainDeposit(uint128 asset, address recipient) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>uint128</code></td><td>the asset amount will be deposit</td></tr>
<tr><td><code>recipient</code></td><td><code>address</code></td><td>the receiver</td></tr>
</tbody></table>
</div>
<h3 id="burn-1"><a class="header" href="#burn-1">burn</a></h3>
<p><em>Burns the specified value of tokens from the given account</em></p>
<pre><code class="language-solidity">function burn(address account, uint256 value) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>account</code></td><td><code>address</code></td><td>the given account</td></tr>
<tr><td><code>value</code></td><td><code>uint256</code></td><td>the amount will be burned</td></tr>
</tbody></table>
</div>
<h3 id="addauths"><a class="header" href="#addauths">addauths</a></h3>
<p>Only the DAO admin can call this function</p>
<p><em>Adds or updates authorization for an address</em></p>
<pre><code class="language-solidity">function addauths(address _auths, uint256 _priv) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_auths</code></td><td><code>address</code></td><td>The address to authorize</td></tr>
<tr><td><code>_priv</code></td><td><code>uint256</code></td><td>The privilege level to assign</td></tr>
</tbody></table>
</div>
<h3 id="rmauths"><a class="header" href="#rmauths">rmauths</a></h3>
<p>Only the DAO admin can call this function</p>
<p><em>Removes authorization from an address</em></p>
<pre><code class="language-solidity">function rmauths(address _auths) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_auths</code></td><td><code>address</code></td><td>The address to remove authorization from</td></tr>
</tbody></table>
</div>
<h3 id="addreferral"><a class="header" href="#addreferral">addreferral</a></h3>
<p>Add a referral relationship</p>
<pre><code class="language-solidity">function addreferral(address user, address referral) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>user</code></td><td><code>address</code></td><td>The address of the user being referred</td></tr>
<tr><td><code>referral</code></td><td><code>address</code></td><td>The address of the referrer</td></tr>
</tbody></table>
</div>
<h3 id="stake"><a class="header" href="#stake">stake</a></h3>
<p>Stake tokens</p>
<pre><code class="language-solidity">function stake(address staker, uint128 proofvalue) external returns (uint128 construct);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>staker</code></td><td><code>address</code></td><td>The address of the staker</td></tr>
<tr><td><code>proofvalue</code></td><td><code>uint128</code></td><td>The proof value for the stake</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>construct</code></td><td><code>uint128</code></td><td>The construct value after staking</td></tr>
</tbody></table>
</div>
<h3 id="unstake"><a class="header" href="#unstake">unstake</a></h3>
<p>Unstake tokens</p>
<pre><code class="language-solidity">function unstake(address staker, uint128 proofvalue) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>staker</code></td><td><code>address</code></td><td>The address of the staker</td></tr>
<tr><td><code>proofvalue</code></td><td><code>uint128</code></td><td>The proof value for unstaking</td></tr>
</tbody></table>
</div>
<h3 id="getreferralanddaoadmin"><a class="header" href="#getreferralanddaoadmin">getreferralanddaoadmin</a></h3>
<p>Get the DAO admin and referral for a customer</p>
<pre><code class="language-solidity">function getreferralanddaoadmin(address _customer) external view returns (address dba_admin, address referral);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_customer</code></td><td><code>address</code></td><td>The address of the customer</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>dba_admin</code></td><td><code>address</code></td><td>The address of the DAO admin</td></tr>
<tr><td><code>referral</code></td><td><code>address</code></td><td>The address of the referrer</td></tr>
</tbody></table>
</div>
<h2 id="events-4"><a class="header" href="#events-4">Events</a></h2>
<h3 id="e_addreferral"><a class="header" href="#e_addreferral">e_addreferral</a></h3>
<p>Emitted when a referral is added</p>
<pre><code class="language-solidity">event e_addreferral(address users, address referral);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>users</code></td><td><code>address</code></td><td>The address of the user</td></tr>
<tr><td><code>referral</code></td><td><code>address</code></td><td>The address of the referrer</td></tr>
</tbody></table>
</div>
<h3 id="e_setenv"><a class="header" href="#e_setenv">e_setenv</a></h3>
<p>Emitted when environment variables are set</p>
<pre><code class="language-solidity">event e_setenv(address normalgoodid, address valuegoodid, address marketcontract);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>normalgoodid</code></td><td><code>address</code></td><td>The ID of the normal good</td></tr>
<tr><td><code>valuegoodid</code></td><td><code>address</code></td><td>The ID of the value good</td></tr>
<tr><td><code>marketcontract</code></td><td><code>address</code></td><td>The address of the market contract</td></tr>
</tbody></table>
</div>
<h3 id="e_setdaoadmin"><a class="header" href="#e_setdaoadmin">e_setdaoadmin</a></h3>
<p>Emitted when a DAO admin is set</p>
<pre><code class="language-solidity">event e_setdaoadmin(address recipient);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>recipient</code></td><td><code>address</code></td><td>The address of the new DAO admin</td></tr>
</tbody></table>
</div>
<h3 id="e_addauths-1"><a class="header" href="#e_addauths-1">e_addauths</a></h3>
<p>Emitted when authorizations are added</p>
<pre><code class="language-solidity">event e_addauths(address auths, uint256 priv);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>auths</code></td><td><code>address</code></td><td>The address being authorized</td></tr>
<tr><td><code>priv</code></td><td><code>uint256</code></td><td>The privilege level being granted</td></tr>
</tbody></table>
</div>
<h3 id="e_rmauths"><a class="header" href="#e_rmauths">e_rmauths</a></h3>
<p>Emitted when authorizations are removed</p>
<pre><code class="language-solidity">event e_rmauths(address auths);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>auths</code></td><td><code>address</code></td><td>The address being deauthorized</td></tr>
</tbody></table>
</div>
<h3 id="e_addshare"><a class="header" href="#e_addshare">e_addShare</a></h3>
<p>Emitted when minting is added</p>
<pre><code class="language-solidity">event e_addShare(address recipient, uint256 leftamount, uint120 metric, uint8 chips, uint32 index);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>recipient</code></td><td><code>address</code></td><td>The address receiving the minted tokens</td></tr>
<tr><td><code>leftamount</code></td><td><code>uint256</code></td><td>The remaining amount to be minted</td></tr>
<tr><td><code>metric</code></td><td><code>uint120</code></td><td>The metric used for minting</td></tr>
<tr><td><code>chips</code></td><td><code>uint8</code></td><td>The number of chips</td></tr>
<tr><td><code>index</code></td><td><code>uint32</code></td><td>The index of the minting operation</td></tr>
</tbody></table>
</div>
<h3 id="e_burnshare"><a class="header" href="#e_burnshare">e_burnShare</a></h3>
<p>Emitted when minting is burned</p>
<pre><code class="language-solidity">event e_burnShare(uint32 index);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>index</code></td><td><code>uint32</code></td><td>The index of the minting operation being burned</td></tr>
</tbody></table>
</div>
<h3 id="e_sharemint"><a class="header" href="#e_sharemint">e_shareMint</a></h3>
<p>Emitted when DAO minting occurs</p>
<pre><code class="language-solidity">event e_shareMint(uint128 mintamount, uint32 index);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>mintamount</code></td><td><code>uint128</code></td><td>The amount being minted</td></tr>
<tr><td><code>index</code></td><td><code>uint32</code></td><td>The index of the minting operation</td></tr>
</tbody></table>
</div>
<h3 id="e_publicsell"><a class="header" href="#e_publicsell">e_publicsell</a></h3>
<p>Emitted during a public sale</p>
<pre><code class="language-solidity">event e_publicsell(uint256 usdtamount, uint256 ttsamount);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>usdtamount</code></td><td><code>uint256</code></td><td>The amount of USDT involved</td></tr>
<tr><td><code>ttsamount</code></td><td><code>uint256</code></td><td>The amount of TTS involved</td></tr>
</tbody></table>
</div>
<h3 id="e_syncchainstake"><a class="header" href="#e_syncchainstake">e_syncChainStake</a></h3>
<p>Emitted when chain stake is synchronized</p>
<pre><code class="language-solidity">event e_syncChainStake(uint32 chain, uint128 poolasset, uint256 proofstate);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>chain</code></td><td><code>uint32</code></td><td>The chain ID</td></tr>
<tr><td><code>poolasset</code></td><td><code>uint128</code></td><td>The pool asset value</td></tr>
<tr><td><code>proofstate</code></td><td><code>uint256</code></td><td>The value of the pool</td></tr>
</tbody></table>
</div>
<h3 id="e_unstake"><a class="header" href="#e_unstake">e_unstake</a></h3>
<p>Emitted when unstaking occurs</p>
<pre><code class="language-solidity">event e_unstake(address recipient, uint256 proofvalue, uint256 unstakestate, uint256 stakestate, uint256 poolstate);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>recipient</code></td><td><code>address</code></td><td>The address receiving the unstaked tokens</td></tr>
<tr><td><code>proofvalue</code></td><td><code>uint256</code></td><td>first 128 bit proofvalue,last 128 bit poolcontruct</td></tr>
<tr><td><code>unstakestate</code></td><td><code>uint256</code></td><td>The state after unstaking</td></tr>
<tr><td><code>stakestate</code></td><td><code>uint256</code></td><td>The state of the stake</td></tr>
<tr><td><code>poolstate</code></td><td><code>uint256</code></td><td>The state of the pool</td></tr>
</tbody></table>
</div>
<h3 id="e_updatepool"><a class="header" href="#e_updatepool">e_updatepool</a></h3>
<p>Emitted when the pool state is updated</p>
<pre><code class="language-solidity">event e_updatepool(uint256 poolstate);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>poolstate</code></td><td><code>uint256</code></td><td>The new state of the pool</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="s_share"><a class="header" href="#s_share">s_share</a></h1>
<pre><code class="language-solidity">struct s_share {
    address recipient;
    uint128 leftamount;
    uint120 metric;
    uint8 chips;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="s_chain"><a class="header" href="#s_chain">s_chain</a></h1>
<pre><code class="language-solidity">struct s_chain {
    uint256 asset;
    uint256 proofstate;
    address recipient;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="s_proof"><a class="header" href="#s_proof">s_proof</a></h1>
<pre><code class="language-solidity">struct s_proof {
    address fromcontract;
    uint256 proofstate;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-1"><a class="header" href="#contents-1">Contents</a></h1>
<ul>
<li><a href="src/libraries/L_Currency.sol/library.L_CurrencyLibrary.html">L_CurrencyLibrary</a></li>
<li><a href="src/libraries/L_Good.sol/library.L_Good.html">L_Good</a></li>
<li><a href="src/libraries/L_Good.sol/library.L_GoodIdLibrary.html">L_GoodIdLibrary</a></li>
<li><a href="src/libraries/L_GoodConfig.sol/library.L_GoodConfigLibrary.html">L_GoodConfigLibrary</a></li>
<li><a href="src/libraries/L_Lock.sol/library.L_Lock.html">L_Lock</a></li>
<li><a href="src/libraries/L_MarketConfig.sol/library.L_MarketConfigLibrary.html">L_MarketConfigLibrary</a></li>
<li><a href="src/libraries/L_OrderStatus.sol/library.L_OrderStatus.html">L_OrderStatus</a></li>
<li><a href="src/libraries/L_Proof.sol/library.L_Proof.html">L_Proof</a></li>
<li><a href="src/libraries/L_Proof.sol/library.L_ProofKeyLibrary.html">L_ProofKeyLibrary</a></li>
<li><a href="src/libraries/L_Proof.sol/library.L_ProofIdLibrary.html">L_ProofIdLibrary</a></li>
<li><a href="src/libraries/L_TTSTokenConfig.sol/library.L_TTSTokenConfigLibrary.html">L_TTSTokenConfigLibrary</a></li>
<li><a href="src/libraries/L_TTSwapUINT256.sol/library.L_TTSwapUINT256Library.html">L_TTSwapUINT256Library</a></li>
<li><a href="src/libraries/L_TTSwapUINT256.sol/function.toTTSwapUINT256.html">toTTSwapUINT256</a></li>
<li><a href="src/libraries/L_TTSwapUINT256.sol/function.addsub.html">addsub</a></li>
<li><a href="src/libraries/L_TTSwapUINT256.sol/function.toInt128.html">toInt128</a></li>
<li><a href="src/libraries/L_TTSwapUINT256.sol/function.mulDiv.html">mulDiv</a></li>
<li><a href="src/libraries/L_TTSwapUINT256.sol/function.lowerprice.html">lowerprice</a></li>
<li><a href="src/libraries/L_TTSwapUINT256.sol/function.sub.html">sub</a></li>
<li><a href="src/libraries/L_TTSwapUINT256.sol/function.add.html">add</a></li>
<li><a href="src/libraries/L_TTSwapUINT256.sol/function.subadd.html">subadd</a></li>
<li><a href="src/libraries/L_TakeLimitPriceOrder.sol/library.L_TakeLimitPriceOrder.html">L_TakeLimitPriceOrder</a></li>
<li><a href="src/libraries/L_UserConfig.sol/library.L_UserConfigLibrary.html">L_UserConfigLibrary</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="l_currencylibrary"><a class="header" href="#l_currencylibrary">L_CurrencyLibrary</a></h1>
<p><em>This library allows for transferring and holding native tokens and ERC20 tokens</em></p>
<h2 id="state-variables"><a class="header" href="#state-variables">State Variables</a></h2>
<h3 id="native"><a class="header" href="#native">NATIVE</a></h3>
<pre><code class="language-solidity">address public constant NATIVE = address(1);
</code></pre>
<h3 id="simplepermit"><a class="header" href="#simplepermit">simplepermit</a></h3>
<pre><code class="language-solidity">address public constant simplepermit = address(2);
</code></pre>
<h2 id="functions-9"><a class="header" href="#functions-9">Functions</a></h2>
<h3 id="balanceof"><a class="header" href="#balanceof">balanceof</a></h3>
<pre><code class="language-solidity">function balanceof(address token, address _sender) internal view returns (uint256 amount);
</code></pre>
<h3 id="transferfrom-3"><a class="header" href="#transferfrom-3">transferFrom</a></h3>
<pre><code class="language-solidity">function transferFrom(address token, address from, address to, uint256 amount, bytes memory detail) internal;
</code></pre>
<h3 id="transferfrom-4"><a class="header" href="#transferfrom-4">transferFrom</a></h3>
<pre><code class="language-solidity">function transferFrom(address token, address from, uint256 amount, bytes memory trandata) internal;
</code></pre>
<h3 id="safetransfer"><a class="header" href="#safetransfer">safeTransfer</a></h3>
<pre><code class="language-solidity">function safeTransfer(address currency, address to, uint256 amount) internal;
</code></pre>
<h3 id="isnative"><a class="header" href="#isnative">isNative</a></h3>
<pre><code class="language-solidity">function isNative(address currency) internal pure returns (bool);
</code></pre>
<h2 id="errors-4"><a class="header" href="#errors-4">Errors</a></h2>
<h3 id="nativetransferfailed"><a class="header" href="#nativetransferfailed">NativeTransferFailed</a></h3>
<p>Thrown when a native transfer fails</p>
<pre><code class="language-solidity">error NativeTransferFailed();
</code></pre>
<h3 id="erc20transferfailed"><a class="header" href="#erc20transferfailed">ERC20TransferFailed</a></h3>
<p>Thrown when an ERC20 transfer fails</p>
<pre><code class="language-solidity">error ERC20TransferFailed();
</code></pre>
<h2 id="structs-4"><a class="header" href="#structs-4">Structs</a></h2>
<h3 id="simplepermit-1"><a class="header" href="#simplepermit-1">SimplePermit</a></h3>
<pre><code class="language-solidity">struct SimplePermit {
    uint8 transfertype;
    bytes detail;
}
</code></pre>
<h3 id="s_permit-1"><a class="header" href="#s_permit-1">S_Permit</a></h3>
<pre><code class="language-solidity">struct S_Permit {
    address owner;
    address spender;
    uint256 value;
    uint256 deadline;
    uint8 v;
    bytes32 r;
    bytes32 s;
}
</code></pre>
<h3 id="s_transferdata"><a class="header" href="#s_transferdata">S_transferData</a></h3>
<pre><code class="language-solidity">struct S_transferData {
    uint8 transfertype;
    bytes transdata;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="l_good"><a class="header" href="#l_good">L_Good</a></h1>
<p>This library provides functions for investing, disinvesting, swapping, and fee management for goods</p>
<p><em>A library for managing goods in a decentralized marketplace</em></p>
<h2 id="functions-10"><a class="header" href="#functions-10">Functions</a></h2>
<h3 id="updategoodconfig-1"><a class="header" href="#updategoodconfig-1">updateGoodConfig</a></h3>
<p>Update the good configuration</p>
<p><em>Preserves the top 33 bits of the existing config and updates the rest</em></p>
<pre><code class="language-solidity">function updateGoodConfig(S_GoodState storage _self, uint256 _goodConfig) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_self</code></td><td><code>S_GoodState</code></td><td>Storage pointer to the good state</td></tr>
<tr><td><code>_goodConfig</code></td><td><code>uint256</code></td><td>New configuration value to be applied</td></tr>
</tbody></table>
</div>
<h3 id="init"><a class="header" href="#init">init</a></h3>
<p>Initialize the good state</p>
<p><em>Sets up the initial state, configuration, and owner of the good</em></p>
<pre><code class="language-solidity">function init(S_GoodState storage self, uint256 _init, uint256 _goodConfig) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>self</code></td><td><code>S_GoodState</code></td><td>Storage pointer to the good state</td></tr>
<tr><td><code>_init</code></td><td><code>uint256</code></td><td>Initial balance state</td></tr>
<tr><td><code>_goodConfig</code></td><td><code>uint256</code></td><td>Configuration of the good</td></tr>
</tbody></table>
</div>
<h3 id="swapcompute1"><a class="header" href="#swapcompute1">swapCompute1</a></h3>
<p>Compute the swap result from good1 to good2</p>
<p><em>Implements a complex swap algorithm considering price limits, fees, and minimum swap amounts</em></p>
<pre><code class="language-solidity">function swapCompute1(swapCache memory _stepCache, uint256 _limitPrice) internal pure;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_stepCache</code></td><td><code>swapCache</code></td><td>A cache structure containing swap state and configurations</td></tr>
<tr><td><code>_limitPrice</code></td><td><code>uint256</code></td><td>The price limit for the swap</td></tr>
</tbody></table>
</div>
<h3 id="swapcompute2"><a class="header" href="#swapcompute2">swapCompute2</a></h3>
<p>Compute the swap result from good2 to good1</p>
<p><em>Implements a complex swap algorithm considering price limits, fees, and minimum swap amounts</em></p>
<pre><code class="language-solidity">function swapCompute2(swapCache memory _stepCache, uint256 _limitPrice) internal pure;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_stepCache</code></td><td><code>swapCache</code></td><td>A cache structure containing swap state and configurations</td></tr>
<tr><td><code>_limitPrice</code></td><td><code>uint256</code></td><td>The price limit for the swap</td></tr>
</tbody></table>
</div>
<h3 id="swapcommit"><a class="header" href="#swapcommit">swapCommit</a></h3>
<p>Commit the result of a swap operation to the good's state</p>
<p><em>Updates the current state and fee state of the good after a swap</em></p>
<pre><code class="language-solidity">function swapCommit(S_GoodState storage _self, uint256 _swapstate, uint128 _fee) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_self</code></td><td><code>S_GoodState</code></td><td>Storage pointer to the good state</td></tr>
<tr><td><code>_swapstate</code></td><td><code>uint256</code></td><td>The new state of the good after the swap</td></tr>
<tr><td><code>_fee</code></td><td><code>uint128</code></td><td>The fee amount collected from the swap</td></tr>
</tbody></table>
</div>
<h3 id="investgood-1"><a class="header" href="#investgood-1">investGood</a></h3>
<p>Invest in a good</p>
<p><em>Calculates fees, updates states, and returns investment results</em></p>
<pre><code class="language-solidity">function investGood(S_GoodState storage _self, uint128 _invest, S_GoodInvestReturn memory investResult_) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_self</code></td><td><code>S_GoodState</code></td><td>Storage pointer to the good state</td></tr>
<tr><td><code>_invest</code></td><td><code>uint128</code></td><td>Amount to invest</td></tr>
<tr><td><code>investResult_</code></td><td><code>S_GoodInvestReturn</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="disinvestgood"><a class="header" href="#disinvestgood">disinvestGood</a></h3>
<p>Disinvest from a good and potentially its associated value good</p>
<p><em>This function handles the complex process of disinvesting from a good, including fee calculations and state updates</em></p>
<pre><code class="language-solidity">function disinvestGood(
    S_GoodState storage _self,
    S_GoodState storage _valueGoodState,
    S_ProofState storage _investProof,
    S_GoodDisinvestParam memory _params
)
    internal
    returns (
        S_GoodDisinvestReturn memory normalGoodResult1_,
        S_GoodDisinvestReturn memory valueGoodResult2_,
        uint128 disinvestvalue
    );
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_self</code></td><td><code>S_GoodState</code></td><td>Storage pointer to the main good state</td></tr>
<tr><td><code>_valueGoodState</code></td><td><code>S_GoodState</code></td><td>Storage pointer to the value good state (if applicable)</td></tr>
<tr><td><code>_investProof</code></td><td><code>S_ProofState</code></td><td>Storage pointer to the investment proof state</td></tr>
<tr><td><code>_params</code></td><td><code>S_GoodDisinvestParam</code></td><td>Struct containing disinvestment parameters</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>normalGoodResult1_</code></td><td><code>S_GoodDisinvestReturn</code></td><td>Struct containing disinvestment results for the main good</td></tr>
<tr><td><code>valueGoodResult2_</code></td><td><code>S_GoodDisinvestReturn</code></td><td>Struct containing disinvestment results for the value good (if applicable)</td></tr>
<tr><td><code>disinvestvalue</code></td><td><code>uint128</code></td><td>The total value being disinvested</td></tr>
</tbody></table>
</div>
<h3 id="collectgoodfee"><a class="header" href="#collectgoodfee">collectGoodFee</a></h3>
<p>Collect fees for a good and its associated value good</p>
<p><em>This function handles the process of collecting fees for a good and its associated value good, if applicable</em></p>
<pre><code class="language-solidity">function collectGoodFee(
    S_GoodState storage _self,
    S_GoodState storage _valuegood,
    S_ProofState storage _investProof,
    address _gater,
    address _referral,
    uint256 _marketconfig,
    address _marketcreator
) internal returns (uint256 profit);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_self</code></td><td><code>S_GoodState</code></td><td>Storage pointer to the main good state</td></tr>
<tr><td><code>_valuegood</code></td><td><code>S_GoodState</code></td><td>Storage pointer to the value good state (if applicable)</td></tr>
<tr><td><code>_investProof</code></td><td><code>S_ProofState</code></td><td>Storage pointer to the investment proof state</td></tr>
<tr><td><code>_gater</code></td><td><code>address</code></td><td>The address of the gater (if applicable)</td></tr>
<tr><td><code>_referral</code></td><td><code>address</code></td><td>The address of the referrer (if applicable)</td></tr>
<tr><td><code>_marketconfig</code></td><td><code>uint256</code></td><td>The market configuration</td></tr>
<tr><td><code>_marketcreator</code></td><td><code>address</code></td><td>The address of the market creator</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>profit</code></td><td><code>uint256</code></td><td>The total profit collected</td></tr>
</tbody></table>
</div>
<h3 id="allocatefee"><a class="header" href="#allocatefee">allocateFee</a></h3>
<p>Allocate fees to various parties</p>
<p><em>This function handles the allocation of fees to the market creator, gater, referrer, and liquidity providers</em></p>
<pre><code class="language-solidity">function allocateFee(
    S_GoodState storage _self,
    uint128 _profit,
    uint256 _marketconfig,
    address _gater,
    address _referral,
    address _marketcreator,
    uint128 _divestQuantity
) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_self</code></td><td><code>S_GoodState</code></td><td>Storage pointer to the good state</td></tr>
<tr><td><code>_profit</code></td><td><code>uint128</code></td><td>The total profit to be allocated</td></tr>
<tr><td><code>_marketconfig</code></td><td><code>uint256</code></td><td>The market configuration</td></tr>
<tr><td><code>_gater</code></td><td><code>address</code></td><td>The address of the gater (if applicable)</td></tr>
<tr><td><code>_referral</code></td><td><code>address</code></td><td>The address of the referrer (if applicable)</td></tr>
<tr><td><code>_marketcreator</code></td><td><code>address</code></td><td>The address of the market creator</td></tr>
<tr><td><code>_divestQuantity</code></td><td><code>uint128</code></td><td>The quantity of goods being divested (if applicable)</td></tr>
</tbody></table>
</div>
<h3 id="modifygoodconfig-1"><a class="header" href="#modifygoodconfig-1">modifyGoodConfig</a></h3>
<p>Modify the good configuration</p>
<p><em>This function modifies the good configuration by preserving the top 33 bits and updating the rest</em></p>
<pre><code class="language-solidity">function modifyGoodConfig(S_GoodState storage _self, uint256 _goodconfig) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_self</code></td><td><code>S_GoodState</code></td><td>Storage pointer to the good state</td></tr>
<tr><td><code>_goodconfig</code></td><td><code>uint256</code></td><td>The new configuration value to be applied</td></tr>
</tbody></table>
</div>
<h3 id="fillfee"><a class="header" href="#fillfee">fillFee</a></h3>
<p>fill good</p>
<p><em>Preserves the top 33 bits of the existing config and updates the rest</em></p>
<pre><code class="language-solidity">function fillFee(S_GoodState storage _self, uint256 _fee) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_self</code></td><td><code>S_GoodState</code></td><td>Storage pointer to the good state</td></tr>
<tr><td><code>_fee</code></td><td><code>uint256</code></td><td>New configuration value to be applied</td></tr>
</tbody></table>
</div>
<h2 id="structs-5"><a class="header" href="#structs-5">Structs</a></h2>
<h3 id="swapcache"><a class="header" href="#swapcache">swapCache</a></h3>
<p><em>Struct to cache swap-related data</em></p>
<pre><code class="language-solidity">struct swapCache {
    uint128 remainQuantity;
    uint128 outputQuantity;
    uint128 feeQuantity;
    uint128 swapvalue;
    uint256 good1currentState;
    uint256 good1config;
    uint256 good2currentState;
    uint256 good2config;
}
</code></pre>
<h3 id="s_goodinvestreturn"><a class="header" href="#s_goodinvestreturn">S_GoodInvestReturn</a></h3>
<p>Struct to hold the return values of an investment operation</p>
<p><em>Used to store and return the results of investing in a good</em></p>
<pre><code class="language-solidity">struct S_GoodInvestReturn {
    uint128 actualFeeQuantity;
    uint128 constructFeeQuantity;
    uint128 actualInvestValue;
    uint128 actualInvestQuantity;
}
</code></pre>
<h3 id="s_gooddisinvestreturn"><a class="header" href="#s_gooddisinvestreturn">S_GoodDisinvestReturn</a></h3>
<p>Struct to hold the return values of a disinvestment operation</p>
<p><em>Used to store and return the results of disinvesting from a good</em></p>
<pre><code class="language-solidity">struct S_GoodDisinvestReturn {
    uint128 profit;
    uint128 actual_fee;
    uint128 actualDisinvestQuantity;
}
</code></pre>
<h3 id="s_gooddisinvestparam"><a class="header" href="#s_gooddisinvestparam">S_GoodDisinvestParam</a></h3>
<p>Struct to hold the parameters for a disinvestment operation</p>
<p><em>Used to pass multiple parameters to the disinvestGood function</em></p>
<pre><code class="language-solidity">struct S_GoodDisinvestParam {
    uint128 _goodQuantity;
    address _gater;
    address _referral;
    uint256 _marketconfig;
    address _marketcreator;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="l_goodidlibrary"><a class="header" href="#l_goodidlibrary">L_GoodIdLibrary</a></h1>
<h2 id="functions-11"><a class="header" href="#functions-11">Functions</a></h2>
<h3 id="toid"><a class="header" href="#toid">toId</a></h3>
<p>Convert a good key to an ID</p>
<p><em>This function converts a good key to a unique ID using keccak256 hashing</em></p>
<pre><code class="language-solidity">function toId(S_GoodKey memory goodKey) internal pure returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>goodKey</code></td><td><code>S_GoodKey</code></td><td>The good key to be converted</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The unique ID of the good</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="l_goodconfiglibrary"><a class="header" href="#l_goodconfiglibrary">L_GoodConfigLibrary</a></h1>
<p>A library for managing and retrieving configuration data for goods</p>
<p><em>This library uses bitwise operations and assembly for efficient storage and retrieval of configuration data</em></p>
<h2 id="functions-12"><a class="header" href="#functions-12">Functions</a></h2>
<h3 id="isvaluegood"><a class="header" href="#isvaluegood">isvaluegood</a></h3>
<p>Check if the good is a value good</p>
<pre><code class="language-solidity">function isvaluegood(uint256 config) internal pure returns (bool a);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>config</code></td><td><code>uint256</code></td><td>The configuration value</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>bool</code></td><td>True if it's a value good, false otherwise</td></tr>
</tbody></table>
</div>
<h3 id="isnormalgood"><a class="header" href="#isnormalgood">isnormalgood</a></h3>
<p>Check if the good is a normal good</p>
<pre><code class="language-solidity">function isnormalgood(uint256 config) internal pure returns (bool a);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>config</code></td><td><code>uint256</code></td><td>The configuration value</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>bool</code></td><td>True if it's a normal good, false otherwise</td></tr>
</tbody></table>
</div>
<h3 id="getflashfee"><a class="header" href="#getflashfee">getFlashFee</a></h3>
<p>Calculate the investment fee for a given amount</p>
<pre><code class="language-solidity">function getFlashFee(uint256 config, uint256 amount) internal pure returns (uint256 a);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>config</code></td><td><code>uint256</code></td><td>The configuration value</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The investment amount</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>uint256</code></td><td>The calculated investment fee</td></tr>
</tbody></table>
</div>
<h3 id="getinvestfee"><a class="header" href="#getinvestfee">getInvestFee</a></h3>
<p>Calculate the investment fee for a given amount</p>
<pre><code class="language-solidity">function getInvestFee(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>config</code></td><td><code>uint256</code></td><td>The configuration value</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The investment amount</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>uint128</code></td><td>The calculated investment fee</td></tr>
</tbody></table>
</div>
<h3 id="getinvestfullfee"><a class="header" href="#getinvestfullfee">getInvestFullFee</a></h3>
<pre><code class="language-solidity">function getInvestFullFee(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<h3 id="getdisinvestfee"><a class="header" href="#getdisinvestfee">getDisinvestFee</a></h3>
<p>Calculate the disinvestment fee for a given amount</p>
<pre><code class="language-solidity">function getDisinvestFee(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>config</code></td><td><code>uint256</code></td><td>The configuration value</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The disinvestment amount</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>uint128</code></td><td>The calculated disinvestment fee</td></tr>
</tbody></table>
</div>
<h3 id="getbuyfee"><a class="header" href="#getbuyfee">getBuyFee</a></h3>
<p>Calculate the buying fee for a given amount</p>
<pre><code class="language-solidity">function getBuyFee(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>config</code></td><td><code>uint256</code></td><td>The configuration value</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The buying amount</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>uint128</code></td><td>The calculated buying fee</td></tr>
</tbody></table>
</div>
<h3 id="getsellfee"><a class="header" href="#getsellfee">getSellFee</a></h3>
<p>Calculate the selling fee for a given amount</p>
<pre><code class="language-solidity">function getSellFee(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>config</code></td><td><code>uint256</code></td><td>The configuration value</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The selling amount</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>uint128</code></td><td>The calculated selling fee</td></tr>
</tbody></table>
</div>
<h3 id="getswapchips"><a class="header" href="#getswapchips">getSwapChips</a></h3>
<p>Get the swap chips for a given amount</p>
<pre><code class="language-solidity">function getSwapChips(uint256 config, uint128 amount) internal pure returns (uint128);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>config</code></td><td><code>uint256</code></td><td>The configuration value</td></tr>
<tr><td><code>amount</code></td><td><code>uint128</code></td><td>The amount</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint128</code></td><td>The swap chips for the given amount</td></tr>
</tbody></table>
</div>
<h3 id="getdisinvestchips"><a class="header" href="#getdisinvestchips">getDisinvestChips</a></h3>
<p>Get the disinvestment chips for a given amount</p>
<pre><code class="language-solidity">function getDisinvestChips(uint256 config, uint128 amount) internal pure returns (uint128);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>config</code></td><td><code>uint256</code></td><td>The configuration value</td></tr>
<tr><td><code>amount</code></td><td><code>uint128</code></td><td>The amount</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint128</code></td><td>The disinvestment chips for the given amount</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="l_lock"><a class="header" href="#l_lock">L_Lock</a></h1>
<p>This is a temporary library that allows us to use transient storage (tstore/tload)
TODO: This library can be deleted when we have the transient keyword support in solidity.</p>
<h2 id="state-variables-1"><a class="header" href="#state-variables-1">State Variables</a></h2>
<h3 id="lock_slot"><a class="header" href="#lock_slot">LOCK_SLOT</a></h3>
<pre><code class="language-solidity">bytes32 constant LOCK_SLOT = 0xcfdbe78f31bc5efa50605e8b11a7b6843971370ea97eb24de6e1a1eb9d235645;
</code></pre>
<h2 id="functions-13"><a class="header" href="#functions-13">Functions</a></h2>
<h3 id="set"><a class="header" href="#set">set</a></h3>
<pre><code class="language-solidity">function set(address locker) internal;
</code></pre>
<h3 id="get"><a class="header" href="#get">get</a></h3>
<pre><code class="language-solidity">function get() internal view returns (address locker);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="l_marketconfiglibrary"><a class="header" href="#l_marketconfiglibrary">L_MarketConfigLibrary</a></h1>
<p>Library for managing and calculating various fee configurations for a market</p>
<h2 id="functions-14"><a class="header" href="#functions-14">Functions</a></h2>
<h3 id="getliquidfee"><a class="header" href="#getliquidfee">getLiquidFee</a></h3>
<p>Calculate the liquidity provider fee amount</p>
<pre><code class="language-solidity">function getLiquidFee(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>config</code></td><td><code>uint256</code></td><td>The market configuration</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The total amount to calculate the fee from</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>uint128</code></td><td>The calculated liquidity provider fee amount</td></tr>
</tbody></table>
</div>
<h3 id="getsellerfee"><a class="header" href="#getsellerfee">getSellerFee</a></h3>
<p>Calculate the seller fee amount</p>
<pre><code class="language-solidity">function getSellerFee(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>config</code></td><td><code>uint256</code></td><td>The market configuration</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The total amount to calculate the fee from</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>uint128</code></td><td>The calculated seller fee amount</td></tr>
</tbody></table>
</div>
<h3 id="getgaterfee"><a class="header" href="#getgaterfee">getGaterFee</a></h3>
<p>Calculate the gater fee amount</p>
<pre><code class="language-solidity">function getGaterFee(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>config</code></td><td><code>uint256</code></td><td>The market configuration</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The total amount to calculate the fee from</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>uint128</code></td><td>The calculated gater fee amount</td></tr>
</tbody></table>
</div>
<h3 id="getreferfee"><a class="header" href="#getreferfee">getReferFee</a></h3>
<p>Calculate the referrer fee amount</p>
<pre><code class="language-solidity">function getReferFee(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>config</code></td><td><code>uint256</code></td><td>The market configuration</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The total amount to calculate the fee from</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>uint128</code></td><td>The calculated referrer fee amount</td></tr>
</tbody></table>
</div>
<h3 id="getcustomerfee"><a class="header" href="#getcustomerfee">getCustomerFee</a></h3>
<p>Calculate the customer fee amount</p>
<pre><code class="language-solidity">function getCustomerFee(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>config</code></td><td><code>uint256</code></td><td>The market configuration</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The total amount to calculate the fee from</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>uint128</code></td><td>The calculated customer fee amount</td></tr>
</tbody></table>
</div>
<h3 id="getplatfee128"><a class="header" href="#getplatfee128">getPlatFee128</a></h3>
<p>Calculate the platform fee amount and return it as a uint128</p>
<pre><code class="language-solidity">function getPlatFee128(uint256 config, uint256 amount) internal pure returns (uint128 a);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>config</code></td><td><code>uint256</code></td><td>The market configuration</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The total amount to calculate the fee from</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>uint128</code></td><td>The calculated platform fee amount as a uint128</td></tr>
</tbody></table>
</div>
<h3 id="getplatfee256"><a class="header" href="#getplatfee256">getPlatFee256</a></h3>
<p>Calculate the platform fee amount and return it as a uint256</p>
<pre><code class="language-solidity">function getPlatFee256(uint256 config, uint256 amount) internal pure returns (uint256 a);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>config</code></td><td><code>uint256</code></td><td>The market configuration</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The total amount to calculate the fee from</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>uint256</code></td><td>The calculated platform fee amount as a uint256</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="l_orderstatus"><a class="header" href="#l_orderstatus">L_OrderStatus</a></h1>
<p><em>Library for managing uint256 to bool mapping in a compact and efficient way, providing the keys are sequential.
Largely inspired by Uniswap's https://github.com/Uniswap/merkle-distributor/blob/master/contracts/MerkleDistributor.sol[merkle-distributor].</em></p>
<h2 id="functions-15"><a class="header" href="#functions-15">Functions</a></h2>
<h3 id="get-1"><a class="header" href="#get-1">get</a></h3>
<p><em>Returns whether the bit at <code>index</code> is set.</em></p>
<pre><code class="language-solidity">function get(mapping(uint256 =&gt; uint256) storage _orderStatus, uint256 index) internal view returns (bool);
</code></pre>
<h3 id="setto"><a class="header" href="#setto">setTo</a></h3>
<p><em>Sets the bit at <code>index</code> to the boolean <code>value</code>.</em></p>
<pre><code class="language-solidity">function setTo(mapping(uint256 =&gt; uint256) storage _orderStatus, uint256 index, bool value) internal;
</code></pre>
<h3 id="set-1"><a class="header" href="#set-1">set</a></h3>
<p><em>Sets the bit at <code>index</code>.</em></p>
<pre><code class="language-solidity">function set(mapping(uint256 =&gt; uint256) storage _orderStatus, uint256 index) internal;
</code></pre>
<h3 id="unset"><a class="header" href="#unset">unset</a></h3>
<p><em>Unsets the bit at <code>index</code>.</em></p>
<pre><code class="language-solidity">function unset(mapping(uint256 =&gt; uint256) storage _orderStatus, uint256 index) internal;
</code></pre>
<h3 id="getvalidorderid"><a class="header" href="#getvalidorderid">getValidOrderId</a></h3>
<pre><code class="language-solidity">function getValidOrderId(mapping(uint256 =&gt; uint256) storage _orderStatus, uint256 index, uint256 _maxslot)
    internal
    returns (uint256 orderid);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="l_proof"><a class="header" href="#l_proof">L_Proof</a></h1>
<h2 id="functions-16"><a class="header" href="#functions-16">Functions</a></h2>
<h3 id="updateinvest"><a class="header" href="#updateinvest">updateInvest</a></h3>
<p><em>Represents the state of a proof</em></p>
<p><em>Updates the investment state of a proof</em></p>
<pre><code class="language-solidity">function updateInvest(
    S_ProofState storage _self,
    address _currenctgood,
    address _valuegood,
    uint256 _state,
    uint256 _invest,
    uint256 _valueinvest
) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_self</code></td><td><code>S_ProofState</code></td><td>The proof state to update</td></tr>
<tr><td><code>_currenctgood</code></td><td><code>address</code></td><td>The current good value</td></tr>
<tr><td><code>_valuegood</code></td><td><code>address</code></td><td>The value good</td></tr>
<tr><td><code>_state</code></td><td><code>uint256</code></td><td>amount0 (first 128 bits) represents total value</td></tr>
<tr><td><code>_invest</code></td><td><code>uint256</code></td><td>amount0 (first 128 bits) represents invest normal good quantity, amount1 (last 128 bits) represents normal good constuct fee when investing</td></tr>
<tr><td><code>_valueinvest</code></td><td><code>uint256</code></td><td>amount0 (first 128 bits) represents invest value good quantity, amount1 (last 128 bits) represents value good constuct fee when investing</td></tr>
</tbody></table>
</div>
<h3 id="burnproof"><a class="header" href="#burnproof">burnProof</a></h3>
<p><em>Burns a portion of the proof</em></p>
<pre><code class="language-solidity">function burnProof(S_ProofState storage _self, uint128 _value) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_self</code></td><td><code>S_ProofState</code></td><td>The proof state to update</td></tr>
<tr><td><code>_value</code></td><td><code>uint128</code></td><td>The amount to burn</td></tr>
</tbody></table>
</div>
<h3 id="collectprooffee"><a class="header" href="#collectprooffee">collectProofFee</a></h3>
<p><em>Collects fees for the proof</em></p>
<pre><code class="language-solidity">function collectProofFee(S_ProofState storage _self, uint256 profit) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_self</code></td><td><code>S_ProofState</code></td><td>The proof state to update</td></tr>
<tr><td><code>profit</code></td><td><code>uint256</code></td><td>The profit to add</td></tr>
</tbody></table>
</div>
<h3 id="conbine"><a class="header" href="#conbine">conbine</a></h3>
<p><em>Combines two proof states</em></p>
<pre><code class="language-solidity">function conbine(S_ProofState storage _self, S_ProofState storage _get) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_self</code></td><td><code>S_ProofState</code></td><td>The proof state to update</td></tr>
<tr><td><code>_get</code></td><td><code>S_ProofState</code></td><td>The proof state to combine with</td></tr>
</tbody></table>
</div>
<h3 id="stake-1"><a class="header" href="#stake-1">stake</a></h3>
<p><em>Stakes a certain amount of proof value</em></p>
<pre><code class="language-solidity">function stake(address contractaddress, address to, uint128 proofvalue) internal returns (uint128);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>contractaddress</code></td><td><code>address</code></td><td>The address of the staking contract</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>The address to stake for</td></tr>
<tr><td><code>proofvalue</code></td><td><code>uint128</code></td><td>The amount of proof value to stake</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint128</code></td><td>The staked amount</td></tr>
</tbody></table>
</div>
<h3 id="unstake-1"><a class="header" href="#unstake-1">unstake</a></h3>
<p><em>Unstakes a certain amount of proof value</em></p>
<pre><code class="language-solidity">function unstake(address contractaddress, address from, uint128 divestvalue) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>contractaddress</code></td><td><code>address</code></td><td>The address of the staking contract</td></tr>
<tr><td><code>from</code></td><td><code>address</code></td><td>The address to unstake from</td></tr>
<tr><td><code>divestvalue</code></td><td><code>uint128</code></td><td>The amount of proof value to unstake</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="l_proofkeylibrary"><a class="header" href="#l_proofkeylibrary">L_ProofKeyLibrary</a></h1>
<h2 id="functions-17"><a class="header" href="#functions-17">Functions</a></h2>
<h3 id="tokey"><a class="header" href="#tokey">toKey</a></h3>
<pre><code class="language-solidity">function toKey(S_ProofKey memory proofKey) internal pure returns (uint256);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="l_proofidlibrary"><a class="header" href="#l_proofidlibrary">L_ProofIdLibrary</a></h1>
<h2 id="functions-18"><a class="header" href="#functions-18">Functions</a></h2>
<h3 id="toid-1"><a class="header" href="#toid-1">toId</a></h3>
<pre><code class="language-solidity">function toId(uint256 proofkey) internal view returns (uint256);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="l_ttstokenconfiglibrary"><a class="header" href="#l_ttstokenconfiglibrary">L_TTSTokenConfigLibrary</a></h1>
<p>A library for handling TTS token configurations</p>
<h2 id="functions-19"><a class="header" href="#functions-19">Functions</a></h2>
<h3 id="ismain"><a class="header" href="#ismain">ismain</a></h3>
<p>Checks if the given configuration represents a main item</p>
<p><em>Uses assembly to perform a bitwise right shift operation</em></p>
<pre><code class="language-solidity">function ismain(uint256 config) internal pure returns (bool a);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>config</code></td><td><code>uint256</code></td><td>The configuration value to check</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>bool</code></td><td>True if the configuration represents a main item, false otherwise</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="l_ttswapuint256library"><a class="header" href="#l_ttswapuint256library">L_TTSwapUINT256Library</a></h1>
<p>A library for operations on T_BalanceUINT256</p>
<h2 id="functions-20"><a class="header" href="#functions-20">Functions</a></h2>
<h3 id="amount0"><a class="header" href="#amount0">amount0</a></h3>
<p>Extracts the first 128-bit amount from a T_BalanceUINT256</p>
<pre><code class="language-solidity">function amount0(uint256 balanceDelta) internal pure returns (uint128 _amount0);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>balanceDelta</code></td><td><code>uint256</code></td><td>The T_BalanceUINT256 to extract from</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_amount0</code></td><td><code>uint128</code></td><td>The extracted first 128-bit amount</td></tr>
</tbody></table>
</div>
<h3 id="amount1"><a class="header" href="#amount1">amount1</a></h3>
<p>Extracts the second 128-bit amount from a T_BalanceUINT256</p>
<pre><code class="language-solidity">function amount1(uint256 balanceDelta) internal pure returns (uint128 _amount1);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>balanceDelta</code></td><td><code>uint256</code></td><td>The T_BalanceUINT256 to extract from</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_amount1</code></td><td><code>uint128</code></td><td>The extracted second 128-bit amount</td></tr>
</tbody></table>
</div>
<h3 id="getamount0fromamount1"><a class="header" href="#getamount0fromamount1">getamount0fromamount1</a></h3>
<p>Calculates amount0 based on a given amount1 and the ratio in balanceDelta</p>
<pre><code class="language-solidity">function getamount0fromamount1(uint256 balanceDelta, uint128 amount1delta) internal pure returns (uint128 _amount0);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>balanceDelta</code></td><td><code>uint256</code></td><td>The T_BalanceUINT256 containing the ratio</td></tr>
<tr><td><code>amount1delta</code></td><td><code>uint128</code></td><td>The amount1 to base the calculation on</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_amount0</code></td><td><code>uint128</code></td><td>The calculated amount0</td></tr>
</tbody></table>
</div>
<h3 id="getamount1fromamount0"><a class="header" href="#getamount1fromamount0">getamount1fromamount0</a></h3>
<p>Calculates amount1 based on a given amount0 and the ratio in balanceDelta</p>
<pre><code class="language-solidity">function getamount1fromamount0(uint256 balanceDelta, uint128 amount0delta) internal pure returns (uint128 _amount1);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>balanceDelta</code></td><td><code>uint256</code></td><td>The T_BalanceUINT256 containing the ratio</td></tr>
<tr><td><code>amount0delta</code></td><td><code>uint128</code></td><td>The amount0 to base the calculation on</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_amount1</code></td><td><code>uint128</code></td><td>The calculated amount1</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="tottswapuint256"><a class="header" href="#tottswapuint256">toTTSwapUINT256</a></h1>
<p>Converts two uint128 values into a T_BalanceUINT256</p>
<pre><code class="language-solidity">function toTTSwapUINT256(uint128 _amount0, uint128 _amount1) pure returns (uint256 balanceDelta);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_amount0</code></td><td><code>uint128</code></td><td>The first 128-bit amount</td></tr>
<tr><td><code>_amount1</code></td><td><code>uint128</code></td><td>The second 128-bit amount</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>balanceDelta</code></td><td><code>uint256</code></td><td>The resulting T_BalanceUINT256</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="addsub"><a class="header" href="#addsub">addsub</a></h1>
<p>Adds the first components and subtracts the second components of two T_BalanceUINT256 values</p>
<pre><code class="language-solidity">function addsub(uint256 a, uint256 b) pure returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>uint256</code></td><td>The first T_BalanceUINT256</td></tr>
<tr><td><code>b</code></td><td><code>uint256</code></td><td>The second T_BalanceUINT256</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The result of (a0 + b0, a1 - b1) as a T_BalanceUINT256</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="toint128"><a class="header" href="#toint128">toInt128</a></h1>
<p>Safely converts a uint256 to a uint128</p>
<pre><code class="language-solidity">function toInt128(uint256 a) pure returns (uint128);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>uint256</code></td><td>The uint256 value to convert</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint128</code></td><td>The converted uint128 value, or 0 if overflow</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="muldiv"><a class="header" href="#muldiv">mulDiv</a></h1>
<p>Performs a multiplication followed by a division</p>
<pre><code class="language-solidity">function mulDiv(uint256 config, uint256 amount, uint256 domitor) pure returns (uint128 a);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>config</code></td><td><code>uint256</code></td><td>The multiplicand</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The multiplier</td></tr>
<tr><td><code>domitor</code></td><td><code>uint256</code></td><td>The divisor</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>uint128</code></td><td>The result as a uint128</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="lowerprice"><a class="header" href="#lowerprice">lowerprice</a></h1>
<p>Compares the prices of three T_BalanceUINT256 values</p>
<pre><code class="language-solidity">function lowerprice(uint256 a, uint256 b, uint256 c) pure returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>uint256</code></td><td>The first T_BalanceUINT256</td></tr>
<tr><td><code>b</code></td><td><code>uint256</code></td><td>The second T_BalanceUINT256</td></tr>
<tr><td><code>c</code></td><td><code>uint256</code></td><td>The third T_BalanceUINT256</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>True if the price of a is lower than the prices of b and c, false otherwise</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="sub"><a class="header" href="#sub">sub</a></h1>
<p>Subtracts two T_BalanceUINT256 values</p>
<pre><code class="language-solidity">function sub(uint256 a, uint256 b) pure returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>uint256</code></td><td>The first T_BalanceUINT256</td></tr>
<tr><td><code>b</code></td><td><code>uint256</code></td><td>The second T_BalanceUINT256</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The difference of a and b as a T_BalanceUINT256</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="add"><a class="header" href="#add">add</a></h1>
<p>Adds two T_BalanceUINT256 values</p>
<pre><code class="language-solidity">function add(uint256 a, uint256 b) pure returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>uint256</code></td><td>The first T_BalanceUINT256</td></tr>
<tr><td><code>b</code></td><td><code>uint256</code></td><td>The second T_BalanceUINT256</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The sum of a and b as a T_BalanceUINT256</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="subadd"><a class="header" href="#subadd">subadd</a></h1>
<p>Subtracts the first components and adds the second components of two T_BalanceUINT256 values</p>
<pre><code class="language-solidity">function subadd(uint256 a, uint256 b) pure returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>uint256</code></td><td>The first T_BalanceUINT256</td></tr>
<tr><td><code>b</code></td><td><code>uint256</code></td><td>The second T_BalanceUINT256</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The result of (a0 - b0, a1 + b1) as a T_BalanceUINT256</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="l_takelimitpriceorder"><a class="header" href="#l_takelimitpriceorder">L_TakeLimitPriceOrder</a></h1>
<p>This library provides functions for investing, disinvesting, swapping, and fee management for goods</p>
<p><em>A library for managing goods in a decentralized marketplace</em></p>
<h2 id="functions-21"><a class="header" href="#functions-21">Functions</a></h2>
<h3 id="init_takegoodcache"><a class="header" href="#init_takegoodcache">init_takeGoodCache</a></h3>
<pre><code class="language-solidity">function init_takeGoodCache(
    S_takeGoodCache memory _stepCache,
    S_takeGoodInputPrams memory inputdata,
    uint256 _good1curstate,
    uint256 _good1config,
    uint256 _good2curstate,
    uint256 _good2config,
    uint96 _tolerance
) internal pure;
</code></pre>
<h3 id="takegoodcompute"><a class="header" href="#takegoodcompute">takeGoodCompute</a></h3>
<p>Compute the swap result from good1 to good2</p>
<p><em>Implements a complex swap algorithm considering price limits, fees, and minimum swap amounts</em></p>
<pre><code class="language-solidity">function takeGoodCompute(S_takeGoodCache memory _stepCache) internal pure;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_stepCache</code></td><td><code>S_takeGoodCache</code></td><td>A cache structure containing swap state and configurations</td></tr>
</tbody></table>
</div>
<h3 id="isoverprice"><a class="header" href="#isoverprice">isOverPrice</a></h3>
<pre><code class="language-solidity">function isOverPrice(S_takeGoodCache memory _stepCache) internal pure returns (bool);
</code></pre>
<h2 id="structs-6"><a class="header" href="#structs-6">Structs</a></h2>
<h3 id="s_takegoodcache"><a class="header" href="#s_takegoodcache">S_takeGoodCache</a></h3>
<pre><code class="language-solidity">struct S_takeGoodCache {
    uint128 remainQuantity;
    uint128 outputQuantity;
    uint128 feeQuantity;
    uint128 swapvalue;
    uint128 goodid2FeeQuantity_;
    uint128 goodid2Quantity_;
    uint256 good1currentState;
    uint256 good1config;
    uint256 good2currentState;
    uint256 good2config;
    uint256 limitPrice;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="l_userconfiglibrary"><a class="header" href="#l_userconfiglibrary">L_UserConfigLibrary</a></h1>
<p>Library for managing and calculating various fee configurations for a market</p>
<h2 id="functions-22"><a class="header" href="#functions-22">Functions</a></h2>
<h3 id="isban"><a class="header" href="#isban">isBan</a></h3>
<p>Check if the good is a value good</p>
<pre><code class="language-solidity">function isBan(uint256 config) internal pure returns (bool a);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>config</code></td><td><code>uint256</code></td><td>The configuration value</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>bool</code></td><td>True if it's a value good, false otherwise</td></tr>
</tbody></table>
</div>
<h3 id="ismarketor"><a class="header" href="#ismarketor">isMarketor</a></h3>
<p>Check if the good is a value good</p>
<pre><code class="language-solidity">function isMarketor(uint256 config) internal pure returns (bool a);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>config</code></td><td><code>uint256</code></td><td>The configuration value</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>a</code></td><td><code>bool</code></td><td>True if it's a value good, false otherwise</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="eip712"><a class="header" href="#eip712">EIP712</a></h1>
<p>EIP712 helpers for permit2</p>
<p><em>Maintains cross-chain replay protection in the event of a fork</em></p>
<p><em>Reference: https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/cryptography/EIP712.sol</em></p>
<h2 id="state-variables-2"><a class="header" href="#state-variables-2">State Variables</a></h2>
<h3 id="_cached_domain_separator"><a class="header" href="#_cached_domain_separator">_CACHED_DOMAIN_SEPARATOR</a></h3>
<pre><code class="language-solidity">bytes32 private immutable _CACHED_DOMAIN_SEPARATOR;
</code></pre>
<h3 id="_cached_chain_id"><a class="header" href="#_cached_chain_id">_CACHED_CHAIN_ID</a></h3>
<pre><code class="language-solidity">uint256 private immutable _CACHED_CHAIN_ID;
</code></pre>
<h3 id="_hashed_name"><a class="header" href="#_hashed_name">_HASHED_NAME</a></h3>
<pre><code class="language-solidity">bytes32 private constant _HASHED_NAME = keccak256("SimplePermit");
</code></pre>
<h3 id="_type_hash"><a class="header" href="#_type_hash">_TYPE_HASH</a></h3>
<pre><code class="language-solidity">bytes32 private constant _TYPE_HASH = keccak256("EIP712Domain(string name,uint256 chainId,address verifyingContract)");
</code></pre>
<h2 id="functions-23"><a class="header" href="#functions-23">Functions</a></h2>
<h3 id="constructor"><a class="header" href="#constructor">constructor</a></h3>
<pre><code class="language-solidity">constructor();
</code></pre>
<h3 id="domain_separator-1"><a class="header" href="#domain_separator-1">DOMAIN_SEPARATOR</a></h3>
<p>Returns the domain separator for the current chain.</p>
<p><em>Uses cached version if chainid and address are unchanged from construction.</em></p>
<pre><code class="language-solidity">function DOMAIN_SEPARATOR() public view returns (bytes32);
</code></pre>
<h3 id="_builddomainseparator"><a class="header" href="#_builddomainseparator">_buildDomainSeparator</a></h3>
<p>Builds a domain separator using the current chainId and contract address.</p>
<pre><code class="language-solidity">function _buildDomainSeparator(bytes32 typeHash, bytes32 nameHash) private view returns (bytes32);
</code></pre>
<h3 id="_hashtypeddata"><a class="header" href="#_hashtypeddata">_hashTypedData</a></h3>
<p>Creates an EIP-712 typed data hash</p>
<pre><code class="language-solidity">function _hashTypedData(bytes32 dataHash) internal view returns (bytes32);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="erc20"><a class="header" href="#erc20">ERC20</a></h1>
<p><strong>Inherits:</strong>
Context, IERC20, IERC20Metadata</p>
<h2 id="state-variables-3"><a class="header" href="#state-variables-3">State Variables</a></h2>
<h3 id="_balances"><a class="header" href="#_balances">_balances</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; uint256) private _balances;
</code></pre>
<h3 id="_allowances"><a class="header" href="#_allowances">_allowances</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; mapping(address =&gt; uint256)) private _allowances;
</code></pre>
<h3 id="_totalsupply"><a class="header" href="#_totalsupply">_totalSupply</a></h3>
<pre><code class="language-solidity">uint256 private _totalSupply;
</code></pre>
<h3 id="_name"><a class="header" href="#_name">_name</a></h3>
<pre><code class="language-solidity">string private _name;
</code></pre>
<h3 id="_symbol"><a class="header" href="#_symbol">_symbol</a></h3>
<pre><code class="language-solidity">string private _symbol;
</code></pre>
<h3 id="_decimals"><a class="header" href="#_decimals">_decimals</a></h3>
<pre><code class="language-solidity">uint8 private _decimals;
</code></pre>
<h2 id="functions-24"><a class="header" href="#functions-24">Functions</a></h2>
<h3 id="constructor-1"><a class="header" href="#constructor-1">constructor</a></h3>
<pre><code class="language-solidity">constructor(string memory name_, string memory symbol_, uint8 decimals_);
</code></pre>
<h3 id="name"><a class="header" href="#name">name</a></h3>
<pre><code class="language-solidity">function name() public view virtual override returns (string memory);
</code></pre>
<h3 id="symbol"><a class="header" href="#symbol">symbol</a></h3>
<pre><code class="language-solidity">function symbol() public view virtual override returns (string memory);
</code></pre>
<h3 id="decimals"><a class="header" href="#decimals">decimals</a></h3>
<pre><code class="language-solidity">function decimals() public view virtual override returns (uint8);
</code></pre>
<h3 id="totalsupply"><a class="header" href="#totalsupply">totalSupply</a></h3>
<pre><code class="language-solidity">function totalSupply() public view virtual override returns (uint256);
</code></pre>
<h3 id="balanceof-1"><a class="header" href="#balanceof-1">balanceOf</a></h3>
<pre><code class="language-solidity">function balanceOf(address account) public view virtual override returns (uint256);
</code></pre>
<h3 id="transfer"><a class="header" href="#transfer">transfer</a></h3>
<pre><code class="language-solidity">function transfer(address to, uint256 amount) public virtual override returns (bool);
</code></pre>
<h3 id="allowance-1"><a class="header" href="#allowance-1">allowance</a></h3>
<pre><code class="language-solidity">function allowance(address owner, address spender) public view virtual override returns (uint256);
</code></pre>
<h3 id="approve-1"><a class="header" href="#approve-1">approve</a></h3>
<pre><code class="language-solidity">function approve(address spender, uint256 amount) public virtual override returns (bool);
</code></pre>
<h3 id="transferfrom-5"><a class="header" href="#transferfrom-5">transferFrom</a></h3>
<pre><code class="language-solidity">function transferFrom(address from, address to, uint256 amount) public virtual override returns (bool);
</code></pre>
<h3 id="increaseallowance"><a class="header" href="#increaseallowance">increaseAllowance</a></h3>
<pre><code class="language-solidity">function increaseAllowance(address spender, uint256 addedValue) public virtual returns (bool);
</code></pre>
<h3 id="decreaseallowance"><a class="header" href="#decreaseallowance">decreaseAllowance</a></h3>
<pre><code class="language-solidity">function decreaseAllowance(address spender, uint256 subtractedValue) public virtual returns (bool);
</code></pre>
<h3 id="_transfer"><a class="header" href="#_transfer">_transfer</a></h3>
<pre><code class="language-solidity">function _transfer(address from, address to, uint256 amount) internal virtual;
</code></pre>
<h3 id="_mint"><a class="header" href="#_mint">_mint</a></h3>
<pre><code class="language-solidity">function _mint(address account, uint256 amount) internal virtual;
</code></pre>
<h3 id="_burn"><a class="header" href="#_burn">_burn</a></h3>
<pre><code class="language-solidity">function _burn(address account, uint256 amount) internal virtual;
</code></pre>
<h3 id="_approve"><a class="header" href="#_approve">_approve</a></h3>
<pre><code class="language-solidity">function _approve(address owner, address spender, uint256 amount) internal virtual;
</code></pre>
<h3 id="_spendallowance"><a class="header" href="#_spendallowance">_spendAllowance</a></h3>
<pre><code class="language-solidity">function _spendAllowance(address owner, address spender, uint256 amount) internal virtual;
</code></pre>
<h3 id="_beforetokentransfer"><a class="header" href="#_beforetokentransfer">_beforeTokenTransfer</a></h3>
<pre><code class="language-solidity">function _beforeTokenTransfer(address from, address to, uint256 amount) internal virtual;
</code></pre>
<h3 id="_aftertokentransfer"><a class="header" href="#_aftertokentransfer">_afterTokenTransfer</a></h3>
<pre><code class="language-solidity">function _afterTokenTransfer(address from, address to, uint256 amount) internal virtual;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mytoken"><a class="header" href="#mytoken">MyToken</a></h1>
<p><strong>Inherits:</strong>
<a href="src/ERC20.sol//src/ERC20.sol/contract.ERC20.html">ERC20</a></p>
<h2 id="state-variables-4"><a class="header" href="#state-variables-4">State Variables</a></h2>
<h3 id="owner"><a class="header" href="#owner">owner</a></h3>
<pre><code class="language-solidity">address public owner;
</code></pre>
<h2 id="functions-25"><a class="header" href="#functions-25">Functions</a></h2>
<h3 id="constructor-2"><a class="header" href="#constructor-2">constructor</a></h3>
<pre><code class="language-solidity">constructor(string memory name, string memory symbol, uint8 _decimals) ERC20(name, symbol, _decimals);
</code></pre>
<h3 id="mint-1"><a class="header" href="#mint-1">mint</a></h3>
<pre><code class="language-solidity">function mint(address recipent, uint256 amount) external;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="erc20permittest"><a class="header" href="#erc20permittest">ERC20PermitTest</a></h1>
<p><strong>Inherits:</strong>
ERC20Permit</p>
<h2 id="functions-26"><a class="header" href="#functions-26">Functions</a></h2>
<h3 id="constructor-3"><a class="header" href="#constructor-3">constructor</a></h3>
<pre><code class="language-solidity">constructor(string memory name_, string memory symbol_) ERC20(name_, symbol_) ERC20Permit(name_);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="permittransfer"><a class="header" href="#permittransfer">PermitTransfer</a></h1>
<p><strong>Inherits:</strong>
<a href="src/SimplePermit.sol//src/EIP712.sol/contract.EIP712.html">EIP712</a>, <a href="src/SimplePermit.sol//src/interfaces/I_SimplePermit.sol/interface.I_SimplePermit.html">I_SimplePermit</a></p>
<h2 id="state-variables-5"><a class="header" href="#state-variables-5">State Variables</a></h2>
<h3 id="allowance-2"><a class="header" href="#allowance-2">allowance</a></h3>
<pre><code class="language-solidity">mapping(address owner =&gt; mapping(address token =&gt; mapping(address spender =&gt; S_PackedAllowance data))) public allowance;
</code></pre>
<h2 id="functions-27"><a class="header" href="#functions-27">Functions</a></h2>
<h3 id="approve-2"><a class="header" href="#approve-2">approve</a></h3>
<pre><code class="language-solidity">function approve(address token, address spender, uint128 amount, uint48 expiration) external;
</code></pre>
<h3 id="transferfrom-6"><a class="header" href="#transferfrom-6">transferFrom</a></h3>
<pre><code class="language-solidity">function transferFrom(address token, address owner, address to, uint128 amount) external;
</code></pre>
<h3 id="permitallancetransferfrom-1"><a class="header" href="#permitallancetransferfrom-1">PermitAllanceTransferFrom</a></h3>
<pre><code class="language-solidity">function PermitAllanceTransferFrom(address token, address owner, address spender, uint128 amount, bytes calldata data)
    external;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ttswap_limitorder"><a class="header" href="#ttswap_limitorder">TTSwap_LimitOrder</a></h1>
<p><strong>Inherits:</strong>
<a href="src/TTSwap_LimitOrder.sol//src/interfaces/I_TTSwap_LimitOrderMaker.sol/interface.I_TTSwap_LimitOrderMaker.html">I_TTSwap_LimitOrderMaker</a></p>
<p><em>Implements ERC20 token with additional staking and cross-chain functionality</em></p>
<h2 id="state-variables-6"><a class="header" href="#state-variables-6">State Variables</a></h2>
<h3 id="maxslot"><a class="header" href="#maxslot">maxslot</a></h3>
<pre><code class="language-solidity">uint256 public maxslot;
</code></pre>
<h3 id="orderpointer"><a class="header" href="#orderpointer">orderpointer</a></h3>
<pre><code class="language-solidity">uint256 public orderpointer;
</code></pre>
<h3 id="marketcreator"><a class="header" href="#marketcreator">marketcreator</a></h3>
<pre><code class="language-solidity">address public marketcreator;
</code></pre>
<h3 id="maxfreeremain"><a class="header" href="#maxfreeremain">maxfreeremain</a></h3>
<pre><code class="language-solidity">uint96 public maxfreeremain;
</code></pre>
<h3 id="orderstatus"><a class="header" href="#orderstatus">orderstatus</a></h3>
<pre><code class="language-solidity">mapping(uint256 =&gt; uint256) internal orderstatus;
</code></pre>
<h3 id="orders"><a class="header" href="#orders">orders</a></h3>
<pre><code class="language-solidity">mapping(uint256 =&gt; S_orderDetails) public orders;
</code></pre>
<h3 id="auths-1"><a class="header" href="#auths-1">auths</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; uint256) public auths;
</code></pre>
<h3 id="defaultdata"><a class="header" href="#defaultdata">defaultdata</a></h3>
<pre><code class="language-solidity">bytes internal constant defaultdata = abi.encode(L_CurrencyLibrary.S_transferData(1, "0X"));
</code></pre>
<h2 id="functions-28"><a class="header" href="#functions-28">Functions</a></h2>
<h3 id="constructor-4"><a class="header" href="#constructor-4">constructor</a></h3>
<pre><code class="language-solidity">constructor(address _marketor);
</code></pre>
<h3 id="setmaxfreeremain"><a class="header" href="#setmaxfreeremain">setMaxfreeRemain</a></h3>
<pre><code class="language-solidity">function setMaxfreeRemain(uint96 times) external;
</code></pre>
<h3 id="changemarketcreator"><a class="header" href="#changemarketcreator">changemarketcreator</a></h3>
<pre><code class="language-solidity">function changemarketcreator(address _newmarketor) external;
</code></pre>
<h3 id="addauths-1"><a class="header" href="#addauths-1">addauths</a></h3>
<pre><code class="language-solidity">function addauths(address _marketor, uint256 _auths) external;
</code></pre>
<h3 id="removeauths"><a class="header" href="#removeauths">removeauths</a></h3>
<pre><code class="language-solidity">function removeauths(address _marketor) external;
</code></pre>
<h3 id="addmaxslot"><a class="header" href="#addmaxslot">addmaxslot</a></h3>
<pre><code class="language-solidity">function addmaxslot(uint256 _maxslot) external;
</code></pre>
<h3 id="addlimitorder-1"><a class="header" href="#addlimitorder-1">addLimitOrder</a></h3>
<p>User add limitorder</p>
<pre><code class="language-solidity">function addLimitOrder(S_orderDetails[] memory _orders) external override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_orders</code></td><td><code>S_orderDetails[]</code></td><td>order's detail</td></tr>
</tbody></table>
</div>
<h3 id="updatelimitorder-1"><a class="header" href="#updatelimitorder-1">updateLimitOrder</a></h3>
<p>owner update his limit order</p>
<pre><code class="language-solidity">function updateLimitOrder(uint256 orderid, S_orderDetails memory _order) external override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderid</code></td><td><code>uint256</code></td><td></td></tr>
<tr><td><code>_order</code></td><td><code>S_orderDetails</code></td><td>order's detail</td></tr>
</tbody></table>
</div>
<h3 id="removelimitorder-1"><a class="header" href="#removelimitorder-1">removeLimitOrder</a></h3>
<p>owner remove his limit order</p>
<pre><code class="language-solidity">function removeLimitOrder(uint256 orderid) external override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderid</code></td><td><code>uint256</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="takelimitordernormal-1"><a class="header" href="#takelimitordernormal-1">takeLimitOrderNormal</a></h3>
<p>normally take the limit order</p>
<pre><code class="language-solidity">function takeLimitOrderNormal(S_TakeParams[] memory orderids) external override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderids</code></td><td><code>S_TakeParams[]</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="takelimitorderchips-1"><a class="header" href="#takelimitorderchips-1">takeLimitOrderChips</a></h3>
<pre><code class="language-solidity">function takeLimitOrderChips(S_OrderChip[] memory _orderChips) external override;
</code></pre>
<h3 id="takelimitorderamm-1"><a class="header" href="#takelimitorderamm-1">takeLimitOrderAMM</a></h3>
<p>amm take the limit order</p>
<pre><code class="language-solidity">function takeLimitOrderAMM(
    uint256 orderid,
    uint96 _tolerance,
    I_TTSwap_LimitOrderTaker _takecontract,
    address _takecaller
) external override returns (bool _isSuccess);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderid</code></td><td><code>uint256</code></td><td></td></tr>
<tr><td><code>_tolerance</code></td><td><code>uint96</code></td><td>the caller's tolerance config</td></tr>
<tr><td><code>_takecontract</code></td><td><code>I_TTSwap_LimitOrderTaker</code></td><td>the amm's address</td></tr>
<tr><td><code>_takecaller</code></td><td><code>address</code></td><td>the caller address</td></tr>
</tbody></table>
</div>
<h3 id="takebatchlimitordersamm-1"><a class="header" href="#takebatchlimitordersamm-1">takeBatchLimitOrdersAMM</a></h3>
<p>amm take the limit order</p>
<pre><code class="language-solidity">function takeBatchLimitOrdersAMM(
    uint256[] memory orderids,
    uint96 _tolerance,
    I_TTSwap_LimitOrderTaker _takecontract,
    address _takecaller,
    bool _isall
) external override returns (bool[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>orderids</code></td><td><code>uint256[]</code></td><td></td></tr>
<tr><td><code>_tolerance</code></td><td><code>uint96</code></td><td>the caller's tolerance config</td></tr>
<tr><td><code>_takecontract</code></td><td><code>I_TTSwap_LimitOrderTaker</code></td><td>the amm's address</td></tr>
<tr><td><code>_takecaller</code></td><td><code>address</code></td><td>the caller address</td></tr>
<tr><td><code>_isall</code></td><td><code>bool</code></td><td>true:must all be deal</td></tr>
</tbody></table>
</div>
<h3 id="cleandeadorder"><a class="header" href="#cleandeadorder">cleandeadorder</a></h3>
<pre><code class="language-solidity">function cleandeadorder(uint256[] memory ids, bool smallorder) public;
</code></pre>
<h3 id="querylimitorder-1"><a class="header" href="#querylimitorder-1">queryLimitOrder</a></h3>
<p>get limit order's infor</p>
<pre><code class="language-solidity">function queryLimitOrder(uint256[] memory _ordersids) external view override returns (S_orderDetails[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_ordersids</code></td><td><code>uint256[]</code></td><td>orders' id</td></tr>
</tbody></table>
</div>
<h3 id="queryordersstatus"><a class="header" href="#queryordersstatus">queryOrdersStatus</a></h3>
<pre><code class="language-solidity">function queryOrdersStatus(uint256[] memory _ordersids) external view returns (bool[] memory);
</code></pre>
<h3 id="queryorderstatus"><a class="header" href="#queryorderstatus">queryOrderStatus</a></h3>
<pre><code class="language-solidity">function queryOrderStatus(uint256 _ordersid) external view returns (bool);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ttswap_market"><a class="header" href="#ttswap_market">TTSwap_Market</a></h1>
<p><strong>Inherits:</strong>
<a href="src/TTSwap_Market.sol//src/interfaces/I_TTSwap_Market.sol/interface.I_TTSwap_Market.html">I_TTSwap_Market</a>, <a href="src/TTSwap_Market.sol//src/interfaces/I_TTSwap_LimitOrderTaker.sol/interface.I_TTSwap_LimitOrderTaker.html">I_TTSwap_LimitOrderTaker</a>, IERC3156FlashLender</p>
<p>This contract handles initialization, buying, selling, investing, and disinvesting of goods and proofs.</p>
<p><em>Manages the market operations for goods and proofs.</em></p>
<h2 id="state-variables-7"><a class="header" href="#state-variables-7">State Variables</a></h2>
<h3 id="defaultdata-1"><a class="header" href="#defaultdata-1">defaultdata</a></h3>
<pre><code class="language-solidity">bytes private constant defaultdata = abi.encode(L_CurrencyLibrary.S_transferData(1, "0X"));
</code></pre>
<h3 id="return_value"><a class="header" href="#return_value">RETURN_VALUE</a></h3>
<pre><code class="language-solidity">bytes32 private constant RETURN_VALUE = keccak256("ERC3156FlashBorrower.onFlashLoan");
</code></pre>
<h3 id="marketconfig-1"><a class="header" href="#marketconfig-1">marketconfig</a></h3>
<pre><code class="language-solidity">uint256 public override marketconfig;
</code></pre>
<h3 id="goods"><a class="header" href="#goods">goods</a></h3>
<pre><code class="language-solidity">mapping(address goodid =&gt; S_GoodState) internal goods;
</code></pre>
<h3 id="proofmapping-1"><a class="header" href="#proofmapping-1">proofmapping</a></h3>
<pre><code class="language-solidity">mapping(uint256 proofkey =&gt; uint256 proofid) public override proofmapping;
</code></pre>
<h3 id="proofs"><a class="header" href="#proofs">proofs</a></h3>
<pre><code class="language-solidity">mapping(uint256 proofid =&gt; S_ProofState) internal proofs;
</code></pre>
<h3 id="userconfig-1"><a class="header" href="#userconfig-1">userConfig</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; uint256) public override userConfig;
</code></pre>
<h3 id="marketcreator-1"><a class="header" href="#marketcreator-1">marketcreator</a></h3>
<pre><code class="language-solidity">address public marketcreator;
</code></pre>
<h3 id="officialtokencontract"><a class="header" href="#officialtokencontract">officialTokenContract</a></h3>
<pre><code class="language-solidity">address internal immutable officialTokenContract;
</code></pre>
<h3 id="officialnftcontract"><a class="header" href="#officialnftcontract">officialNFTContract</a></h3>
<pre><code class="language-solidity">address internal immutable officialNFTContract;
</code></pre>
<h3 id="officelimitorder"><a class="header" href="#officelimitorder">officelimitorder</a></h3>
<pre><code class="language-solidity">address internal immutable officelimitorder;
</code></pre>
<h3 id="securitykeeper"><a class="header" href="#securitykeeper">securitykeeper</a></h3>
<pre><code class="language-solidity">address internal securitykeeper;
</code></pre>
<h2 id="functions-29"><a class="header" href="#functions-29">Functions</a></h2>
<h3 id="constructor-5"><a class="header" href="#constructor-5">constructor</a></h3>
<p><em>Constructor for TTSwap_Market</em></p>
<pre><code class="language-solidity">constructor(
    uint256 _marketconfig,
    address _officialTokenContract,
    address _officialNFTContract,
    address _officelimitorder,
    address _marketcreator,
    address _securitykeeper
);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_marketconfig</code></td><td><code>uint256</code></td><td>The market configuration</td></tr>
<tr><td><code>_officialTokenContract</code></td><td><code>address</code></td><td>The address of the official contract</td></tr>
<tr><td><code>_officialNFTContract</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>_officelimitorder</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>_marketcreator</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>_securitykeeper</code></td><td><code>address</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="onlydaoadmin"><a class="header" href="#onlydaoadmin">onlyDAOadmin</a></h3>
<pre><code class="language-solidity">modifier onlyDAOadmin();
</code></pre>
<h3 id="onlymarketor"><a class="header" href="#onlymarketor">onlyMarketor</a></h3>
<pre><code class="language-solidity">modifier onlyMarketor();
</code></pre>
<h3 id="changemarketcreator-1"><a class="header" href="#changemarketcreator-1">changemarketcreator</a></h3>
<pre><code class="language-solidity">function changemarketcreator(address _newmarketor) external;
</code></pre>
<h3 id="setmarketor-1"><a class="header" href="#setmarketor-1">setMarketor</a></h3>
<pre><code class="language-solidity">function setMarketor(address _newmarketor) external override;
</code></pre>
<h3 id="removemarketor-1"><a class="header" href="#removemarketor-1">removeMarketor</a></h3>
<pre><code class="language-solidity">function removeMarketor(address _user) external override;
</code></pre>
<h3 id="addbanlist-1"><a class="header" href="#addbanlist-1">addbanlist</a></h3>
<p>Adds an address to the ban list</p>
<pre><code class="language-solidity">function addbanlist(address _user) external override onlyMarketor returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The address to ban</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>is_success_ Success status</td></tr>
</tbody></table>
</div>
<h3 id="removebanlist-1"><a class="header" href="#removebanlist-1">removebanlist</a></h3>
<p>Removes an address from the ban list</p>
<pre><code class="language-solidity">function removebanlist(address _user) external override onlyMarketor returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_user</code></td><td><code>address</code></td><td>The address to unban</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>is_success_ Success status</td></tr>
</tbody></table>
</div>
<h3 id="noreentrant"><a class="header" href="#noreentrant">noReentrant</a></h3>
<pre><code class="language-solidity">modifier noReentrant();
</code></pre>
<h3 id="initmetagood-1"><a class="header" href="#initmetagood-1">initMetaGood</a></h3>
<p>Initialize the first good in the market</p>
<p><em>Initializes a meta good</em></p>
<pre><code class="language-solidity">function initMetaGood(address _erc20address, uint256 _initial, uint256 _goodConfig, bytes memory data)
    external
    payable
    onlyDAOadmin
    returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_erc20address</code></td><td><code>address</code></td><td>The address of the ERC20 token</td></tr>
<tr><td><code>_initial</code></td><td><code>uint256</code></td><td>The initial balance</td></tr>
<tr><td><code>_goodConfig</code></td><td><code>uint256</code></td><td>The good configuration</td></tr>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>Configuration of the good</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>bool Returns true if successful</td></tr>
</tbody></table>
</div>
<h3 id="initgood-1"><a class="header" href="#initgood-1">initGood</a></h3>
<p>Initialize a normal good in the market</p>
<p><em>Initializes a good</em></p>
<pre><code class="language-solidity">function initGood(
    address _valuegood,
    uint256 _initial,
    address _erc20address,
    uint256 _goodConfig,
    bytes memory data1,
    bytes memory data2
) external payable override noReentrant returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_valuegood</code></td><td><code>address</code></td><td>The value good ID</td></tr>
<tr><td><code>_initial</code></td><td><code>uint256</code></td><td>The initial balance</td></tr>
<tr><td><code>_erc20address</code></td><td><code>address</code></td><td>The address of the ERC20 token</td></tr>
<tr><td><code>_goodConfig</code></td><td><code>uint256</code></td><td>The good configuration</td></tr>
<tr><td><code>data1</code></td><td><code>bytes</code></td><td>Configuration of the good</td></tr>
<tr><td><code>data2</code></td><td><code>bytes</code></td><td>Configuration of the good</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>bool Returns true if successful</td></tr>
</tbody></table>
</div>
<h3 id="buygood-1"><a class="header" href="#buygood-1">buyGood</a></h3>
<p>Sell one good to buy another</p>
<p><em>Buys a good</em></p>
<pre><code class="language-solidity">function buyGood(
    address _goodid1,
    address _goodid2,
    uint128 _swapQuantity,
    uint256 _limitPrice,
    bool _istotal,
    address _referal,
    bytes memory data
) external payable noReentrant returns (uint128 goodid2Quantity_, uint128 goodid2FeeQuantity_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid1</code></td><td><code>address</code></td><td>The ID of the first good</td></tr>
<tr><td><code>_goodid2</code></td><td><code>address</code></td><td>The ID of the second good</td></tr>
<tr><td><code>_swapQuantity</code></td><td><code>uint128</code></td><td>The quantity to swap</td></tr>
<tr><td><code>_limitPrice</code></td><td><code>uint256</code></td><td>The limit price</td></tr>
<tr><td><code>_istotal</code></td><td><code>bool</code></td><td>Whether it's a total swap</td></tr>
<tr><td><code>_referal</code></td><td><code>address</code></td><td>The referral address</td></tr>
<tr><td><code>data</code></td><td><code>bytes</code></td><td></td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>goodid2Quantity_</code></td><td><code>uint128</code></td><td>The quantity of the second good received</td></tr>
<tr><td><code>goodid2FeeQuantity_</code></td><td><code>uint128</code></td><td>The fee quantity for the second good</td></tr>
</tbody></table>
</div>
<h3 id="takelimitorder-1"><a class="header" href="#takelimitorder-1">takeLimitOrder</a></h3>
<pre><code class="language-solidity">function takeLimitOrder(S_takeGoodInputPrams memory _inputParams, uint96 _tolerance, address _takecaller)
    external
    payable
    override
    noReentrant
    returns (bool _isSuccess);
</code></pre>
<h3 id="_takelimitorder"><a class="header" href="#_takelimitorder">_takeLimitOrder</a></h3>
<pre><code class="language-solidity">function _takeLimitOrder(S_takeGoodInputPrams memory _inputParams, uint96 _tolerance, address _takecaller)
    internal
    returns (bool _isSuccess);
</code></pre>
<h3 id="batchtakelimitorder-1"><a class="header" href="#batchtakelimitorder-1">batchTakelimitOrder</a></h3>
<pre><code class="language-solidity">function batchTakelimitOrder(bytes calldata _inputData, uint96 _tolerance, address _takecaller, uint8 ordernum)
    external
    payable
    override
    noReentrant
    returns (bool[] memory);
</code></pre>
<h3 id="buygoodforpay-1"><a class="header" href="#buygoodforpay-1">buyGoodForPay</a></h3>
<p>Buy a good, sell another, and send to a recipient</p>
<p><em>Buys a good for pay</em></p>
<pre><code class="language-solidity">function buyGoodForPay(
    address _goodid1,
    address _goodid2,
    uint128 _swapQuantity,
    uint256 _limitPrice,
    address _recipient,
    bytes memory data
) external payable override noReentrant returns (uint128 goodid1Quantity_, uint128 goodid1FeeQuantity_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid1</code></td><td><code>address</code></td><td>The ID of the first good</td></tr>
<tr><td><code>_goodid2</code></td><td><code>address</code></td><td>The ID of the second good</td></tr>
<tr><td><code>_swapQuantity</code></td><td><code>uint128</code></td><td>The quantity to swap</td></tr>
<tr><td><code>_limitPrice</code></td><td><code>uint256</code></td><td>The limit price</td></tr>
<tr><td><code>_recipient</code></td><td><code>address</code></td><td>The recipient address</td></tr>
<tr><td><code>data</code></td><td><code>bytes</code></td><td></td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>goodid1Quantity_</code></td><td><code>uint128</code></td><td>The quantity of the first good received</td></tr>
<tr><td><code>goodid1FeeQuantity_</code></td><td><code>uint128</code></td><td>The fee quantity for the first good</td></tr>
</tbody></table>
</div>
<h3 id="investgood-2"><a class="header" href="#investgood-2">investGood</a></h3>
<p>Invest in a normal good</p>
<p><em>Invests in a good</em></p>
<pre><code class="language-solidity">function investGood(address _togood, address _valuegood, uint128 _quantity, bytes memory data1, bytes memory data2)
    external
    payable
    override
    noReentrant
    returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_togood</code></td><td><code>address</code></td><td>The ID of the good to invest in</td></tr>
<tr><td><code>_valuegood</code></td><td><code>address</code></td><td>The ID of the value good</td></tr>
<tr><td><code>_quantity</code></td><td><code>uint128</code></td><td>The quantity to invest</td></tr>
<tr><td><code>data1</code></td><td><code>bytes</code></td><td></td></tr>
<tr><td><code>data2</code></td><td><code>bytes</code></td><td></td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>bool Returns true if successful</td></tr>
</tbody></table>
</div>
<h3 id="disinvestproof-1"><a class="header" href="#disinvestproof-1">disinvestProof</a></h3>
<p>Disinvest from a normal good</p>
<p><em>Disinvests a proof</em></p>
<pre><code class="language-solidity">function disinvestProof(uint256 _proofid, uint128 _goodQuantity, address _gater)
    public
    override
    noReentrant
    returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proofid</code></td><td><code>uint256</code></td><td>The ID of the proof</td></tr>
<tr><td><code>_goodQuantity</code></td><td><code>uint128</code></td><td>The quantity of the good to disinvest</td></tr>
<tr><td><code>_gater</code></td><td><code>address</code></td><td>The gater address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>bool Returns true if successful</td></tr>
</tbody></table>
</div>
<h3 id="collectproof-1"><a class="header" href="#collectproof-1">collectProof</a></h3>
<p>Collect profit from an investment proof</p>
<p><em>Collects the fee of a proof</em></p>
<pre><code class="language-solidity">function collectProof(uint256 _proofid, address _gater) external override noReentrant returns (uint256 profit_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_proofid</code></td><td><code>uint256</code></td><td>The ID of the proof</td></tr>
<tr><td><code>_gater</code></td><td><code>address</code></td><td>The gater address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>profit_</code></td><td><code>uint256</code></td><td>The collected profit</td></tr>
</tbody></table>
</div>
<h3 id="ishigher-1"><a class="header" href="#ishigher-1">ishigher</a></h3>
<p>Check if the price of a good is higher than a comparison price</p>
<pre><code class="language-solidity">function ishigher(address goodid, address valuegood, uint256 compareprice) external view override returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>goodid</code></td><td><code>address</code></td><td>ID of the good to check</td></tr>
<tr><td><code>valuegood</code></td><td><code>address</code></td><td>ID of the value good</td></tr>
<tr><td><code>compareprice</code></td><td><code>uint256</code></td><td>Price to compare against</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Whether the good's price is higher</td></tr>
</tbody></table>
</div>
<h3 id="getproofstate-1"><a class="header" href="#getproofstate-1">getProofState</a></h3>
<pre><code class="language-solidity">function getProofState(uint256 proofid) external view override returns (S_ProofState memory);
</code></pre>
<h3 id="getgoodstate-1"><a class="header" href="#getgoodstate-1">getGoodState</a></h3>
<pre><code class="language-solidity">function getGoodState(address goodkey) external view override returns (S_GoodTmpState memory);
</code></pre>
<h3 id="updategoodconfig-2"><a class="header" href="#updategoodconfig-2">updateGoodConfig</a></h3>
<p>Updates a good's configuration</p>
<pre><code class="language-solidity">function updateGoodConfig(address _goodid, uint256 _goodConfig) external override returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>address</code></td><td>The ID of the good</td></tr>
<tr><td><code>_goodConfig</code></td><td><code>uint256</code></td><td>The new configuration</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Success status</td></tr>
</tbody></table>
</div>
<h3 id="modifygoodconfig-2"><a class="header" href="#modifygoodconfig-2">modifyGoodConfig</a></h3>
<p>Allows market admin to modify a good's attributes</p>
<pre><code class="language-solidity">function modifyGoodConfig(address _goodid, uint256 _goodConfig) external override onlyMarketor returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>address</code></td><td>The ID of the good</td></tr>
<tr><td><code>_goodConfig</code></td><td><code>uint256</code></td><td>The new configuration</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Success status</td></tr>
</tbody></table>
</div>
<h3 id="paygood-1"><a class="header" href="#paygood-1">payGood</a></h3>
<p>Transfers a good to another address</p>
<pre><code class="language-solidity">function payGood(address _goodid, uint128 _payquanity, address _recipent, bytes memory transdata)
    external
    payable
    override
    returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>address</code></td><td>The ID of the good</td></tr>
<tr><td><code>_payquanity</code></td><td><code>uint128</code></td><td>The quantity to transfer</td></tr>
<tr><td><code>_recipent</code></td><td><code>address</code></td><td>The recipient's address</td></tr>
<tr><td><code>transdata</code></td><td><code>bytes</code></td><td>The recipient's address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Success status</td></tr>
</tbody></table>
</div>
<h3 id="changegoodowner-1"><a class="header" href="#changegoodowner-1">changeGoodOwner</a></h3>
<p>Changes the owner of a good</p>
<pre><code class="language-solidity">function changeGoodOwner(address _goodid, address _to) external override onlyMarketor;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>address</code></td><td>The ID of the good</td></tr>
<tr><td><code>_to</code></td><td><code>address</code></td><td>The new owner's address</td></tr>
</tbody></table>
</div>
<h3 id="collectcommission-1"><a class="header" href="#collectcommission-1">collectCommission</a></h3>
<p>Collects commission for specified goods</p>
<pre><code class="language-solidity">function collectCommission(address[] memory _goodid) external override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>address[]</code></td><td>Array of good IDs</td></tr>
</tbody></table>
</div>
<h3 id="querycommission-1"><a class="header" href="#querycommission-1">queryCommission</a></h3>
<p>Queries commission for specified goods and recipient</p>
<pre><code class="language-solidity">function queryCommission(address[] memory _goodid, address _recipent)
    external
    view
    override
    returns (uint256[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_goodid</code></td><td><code>address[]</code></td><td>Array of good IDs</td></tr>
<tr><td><code>_recipent</code></td><td><code>address</code></td><td>The recipient's address</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256[]</code></td><td>Array of commission amounts</td></tr>
</tbody></table>
</div>
<h3 id="goodwelfare-1"><a class="header" href="#goodwelfare-1">goodWelfare</a></h3>
<p>Delivers welfare to investors</p>
<pre><code class="language-solidity">function goodWelfare(address goodid, uint128 welfare, bytes memory data) external payable override noReentrant;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>goodid</code></td><td><code>address</code></td><td>The ID of the good</td></tr>
<tr><td><code>welfare</code></td><td><code>uint128</code></td><td>The amount of welfare</td></tr>
<tr><td><code>data</code></td><td><code>bytes</code></td><td></td></tr>
</tbody></table>
</div>
<h3 id="setmarketconfig-1"><a class="header" href="#setmarketconfig-1">setMarketConfig</a></h3>
<p>Sets the market configuration</p>
<pre><code class="language-solidity">function setMarketConfig(uint256 _marketconfig) external override onlyDAOadmin returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_marketconfig</code></td><td><code>uint256</code></td><td>The new market configuration</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>Success status</td></tr>
</tbody></table>
</div>
<h3 id="delproofdata-1"><a class="header" href="#delproofdata-1">delproofdata</a></h3>
<p><em>Internal function to handle proof data deletion and updates during transfer.</em></p>
<pre><code class="language-solidity">function delproofdata(uint256 proofid, address from, address to) external override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>proofid</code></td><td><code>uint256</code></td><td>The ID of the proof being transferred.</td></tr>
<tr><td><code>from</code></td><td><code>address</code></td><td>The address transferring the proof.</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>The address receiving the proof.</td></tr>
</tbody></table>
</div>
<h3 id="maxflashloan"><a class="header" href="#maxflashloan">maxFlashLoan</a></h3>
<p><em>The amount of currency available to be lended.</em></p>
<pre><code class="language-solidity">function maxFlashLoan(address good) public view override returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>good</code></td><td><code>address</code></td><td></td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The amount of <code>token</code> that can be borrowed.</td></tr>
</tbody></table>
</div>
<h3 id="flashfee"><a class="header" href="#flashfee">flashFee</a></h3>
<p><em>The fee to be charged for a given loan.</em></p>
<pre><code class="language-solidity">function flashFee(address token, uint256 amount) public view override returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>token</code></td><td><code>address</code></td><td>The loan currency.</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The amount of tokens lent.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The amount of <code>token</code> to be charged for the loan, on top of the returned principal.</td></tr>
</tbody></table>
</div>
<h3 id="flashloan"><a class="header" href="#flashloan">flashLoan</a></h3>
<pre><code class="language-solidity">function flashLoan(IERC3156FlashBorrower receiver, address token, uint256 amount, bytes calldata data)
    public
    override
    returns (bool);
</code></pre>
<h3 id="flashloan1-1"><a class="header" href="#flashloan1-1">flashLoan1</a></h3>
<pre><code class="language-solidity">function flashLoan1(
    IERC3156FlashBorrower receiver,
    address token,
    uint256 amount,
    bytes calldata data,
    bytes memory transdata
) public override returns (bool);
</code></pre>
<h3 id="securitykeeper-1"><a class="header" href="#securitykeeper-1">securityKeeper</a></h3>
<pre><code class="language-solidity">function securityKeeper(address token, uint256 amount) external;
</code></pre>
<h3 id="removesecuritykeeper"><a class="header" href="#removesecuritykeeper">removeSecurityKeeper</a></h3>
<pre><code class="language-solidity">function removeSecurityKeeper() external;
</code></pre>
<h2 id="errors-5"><a class="header" href="#errors-5">Errors</a></h2>
<h3 id="erc3156unsupportedtoken"><a class="header" href="#erc3156unsupportedtoken">ERC3156UnsupportedToken</a></h3>
<p><em>The loan token is not valid.</em></p>
<pre><code class="language-solidity">error ERC3156UnsupportedToken(address token);
</code></pre>
<h3 id="erc3156exceededmaxloan"><a class="header" href="#erc3156exceededmaxloan">ERC3156ExceededMaxLoan</a></h3>
<p><em>The requested loan exceeds the max loan value for <code>token</code>.</em></p>
<pre><code class="language-solidity">error ERC3156ExceededMaxLoan(uint256 maxLoan);
</code></pre>
<h3 id="erc3156invalidreceiver"><a class="header" href="#erc3156invalidreceiver">ERC3156InvalidReceiver</a></h3>
<p><em>The receiver of a flashloan is not a valid <a href="src/TTSwap_Market.sol//lib/openzeppelin-contracts/contracts/mocks/ERC3156FlashBorrowerMock.sol/contract.ERC3156FlashBorrowerMock.html#onflashloan">IERC3156FlashBorrower-onFlashLoan</a> implementer.</em></p>
<pre><code class="language-solidity">error ERC3156InvalidReceiver(address receiver);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ttswap_nft"><a class="header" href="#ttswap_nft">TTSwap_NFT</a></h1>
<p><strong>Inherits:</strong>
<a href="src/TTSwap_NFT.sol//src/interfaces/I_TTSwap_NFT.sol/interface.I_TTSwap_NFT.html">I_TTSwap_NFT</a>, ERC721Permit</p>
<p><em>Abstract contract for managing proofs as ERC721 tokens with additional functionality.
Inherits from I_Proof and ERC721Permit.</em></p>
<h2 id="state-variables-8"><a class="header" href="#state-variables-8">State Variables</a></h2>
<h3 id="proofsource-1"><a class="header" href="#proofsource-1">proofsource</a></h3>
<p><em>record which contract is storing the tokenid</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; address) public override proofsource;
</code></pre>
<h3 id="officialtokencontract-1"><a class="header" href="#officialtokencontract-1">officialTokenContract</a></h3>
<pre><code class="language-solidity">address internal immutable officialTokenContract;
</code></pre>
<h2 id="functions-30"><a class="header" href="#functions-30">Functions</a></h2>
<h3 id="constructor-6"><a class="header" href="#constructor-6">constructor</a></h3>
<p><em>Constructor to initialize the ProofManage contract.</em></p>
<pre><code class="language-solidity">constructor(address _officialTokenContract) ERC721Permit("TTSwap NFT", "TTN");
</code></pre>
<h3 id="_baseuri"><a class="header" href="#_baseuri">_baseURI</a></h3>
<p><em>Returns the base URI for computing {tokenURI}.</em></p>
<pre><code class="language-solidity">function _baseURI() internal pure override returns (string memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>string</code></td><td>string The base URI string.</td></tr>
</tbody></table>
</div>
<h3 id="transferfrom-7"><a class="header" href="#transferfrom-7">transferFrom</a></h3>
<p><em>Transfers ownership of a token from one address to another address.</em></p>
<pre><code class="language-solidity">function transferFrom(address from, address to, uint256 tokenId) public override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>from</code></td><td><code>address</code></td><td>The current owner of the token.</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>The new owner.</td></tr>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>The ID of the token being transferred.</td></tr>
</tbody></table>
</div>
<h3 id="safetransferfrom"><a class="header" href="#safetransferfrom">safeTransferFrom</a></h3>
<p><em>Safely transfers the ownership of a given token ID to another address.</em></p>
<pre><code class="language-solidity">function safeTransferFrom(address from, address to, uint256 tokenId, bytes memory data) public override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>from</code></td><td><code>address</code></td><td>The current owner of the token.</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>The new owner.</td></tr>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>The ID of the token to be transferred.</td></tr>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>Additional data with no specified format.</td></tr>
</tbody></table>
</div>
<h3 id="safetransferfromwithpermit-1"><a class="header" href="#safetransferfromwithpermit-1">safeTransferFromWithPermit</a></h3>
<p><em>Safely transfers the ownership of a given token ID to another address with a permit.</em></p>
<pre><code class="language-solidity">function safeTransferFromWithPermit(
    address from,
    address to,
    uint256 tokenId,
    bytes memory _data,
    uint256 deadline,
    bytes memory signature
) external override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>from</code></td><td><code>address</code></td><td>The current owner of the token.</td></tr>
<tr><td><code>to</code></td><td><code>address</code></td><td>The new owner.</td></tr>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>The ID of the token to be transferred.</td></tr>
<tr><td><code>_data</code></td><td><code>bytes</code></td><td>Additional data with no specified format.</td></tr>
<tr><td><code>deadline</code></td><td><code>uint256</code></td><td>The time at which the signature expires.</td></tr>
<tr><td><code>signature</code></td><td><code>bytes</code></td><td>A valid EIP712 signature.</td></tr>
</tbody></table>
</div>
<h3 id="mint-2"><a class="header" href="#mint-2">mint</a></h3>
<p><em>mint nft for recipent</em></p>
<pre><code class="language-solidity">function mint(address recipent, uint256 tokenid) external override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>recipent</code></td><td><code>address</code></td><td>who is  the tokenid  minted the tokenid for .</td></tr>
<tr><td><code>tokenid</code></td><td><code>uint256</code></td><td>the tokenid.</td></tr>
</tbody></table>
</div>
<h3 id="isapprovedorowner-1"><a class="header" href="#isapprovedorowner-1">isApprovedOrOwner</a></h3>
<p><em>get the token  approved to the spender</em></p>
<pre><code class="language-solidity">function isApprovedOrOwner(address spender, uint256 tokenId) external view override returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>spender</code></td><td><code>address</code></td><td>who</td></tr>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>The new owner.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>result</td></tr>
</tbody></table>
</div>
<h3 id="burn-2"><a class="header" href="#burn-2">burn</a></h3>
<p><em>burn tokenid</em></p>
<pre><code class="language-solidity">function burn(uint256 tokenId) external override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>tokenId</code></td><td><code>uint256</code></td><td>which tokenid will be burned.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="ttswap_token"><a class="header" href="#ttswap_token">TTSwap_Token</a></h1>
<p><strong>Inherits:</strong>
ERC20Permit, <a href="src/TTSwap_Token.sol//src/interfaces/I_TTSwap_Token.sol/interface.I_TTSwap_Token.html">I_TTSwap_Token</a></p>
<p><em>Implements ERC20 token with additional staking and cross-chain functionality</em></p>
<h2 id="state-variables-9"><a class="header" href="#state-variables-9">State Variables</a></h2>
<h3 id="ttstokenconfig"><a class="header" href="#ttstokenconfig">ttstokenconfig</a></h3>
<pre><code class="language-solidity">uint256 public ttstokenconfig;
</code></pre>
<h3 id="shares"><a class="header" href="#shares">shares</a></h3>
<pre><code class="language-solidity">mapping(uint32 =&gt; s_share) public shares;
</code></pre>
<h3 id="stakestate"><a class="header" href="#stakestate">stakestate</a></h3>
<pre><code class="language-solidity">uint256 public stakestate;
</code></pre>
<h3 id="poolstate"><a class="header" href="#poolstate">poolstate</a></h3>
<pre><code class="language-solidity">uint256 public poolstate;
</code></pre>
<h3 id="stakeproof"><a class="header" href="#stakeproof">stakeproof</a></h3>
<pre><code class="language-solidity">mapping(uint256 =&gt; s_proof) public stakeproof;
</code></pre>
<h3 id="chains"><a class="header" href="#chains">chains</a></h3>
<pre><code class="language-solidity">mapping(uint32 =&gt; s_chain) public chains;
</code></pre>
<h3 id="normalgoodid-1"><a class="header" href="#normalgoodid-1">normalgoodid</a></h3>
<p><em>Returns the ID of the normal good</em></p>
<pre><code class="language-solidity">address public override normalgoodid;
</code></pre>
<h3 id="valuegoodid-1"><a class="header" href="#valuegoodid-1">valuegoodid</a></h3>
<p><em>Returns the ID of the value good</em></p>
<pre><code class="language-solidity">address public override valuegoodid;
</code></pre>
<h3 id="dao_admin-1"><a class="header" href="#dao_admin-1">dao_admin</a></h3>
<p><em>Returns the address of the DAO admin</em></p>
<pre><code class="language-solidity">address public override dao_admin;
</code></pre>
<h3 id="marketcontract-1"><a class="header" href="#marketcontract-1">marketcontract</a></h3>
<p><em>Returns the address of the market contract</em></p>
<pre><code class="language-solidity">address public override marketcontract;
</code></pre>
<h3 id="shares_index"><a class="header" href="#shares_index">shares_index</a></h3>
<pre><code class="language-solidity">uint32 public shares_index;
</code></pre>
<h3 id="chainindex"><a class="header" href="#chainindex">chainindex</a></h3>
<pre><code class="language-solidity">uint32 public chainindex;
</code></pre>
<h3 id="left_share"><a class="header" href="#left_share">left_share</a></h3>
<pre><code class="language-solidity">uint128 public left_share = 5 * 10 ** 8 * 10 ** 6;
</code></pre>
<h3 id="publicsell-1"><a class="header" href="#publicsell-1">publicsell</a></h3>
<p><em>Returns the amount of TTS available for public sale</em></p>
<pre><code class="language-solidity">uint128 public override publicsell;
</code></pre>
<h3 id="referrals-1"><a class="header" href="#referrals-1">referrals</a></h3>
<p><em>Returns the referrer address for a given user</em></p>
<pre><code class="language-solidity">mapping(address =&gt; address) public override referrals;
</code></pre>
<h3 id="auths-2"><a class="header" href="#auths-2">auths</a></h3>
<p><em>Returns the authorization level for a given address</em></p>
<pre><code class="language-solidity">mapping(address =&gt; uint256) public override auths;
</code></pre>
<h3 id="usdt"><a class="header" href="#usdt">usdt</a></h3>
<pre><code class="language-solidity">address public immutable usdt;
</code></pre>
<h2 id="functions-31"><a class="header" href="#functions-31">Functions</a></h2>
<h3 id="constructor-7"><a class="header" href="#constructor-7">constructor</a></h3>
<p><em>Constructor to initialize the TTS token</em></p>
<pre><code class="language-solidity">constructor(address _usdt, address _dao_admin, uint256 _ttsconfig)
    ERC20Permit("TTSwap Token")
    ERC20("TTSwap Token", "TTS");
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_usdt</code></td><td><code>address</code></td><td>Address of the USDT token contract</td></tr>
<tr><td><code>_dao_admin</code></td><td><code>address</code></td><td>Address of the DAO admin</td></tr>
<tr><td><code>_ttsconfig</code></td><td><code>uint256</code></td><td>Configuration for the TTS token</td></tr>
</tbody></table>
</div>
<h3 id="onlymain"><a class="header" href="#onlymain">onlymain</a></h3>
<p><em>Modifier to ensure function is only called on the main chain</em></p>
<pre><code class="language-solidity">modifier onlymain();
</code></pre>
<h3 id="onlysub"><a class="header" href="#onlysub">onlysub</a></h3>
<p><em>Modifier to ensure function is only called on sub-chains</em></p>
<pre><code class="language-solidity">modifier onlysub();
</code></pre>
<h3 id="setenv-1"><a class="header" href="#setenv-1">setEnv</a></h3>
<p><em>Set environment variables for the contract</em></p>
<pre><code class="language-solidity">function setEnv(address _normalgoodid, address _valuegoodid, address _marketcontract) external override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_normalgoodid</code></td><td><code>address</code></td><td>ID for normal goods</td></tr>
<tr><td><code>_valuegoodid</code></td><td><code>address</code></td><td>ID for value goods</td></tr>
<tr><td><code>_marketcontract</code></td><td><code>address</code></td><td>Address of the market contract</td></tr>
</tbody></table>
</div>
<h3 id="changedaoadmin-1"><a class="header" href="#changedaoadmin-1">changeDAOAdmin</a></h3>
<p>Only the current DAO admin can call this function</p>
<p><em>Changes the DAO admin address</em></p>
<pre><code class="language-solidity">function changeDAOAdmin(address _recipient) external override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_recipient</code></td><td><code>address</code></td><td>The address of the new DAO admin</td></tr>
</tbody></table>
</div>
<h3 id="addauths-2"><a class="header" href="#addauths-2">addauths</a></h3>
<p>Only the DAO admin can call this function</p>
<p><em>Adds or updates authorization for an address</em></p>
<pre><code class="language-solidity">function addauths(address _auths, uint256 _priv) external override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_auths</code></td><td><code>address</code></td><td>The address to authorize</td></tr>
<tr><td><code>_priv</code></td><td><code>uint256</code></td><td>The privilege level to assign</td></tr>
</tbody></table>
</div>
<h3 id="rmauths-1"><a class="header" href="#rmauths-1">rmauths</a></h3>
<p>Only the DAO admin can call this function</p>
<p><em>Removes authorization from an address</em></p>
<pre><code class="language-solidity">function rmauths(address _auths) external override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_auths</code></td><td><code>address</code></td><td>The address to remove authorization from</td></tr>
</tbody></table>
</div>
<h3 id="addshare-1"><a class="header" href="#addshare-1">addShare</a></h3>
<p>Only callable on the main chain by the DAO admin</p>
<p>Reduces the left_share by the amount in _share</p>
<p>Increments the shares_index and adds the new share to the shares mapping</p>
<p>Emits an e_addShare event with the share details</p>
<p><em>Adds a new mint share to the contract</em></p>
<pre><code class="language-solidity">function addShare(s_share calldata _share) external override onlymain;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_share</code></td><td><code>s_share</code></td><td>The share structure containing recipient, amount, metric, and chips</td></tr>
</tbody></table>
</div>
<h3 id="burnshare-1"><a class="header" href="#burnshare-1">burnShare</a></h3>
<p>Only callable on the main chain by the DAO admin</p>
<p>Adds the leftamount of the burned share back to left_share</p>
<p>Emits an e_burnShare event and deletes the share from the shares mapping</p>
<p><em>Burns (removes) a mint share from the contract</em></p>
<pre><code class="language-solidity">function burnShare(uint8 index) external override onlymain;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>index</code></td><td><code>uint8</code></td><td>The index of the share to burn</td></tr>
</tbody></table>
</div>
<h3 id="sharemint-1"><a class="header" href="#sharemint-1">shareMint</a></h3>
<p>Only callable on the main chain</p>
<p>Requires the market price to be below a certain threshold</p>
<p>Mints tokens to the share recipient, reduces leftamount, and increments metric</p>
<p>Emits an e_daomint event with the minted amount and index</p>
<p><em>Allows the DAO to mint tokens based on a specific share</em></p>
<pre><code class="language-solidity">function shareMint(uint8 index) external override onlymain;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>index</code></td><td><code>uint8</code></td><td>The index of the share to mint from</td></tr>
</tbody></table>
</div>
<h3 id="addreferral-1"><a class="header" href="#addreferral-1">addreferral</a></h3>
<p>Only callable by authorized addresses (auths[msg.sender] == 1)</p>
<p>Will only set the referral if the user doesn't already have one</p>
<p><em>Adds a referral relationship between a user and a referrer</em></p>
<pre><code class="language-solidity">function addreferral(address user, address referral) external override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>user</code></td><td><code>address</code></td><td>The address of the user being referred</td></tr>
<tr><td><code>referral</code></td><td><code>address</code></td><td>The address of the referrer</td></tr>
</tbody></table>
</div>
<h3 id="decimals-1"><a class="header" href="#decimals-1">decimals</a></h3>
<p><em>Returns the number of decimals used to get its user representation</em></p>
<pre><code class="language-solidity">function decimals() public pure override returns (uint8);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint8</code></td><td>The number of decimals</td></tr>
</tbody></table>
</div>
<h3 id="getreferralanddaoadmin-1"><a class="header" href="#getreferralanddaoadmin-1">getreferralanddaoadmin</a></h3>
<p>Get the DAO admin and referral for a customer</p>
<p><em>Retrieves both the DAO admin address and the referrer address for a given customer</em></p>
<pre><code class="language-solidity">function getreferralanddaoadmin(address _customer) external view override returns (address, address);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_customer</code></td><td><code>address</code></td><td>The address of the customer</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>A tuple containing the DAO admin address and the customer's referrer address</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>dba_admin The address of the DAO admin</td></tr>
</tbody></table>
</div>
<h3 id="public_sell-1"><a class="header" href="#public_sell-1">public_Sell</a></h3>
<p><em>Perform public token sale</em></p>
<pre><code class="language-solidity">function public_Sell(uint256 usdtamount) external onlymain;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>usdtamount</code></td><td><code>uint256</code></td><td>Amount of USDT to spend on token purchase</td></tr>
</tbody></table>
</div>
<h3 id="withdrawpublicsell-1"><a class="header" href="#withdrawpublicsell-1">withdrawPublicSell</a></h3>
<p>Only callable on the main chain by the DAO admin</p>
<p>Transfers the specified amount of USDT to the recipient</p>
<p><em>Withdraws funds from public token sale</em></p>
<pre><code class="language-solidity">function withdrawPublicSell(uint256 amount, address recipient) external onlymain;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>The amount of USDT to withdraw</td></tr>
<tr><td><code>recipient</code></td><td><code>address</code></td><td>The address to receive the withdrawn funds</td></tr>
</tbody></table>
</div>
<h3 id="syncchainstake-1"><a class="header" href="#syncchainstake-1">syncChainStake</a></h3>
<p><em>Synchronize stake across chains</em></p>
<pre><code class="language-solidity">function syncChainStake(uint32 chainid, uint128 chainvalue) external override onlymain returns (uint128 poolasset);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>chainid</code></td><td><code>uint32</code></td><td>ID of the chain</td></tr>
<tr><td><code>chainvalue</code></td><td><code>uint128</code></td><td>Value to synchronize</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>poolasset</code></td><td><code>uint128</code></td><td>Amount of pool asset</td></tr>
</tbody></table>
</div>
<h3 id="syncpoolasset-1"><a class="header" href="#syncpoolasset-1">syncPoolAsset</a></h3>
<p>Only callable on sub-chains by authorized addresses (auths[msg.sender] == 5)</p>
<p><em>Synchronizes the pool asset on sub-chains</em></p>
<pre><code class="language-solidity">function syncPoolAsset(uint128 amount) external override onlysub;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount</code></td><td><code>uint128</code></td><td>The amount to add to the pool state</td></tr>
</tbody></table>
</div>
<h3 id="chain_withdraw-1"><a class="header" href="#chain_withdraw-1">chain_withdraw</a></h3>
<p>Only callable on the main chain by authorized addresses (auths[msg.sender] == 6)</p>
<p>Requires the caller to be the recipient of the chain or the chain to have no recipient</p>
<p>Updates the chain's asset balance and checks if the caller has sufficient balance</p>
<p><em>Withdraws assets from a specific chain</em></p>
<pre><code class="language-solidity">function chain_withdraw(uint32 chainid, uint128 asset) external override onlymain;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>chainid</code></td><td><code>uint32</code></td><td>The ID of the chain to withdraw from</td></tr>
<tr><td><code>asset</code></td><td><code>uint128</code></td><td>The amount of assets to withdraw</td></tr>
</tbody></table>
</div>
<h3 id="chain_deposit-1"><a class="header" href="#chain_deposit-1">chain_deposit</a></h3>
<p>Only callable on the main chain by authorized addresses (auths[msg.sender] == 6)</p>
<p>Requires the caller to be the recipient of the chain or the chain to have no recipient</p>
<p>Updates the chain's asset balance</p>
<p><em>Deposits assets to a specific chain</em></p>
<pre><code class="language-solidity">function chain_deposit(uint32 chainid, uint128 asset) external override onlymain;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>chainid</code></td><td><code>uint32</code></td><td>The ID of the chain to deposit to</td></tr>
<tr><td><code>asset</code></td><td><code>uint128</code></td><td>The amount of assets to deposit</td></tr>
</tbody></table>
</div>
<h3 id="subchainwithdraw-1"><a class="header" href="#subchainwithdraw-1">subchainWithdraw</a></h3>
<p>Only callable on sub-chains by authorized addresses (auths[msg.sender] == 6)</p>
<p>Requires the caller to be the recipient of the chain or the chain to have no recipient</p>
<p>Updates the chain's asset balance and burns the withdrawn amount from the recipient</p>
<p><em>Withdraws assets on a sub-chain</em></p>
<pre><code class="language-solidity">function subchainWithdraw(uint128 asset, address recipient) external override onlysub;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>uint128</code></td><td>The amount of assets to withdraw</td></tr>
<tr><td><code>recipient</code></td><td><code>address</code></td><td>The address to receive the withdrawn assets</td></tr>
</tbody></table>
</div>
<h3 id="subchaindeposit-1"><a class="header" href="#subchaindeposit-1">subchainDeposit</a></h3>
<p>Only callable on sub-chains by authorized addresses (auths[msg.sender] == 6)</p>
<p>Requires the caller to be the recipient of the chain or the chain to have no recipient</p>
<p>Updates the chain's asset balance and mints the deposited amount to the recipient</p>
<p><em>Deposits assets on a sub-chain</em></p>
<pre><code class="language-solidity">function subchainDeposit(uint128 asset, address recipient) external onlysub;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>asset</code></td><td><code>uint128</code></td><td>The amount of assets to deposit</td></tr>
<tr><td><code>recipient</code></td><td><code>address</code></td><td>The address to receive the deposited assets</td></tr>
</tbody></table>
</div>
<h3 id="stake-2"><a class="header" href="#stake-2">stake</a></h3>
<p>Stake tokens</p>
<p><em>Stake tokens</em></p>
<pre><code class="language-solidity">function stake(address _staker, uint128 proofvalue) external override returns (uint128 netconstruct);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_staker</code></td><td><code>address</code></td><td>Address of the staker</td></tr>
<tr><td><code>proofvalue</code></td><td><code>uint128</code></td><td>Amount to stake</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>netconstruct</code></td><td><code>uint128</code></td><td>Net construct value</td></tr>
</tbody></table>
</div>
<h3 id="unstake-2"><a class="header" href="#unstake-2">unstake</a></h3>
<p>Unstake tokens</p>
<p><em>Unstake tokens</em></p>
<pre><code class="language-solidity">function unstake(address _staker, uint128 proofvalue) external override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_staker</code></td><td><code>address</code></td><td>Address of the staker</td></tr>
<tr><td><code>proofvalue</code></td><td><code>uint128</code></td><td>Amount to unstake</td></tr>
</tbody></table>
</div>
<h3 id="_stakefee"><a class="header" href="#_stakefee">_stakeFee</a></h3>
<p><em>Internal function to handle staking fees</em></p>
<pre><code class="language-solidity">function _stakeFee() internal;
</code></pre>
<h3 id="burn-3"><a class="header" href="#burn-3">burn</a></h3>
<p><em>Burn tokens from an account</em></p>
<pre><code class="language-solidity">function burn(address account, uint256 value) external override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>account</code></td><td><code>address</code></td><td>Address of the account to burn tokens from</td></tr>
<tr><td><code>value</code></td><td><code>uint256</code></td><td>Amount of tokens to burn</td></tr>
</tbody></table>
</div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="solidity.min.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
